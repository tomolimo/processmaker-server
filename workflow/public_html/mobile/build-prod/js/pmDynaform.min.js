if(!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t=e.length,n=at.type(e);return"function"===n||at.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e}function i(e,t,n){if(at.isFunction(t))return at.grep(e,function(e,i){return!!t.call(e,i,e)!==n});if(t.nodeType)return at.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(ht.test(t))return at.filter(t,e,n);t=at.filter(t,e)}return at.grep(e,function(e){return at.inArray(e,t)>=0!==n})}function a(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function o(e){var t=wt[e]={};return at.each(e.match(bt)||[],function(e,n){t[n]=!0}),t}function r(){pt.addEventListener?(pt.removeEventListener("DOMContentLoaded",s,!1),e.removeEventListener("load",s,!1)):(pt.detachEvent("onreadystatechange",s),e.detachEvent("onload",s))}function s(){(pt.addEventListener||"load"===event.type||"complete"===pt.readyState)&&(r(),at.ready())}function l(e,t,n){if(void 0===n&&1===e.nodeType){var i="data-"+t.replace(Tt,"-$1").toLowerCase();if(n=e.getAttribute(i),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:Ct.test(n)?at.parseJSON(n):n}catch(a){}at.data(e,t,n)}else n=void 0}return n}function u(e){var t;for(t in e)if(("data"!==t||!at.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function d(e,t,n,i){if(at.acceptData(e)){var a,o,r=at.expando,s=e.nodeType,l=s?at.cache:e,u=s?e[r]:e[r]&&r;if(u&&l[u]&&(i||l[u].data)||void 0!==n||"string"!=typeof t)return u||(u=s?e[r]=Y.pop()||at.guid++:r),l[u]||(l[u]=s?{}:{toJSON:at.noop}),("object"==typeof t||"function"==typeof t)&&(i?l[u]=at.extend(l[u],t):l[u].data=at.extend(l[u].data,t)),o=l[u],i||(o.data||(o.data={}),o=o.data),void 0!==n&&(o[at.camelCase(t)]=n),"string"==typeof t?(a=o[t],null==a&&(a=o[at.camelCase(t)])):a=o,a}}function c(e,t,n){if(at.acceptData(e)){var i,a,o=e.nodeType,r=o?at.cache:e,s=o?e[at.expando]:at.expando;if(r[s]){if(t&&(i=n?r[s]:r[s].data)){at.isArray(t)?t=t.concat(at.map(t,at.camelCase)):t in i?t=[t]:(t=at.camelCase(t),t=t in i?[t]:t.split(" ")),a=t.length;for(;a--;)delete i[t[a]];if(n?!u(i):!at.isEmptyObject(i))return}(n||(delete r[s].data,u(r[s])))&&(o?at.cleanData([e],!0):nt.deleteExpando||r!=r.window?delete r[s]:r[s]=null)}}}function h(){return!0}function f(){return!1}function p(){try{return pt.activeElement}catch(e){}}function m(e){var t=jt.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}function g(e,t){var n,i,a=0,o=typeof e.getElementsByTagName!==xt?e.getElementsByTagName(t||"*"):typeof e.querySelectorAll!==xt?e.querySelectorAll(t||"*"):void 0;if(!o)for(o=[],n=e.childNodes||e;null!=(i=n[a]);a++)!t||at.nodeName(i,t)?o.push(i):at.merge(o,g(i,t));return void 0===t||t&&at.nodeName(e,t)?at.merge([e],o):o}function v(e){St.test(e.type)&&(e.defaultChecked=e.checked)}function y(e,t){return at.nodeName(e,"table")&&at.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function b(e){return e.type=(null!==at.find.attr(e,"type"))+"/"+e.type,e}function w(e){var t=Jt.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function k(e,t){for(var n,i=0;null!=(n=e[i]);i++)at._data(n,"globalEval",!t||at._data(t[i],"globalEval"))}function D(e,t){if(1===t.nodeType&&at.hasData(e)){var n,i,a,o=at._data(e),r=at._data(t,o),s=o.events;if(s){delete r.handle,r.events={};for(n in s)for(i=0,a=s[n].length;a>i;i++)at.event.add(t,n,s[n][i])}r.data&&(r.data=at.extend({},r.data))}}function x(e,t){var n,i,a;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!nt.noCloneEvent&&t[at.expando]){a=at._data(t);for(i in a.events)at.removeEvent(t,i,a.handle);t.removeAttribute(at.expando)}"script"===n&&t.text!==e.text?(b(t).text=e.text,w(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),nt.html5Clone&&e.innerHTML&&!at.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&St.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}function C(t,n){var i,a=at(n.createElement(t)).appendTo(n.body),o=e.getDefaultComputedStyle&&(i=e.getDefaultComputedStyle(a[0]))?i.display:at.css(a[0],"display");return a.detach(),o}function T(e){var t=pt,n=Zt[e];return n||(n=C(e,t),"none"!==n&&n||(Kt=(Kt||at("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=(Kt[0].contentWindow||Kt[0].contentDocument).document,t.write(),t.close(),n=C(e,t),Kt.detach()),Zt[e]=n),n}function M(e,t){return{get:function(){var n=e();return null!=n?n?void delete this.get:(this.get=t).apply(this,arguments):void 0}}}function P(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),i=t,a=fn.length;a--;)if(t=fn[a]+n,t in e)return t;return i}function F(e,t){for(var n,i,a,o=[],r=0,s=e.length;s>r;r++)i=e[r],i.style&&(o[r]=at._data(i,"olddisplay"),n=i.style.display,t?(o[r]||"none"!==n||(i.style.display=""),""===i.style.display&&Ft(i)&&(o[r]=at._data(i,"olddisplay",T(i.nodeName)))):(a=Ft(i),(n&&"none"!==n||!a)&&at._data(i,"olddisplay",a?n:at.css(i,"display"))));for(r=0;s>r;r++)i=e[r],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?o[r]||"":"none"));return e}function _(e,t,n){var i=un.exec(t);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):t}function S(e,t,n,i,a){for(var o=n===(i?"border":"content")?4:"width"===t?1:0,r=0;4>o;o+=2)"margin"===n&&(r+=at.css(e,n+Pt[o],!0,a)),i?("content"===n&&(r-=at.css(e,"padding"+Pt[o],!0,a)),"margin"!==n&&(r-=at.css(e,"border"+Pt[o]+"Width",!0,a))):(r+=at.css(e,"padding"+Pt[o],!0,a),"padding"!==n&&(r+=at.css(e,"border"+Pt[o]+"Width",!0,a)));return r}function E(e,t,n){var i=!0,a="width"===t?e.offsetWidth:e.offsetHeight,o=en(e),r=nt.boxSizing&&"border-box"===at.css(e,"boxSizing",!1,o);if(0>=a||null==a){if(a=tn(e,t,o),(0>a||null==a)&&(a=e.style[t]),an.test(a))return a;i=r&&(nt.boxSizingReliable()||a===e.style[t]),a=parseFloat(a)||0}return a+S(e,t,n||(r?"border":"content"),i,o)+"px"}function N(e,t,n,i,a){return new N.prototype.init(e,t,n,i,a)}function O(){return setTimeout(function(){pn=void 0}),pn=at.now()}function $(e,t){var n,i={height:e},a=0;for(t=t?1:0;4>a;a+=2-t)n=Pt[a],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function I(e,t,n){for(var i,a=(wn[t]||[]).concat(wn["*"]),o=0,r=a.length;r>o;o++)if(i=a[o].call(n,t,e))return i}function j(e,t,n){var i,a,o,r,s,l,u,d,c=this,h={},f=e.style,p=e.nodeType&&Ft(e),m=at._data(e,"fxshow");n.queue||(s=at._queueHooks(e,"fx"),null==s.unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,c.always(function(){c.always(function(){s.unqueued--,at.queue(e,"fx").length||s.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],u=at.css(e,"display"),d="none"===u?at._data(e,"olddisplay")||T(e.nodeName):u,"inline"===d&&"none"===at.css(e,"float")&&(nt.inlineBlockNeedsLayout&&"inline"!==T(e.nodeName)?f.zoom=1:f.display="inline-block")),n.overflow&&(f.overflow="hidden",nt.shrinkWrapBlocks()||c.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]}));for(i in t)if(a=t[i],gn.exec(a)){if(delete t[i],o=o||"toggle"===a,a===(p?"hide":"show")){if("show"!==a||!m||void 0===m[i])continue;p=!0}h[i]=m&&m[i]||at.style(e,i)}else u=void 0;if(at.isEmptyObject(h))"inline"===("none"===u?T(e.nodeName):u)&&(f.display=u);else{m?"hidden"in m&&(p=m.hidden):m=at._data(e,"fxshow",{}),o&&(m.hidden=!p),p?at(e).show():c.done(function(){at(e).hide()}),c.done(function(){var t;at._removeData(e,"fxshow");for(t in h)at.style(e,t,h[t])});for(i in h)r=I(p?m[i]:0,i,c),i in m||(m[i]=r.start,p&&(r.end=r.start,r.start="width"===i||"height"===i?1:0))}}function L(e,t){var n,i,a,o,r;for(n in e)if(i=at.camelCase(n),a=t[i],o=e[n],at.isArray(o)&&(a=o[1],o=e[n]=o[0]),n!==i&&(e[i]=o,delete e[n]),r=at.cssHooks[i],r&&"expand"in r){o=r.expand(o),delete e[i];for(n in o)n in e||(e[n]=o[n],t[n]=a)}else t[i]=a}function A(e,t,n){var i,a,o=0,r=bn.length,s=at.Deferred().always(function(){delete l.elem}),l=function(){if(a)return!1;for(var t=pn||O(),n=Math.max(0,u.startTime+u.duration-t),i=n/u.duration||0,o=1-i,r=0,l=u.tweens.length;l>r;r++)u.tweens[r].run(o);return s.notifyWith(e,[u,o,n]),1>o&&l?n:(s.resolveWith(e,[u]),!1)},u=s.promise({elem:e,props:at.extend({},t),opts:at.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:pn||O(),duration:n.duration,tweens:[],createTween:function(t,n){var i=at.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(i),i},stop:function(t){var n=0,i=t?u.tweens.length:0;if(a)return this;for(a=!0;i>n;n++)u.tweens[n].run(1);return t?s.resolveWith(e,[u,t]):s.rejectWith(e,[u,t]),this}}),d=u.props;for(L(d,u.opts.specialEasing);r>o;o++)if(i=bn[o].call(u,e,d,u.opts))return i;return at.map(d,I,u),at.isFunction(u.opts.start)&&u.opts.start.call(e,u),at.fx.timer(at.extend(l,{elem:e,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function R(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,a=0,o=t.toLowerCase().match(bt)||[];if(at.isFunction(n))for(;i=o[a++];)"+"===i.charAt(0)?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function V(e,t,n,i){function a(s){var l;return o[s]=!0,at.each(e[s]||[],function(e,s){var u=s(t,n,i);return"string"!=typeof u||r||o[u]?r?!(l=u):void 0:(t.dataTypes.unshift(u),a(u),!1)}),l}var o={},r=e===Un;return a(t.dataTypes[0])||!o["*"]&&a("*")}function H(e,t){var n,i,a=at.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((a[i]?e:n||(n={}))[i]=t[i]);return n&&at.extend(!0,e,n),e}function B(e,t,n){for(var i,a,o,r,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===a&&(a=e.mimeType||t.getResponseHeader("Content-Type"));if(a)for(r in s)if(s[r]&&s[r].test(a)){l.unshift(r);break}if(l[0]in n)o=l[0];else{for(r in n){if(!l[0]||e.converters[r+" "+l[0]]){o=r;break}i||(i=r)}o=o||i}return o?(o!==l[0]&&l.unshift(o),n[o]):void 0}function z(e,t,n,i){var a,o,r,s,l,u={},d=e.dataTypes.slice();if(d[1])for(r in e.converters)u[r.toLowerCase()]=e.converters[r];for(o=d.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=d.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(r=u[l+" "+o]||u["* "+o],!r)for(a in u)if(s=a.split(" "),s[1]===o&&(r=u[l+" "+s[0]]||u["* "+s[0]])){r===!0?r=u[a]:u[a]!==!0&&(o=s[0],d.unshift(s[1]));break}if(r!==!0)if(r&&e["throws"])t=r(t);else try{t=r(t)}catch(c){return{state:"parsererror",error:r?c:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}function U(e,t,n,i){var a;if(at.isArray(t))at.each(t,function(t,a){n||Yn.test(e)?i(e,a):U(e+"["+("object"==typeof a?t:"")+"]",a,n,i)});else if(n||"object"!==at.type(t))i(e,t);else for(a in t)U(e+"["+a+"]",t[a],n,i)}function q(){try{return new e.XMLHttpRequest}catch(t){}}function W(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function J(e){return at.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var Y=[],G=Y.slice,Q=Y.concat,X=Y.push,K=Y.indexOf,Z={},et=Z.toString,tt=Z.hasOwnProperty,nt={},it="1.11.1",at=function(e,t){return new at.fn.init(e,t)},ot=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,rt=/^-ms-/,st=/-([\da-z])/gi,lt=function(e,t){return t.toUpperCase()};at.fn=at.prototype={jquery:it,constructor:at,selector:"",length:0,toArray:function(){return G.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:G.call(this)},pushStack:function(e){var t=at.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return at.each(this,e,t)},map:function(e){return this.pushStack(at.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(G.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:X,sort:Y.sort,splice:Y.splice},at.extend=at.fn.extend=function(){var e,t,n,i,a,o,r=arguments[0]||{},s=1,l=arguments.length,u=!1;for("boolean"==typeof r&&(u=r,r=arguments[s]||{},s++),"object"==typeof r||at.isFunction(r)||(r={}),s===l&&(r=this,s--);l>s;s++)if(null!=(a=arguments[s]))for(i in a)e=r[i],n=a[i],r!==n&&(u&&n&&(at.isPlainObject(n)||(t=at.isArray(n)))?(t?(t=!1,o=e&&at.isArray(e)?e:[]):o=e&&at.isPlainObject(e)?e:{},r[i]=at.extend(u,o,n)):void 0!==n&&(r[i]=n));return r},at.extend({expando:"jQuery"+(it+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw Error(e)},noop:function(){},isFunction:function(e){return"function"===at.type(e)},isArray:Array.isArray||function(e){return"array"===at.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!at.isArray(e)&&e-parseFloat(e)>=0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isPlainObject:function(e){var t;if(!e||"object"!==at.type(e)||e.nodeType||at.isWindow(e))return!1;try{if(e.constructor&&!tt.call(e,"constructor")&&!tt.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}if(nt.ownLast)for(t in e)return tt.call(e,t);for(t in e);return void 0===t||tt.call(e,t)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?Z[et.call(e)]||"object":typeof e},globalEval:function(t){t&&at.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(rt,"ms-").replace(st,lt)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,i){var a,o=0,r=e.length,s=n(e);if(i){if(s)for(;r>o&&(a=t.apply(e[o],i),a!==!1);o++);else for(o in e)if(a=t.apply(e[o],i),a===!1)break}else if(s)for(;r>o&&(a=t.call(e[o],o,e[o]),a!==!1);o++);else for(o in e)if(a=t.call(e[o],o,e[o]),a===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(ot,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(n(Object(e))?at.merge(i,"string"==typeof e?[e]:e):X.call(i,e)),i},inArray:function(e,t,n){var i;if(t){if(K)return K.call(t,e,n);for(i=t.length,n=n?0>n?Math.max(0,i+n):n:0;i>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,t){for(var n=+t.length,i=0,a=e.length;n>i;)e[a++]=t[i++];if(n!==n)for(;void 0!==t[i];)e[a++]=t[i++];return e.length=a,e},grep:function(e,t,n){for(var i,a=[],o=0,r=e.length,s=!n;r>o;o++)i=!t(e[o],o),i!==s&&a.push(e[o]);return a},map:function(e,t,i){var a,o=0,r=e.length,s=n(e),l=[];if(s)for(;r>o;o++)a=t(e[o],o,i),null!=a&&l.push(a);else for(o in e)a=t(e[o],o,i),null!=a&&l.push(a);return Q.apply([],l)},guid:1,proxy:function(e,t){var n,i,a;return"string"==typeof t&&(a=e[t],t=e,e=a),at.isFunction(e)?(n=G.call(arguments,2),i=function(){return e.apply(t||this,n.concat(G.call(arguments)))},i.guid=e.guid=e.guid||at.guid++,i):void 0},now:function(){return+new Date},support:nt}),at.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){Z["[object "+t+"]"]=t.toLowerCase()});var ut=function(e){function t(e,t,n,i){var a,o,r,s,l,u,c,f,p,m;if((t?t.ownerDocument||t:V)!==N&&E(t),t=t||N,n=n||[],!e||"string"!=typeof e)return n;if(1!==(s=t.nodeType)&&9!==s)return[];if($&&!i){if(a=yt.exec(e))if(r=a[1]){if(9===s){if(o=t.getElementById(r),!o||!o.parentNode)return n;if(o.id===r)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(r))&&A(t,o)&&o.id===r)return n.push(o),n}else{if(a[2])return Z.apply(n,t.getElementsByTagName(e)),n;if((r=a[3])&&k.getElementsByClassName&&t.getElementsByClassName)return Z.apply(n,t.getElementsByClassName(r)),n}if(k.qsa&&(!I||!I.test(e))){if(f=c=R,p=t,m=9===s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){for(u=T(e),(c=t.getAttribute("id"))?f=c.replace(wt,"\\$&"):t.setAttribute("id",f),f="[id='"+f+"'] ",l=u.length;l--;)u[l]=f+h(u[l]);p=bt.test(e)&&d(t.parentNode)||t,m=u.join(",")}if(m)try{return Z.apply(n,p.querySelectorAll(m)),n}catch(g){}finally{c||t.removeAttribute("id")}}}return P(e.replace(lt,"$1"),t,n,i)}function n(){function e(n,i){return t.push(n+" ")>D.cacheLength&&delete e[t.shift()],e[n+" "]=i}var t=[];return e}function i(e){return e[R]=!0,e}function a(e){var t=N.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var n=e.split("|"),i=e.length;i--;)D.attrHandle[n[i]]=t}function r(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||Y)-(~e.sourceIndex||Y);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function s(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function l(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function u(e){return i(function(t){return t=+t,i(function(n,i){for(var a,o=e([],n.length,t),r=o.length;r--;)n[a=o[r]]&&(n[a]=!(i[a]=n[a]))})})}function d(e){return e&&typeof e.getElementsByTagName!==J&&e}function c(){}function h(e){for(var t=0,n=e.length,i="";n>t;t++)i+=e[t].value;return i}function f(e,t,n){var i=t.dir,a=n&&"parentNode"===i,o=B++;return t.first?function(t,n,o){for(;t=t[i];)if(1===t.nodeType||a)return e(t,n,o)}:function(t,n,r){var s,l,u=[H,o];if(r){for(;t=t[i];)if((1===t.nodeType||a)&&e(t,n,r))return!0}else for(;t=t[i];)if(1===t.nodeType||a){if(l=t[R]||(t[R]={}),(s=l[i])&&s[0]===H&&s[1]===o)return u[2]=s[2];if(l[i]=u,u[2]=e(t,n,r))return!0}}}function p(e){return e.length>1?function(t,n,i){for(var a=e.length;a--;)if(!e[a](t,n,i))return!1;return!0}:e[0]}function m(e,n,i){for(var a=0,o=n.length;o>a;a++)t(e,n[a],i);return i}function g(e,t,n,i,a){for(var o,r=[],s=0,l=e.length,u=null!=t;l>s;s++)(o=e[s])&&(!n||n(o,i,a))&&(r.push(o),u&&t.push(s));return r}function v(e,t,n,a,o,r){return a&&!a[R]&&(a=v(a)),o&&!o[R]&&(o=v(o,r)),i(function(i,r,s,l){var u,d,c,h=[],f=[],p=r.length,v=i||m(t||"*",s.nodeType?[s]:s,[]),y=!e||!i&&t?v:g(v,h,e,s,l),b=n?o||(i?e:p||a)?[]:r:y;if(n&&n(y,b,s,l),a)for(u=g(b,f),a(u,[],s,l),d=u.length;d--;)(c=u[d])&&(b[f[d]]=!(y[f[d]]=c));if(i){if(o||e){if(o){for(u=[],d=b.length;d--;)(c=b[d])&&u.push(y[d]=c);o(null,b=[],u,l)}for(d=b.length;d--;)(c=b[d])&&(u=o?tt.call(i,c):h[d])>-1&&(i[u]=!(r[u]=c))}}else b=g(b===r?b.splice(p,b.length):b),o?o(null,r,b,l):Z.apply(r,b)})}function y(e){for(var t,n,i,a=e.length,o=D.relative[e[0].type],r=o||D.relative[" "],s=o?1:0,l=f(function(e){return e===t},r,!0),u=f(function(e){return tt.call(t,e)>-1},r,!0),d=[function(e,n,i){return!o&&(i||n!==F)||((t=n).nodeType?l(e,n,i):u(e,n,i))}];a>s;s++)if(n=D.relative[e[s].type])d=[f(p(d),n)];else{if(n=D.filter[e[s].type].apply(null,e[s].matches),n[R]){for(i=++s;a>i&&!D.relative[e[i].type];i++);return v(s>1&&p(d),s>1&&h(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(lt,"$1"),n,i>s&&y(e.slice(s,i)),a>i&&y(e=e.slice(i)),a>i&&h(e))}d.push(n)}return p(d)}function b(e,n){var a=n.length>0,o=e.length>0,r=function(i,r,s,l,u){var d,c,h,f=0,p="0",m=i&&[],v=[],y=F,b=i||o&&D.find.TAG("*",u),w=H+=null==y?1:Math.random()||.1,k=b.length;for(u&&(F=r!==N&&r);p!==k&&null!=(d=b[p]);p++){if(o&&d){for(c=0;h=e[c++];)if(h(d,r,s)){l.push(d);break}u&&(H=w)}a&&((d=!h&&d)&&f--,i&&m.push(d))}if(f+=p,a&&p!==f){for(c=0;h=n[c++];)h(m,v,r,s);if(i){if(f>0)for(;p--;)m[p]||v[p]||(v[p]=X.call(l));v=g(v)}Z.apply(l,v),u&&!i&&v.length>0&&f+n.length>1&&t.uniqueSort(l)}return u&&(H=w,F=y),m};return a?i(r):r}var w,k,D,x,C,T,M,P,F,_,S,E,N,O,$,I,j,L,A,R="sizzle"+-new Date,V=e.document,H=0,B=0,z=n(),U=n(),q=n(),W=function(e,t){return e===t&&(S=!0),0},J="undefined",Y=1<<31,G={}.hasOwnProperty,Q=[],X=Q.pop,K=Q.push,Z=Q.push,et=Q.slice,tt=Q.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},nt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",it="[\\x20\\t\\r\\n\\f]",at="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ot=at.replace("w","w#"),rt="\\["+it+"*("+at+")(?:"+it+"*([*^$|!~]?=)"+it+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ot+"))|)"+it+"*\\]",st=":("+at+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+rt+")*)|.*)\\)|)",lt=RegExp("^"+it+"+|((?:^|[^\\\\])(?:\\\\.)*)"+it+"+$","g"),ut=RegExp("^"+it+"*,"+it+"*"),dt=RegExp("^"+it+"*([>+~]|"+it+")"+it+"*"),ct=RegExp("="+it+"*([^\\]'\"]*?)"+it+"*\\]","g"),ht=RegExp(st),ft=RegExp("^"+ot+"$"),pt={ID:RegExp("^#("+at+")"),CLASS:RegExp("^\\.("+at+")"),TAG:RegExp("^("+at.replace("w","w*")+")"),ATTR:RegExp("^"+rt),PSEUDO:RegExp("^"+st),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+it+"*(even|odd|(([+-]|)(\\d*)n|)"+it+"*(?:([+-]|)"+it+"*(\\d+)|))"+it+"*\\)|)","i"),bool:RegExp("^(?:"+nt+")$","i"),needsContext:RegExp("^"+it+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+it+"*((?:-\\d)?\\d*)"+it+"*\\)|)(?=[^-]|$)","i")},mt=/^(?:input|select|textarea|button)$/i,gt=/^h\d$/i,vt=/^[^{]+\{\s*\[native \w/,yt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,bt=/[+~]/,wt=/'|\\/g,kt=RegExp("\\\\([\\da-f]{1,6}"+it+"?|("+it+")|.)","ig"),Dt=function(e,t,n){var i="0x"+t-65536;return i!==i||n?t:0>i?String.fromCharCode(i+65536):String.fromCharCode(55296|i>>10,56320|1023&i)};try{Z.apply(Q=et.call(V.childNodes),V.childNodes),Q[V.childNodes.length].nodeType}catch(xt){Z={apply:Q.length?function(e,t){K.apply(e,et.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}k=t.support={},C=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},E=t.setDocument=function(e){var t,n=e?e.ownerDocument||e:V,i=n.defaultView;return n!==N&&9===n.nodeType&&n.documentElement?(N=n,O=n.documentElement,$=!C(n),i&&i!==i.top&&(i.addEventListener?i.addEventListener("unload",function(){E()},!1):i.attachEvent&&i.attachEvent("onunload",function(){E()})),k.attributes=a(function(e){return e.className="i",!e.getAttribute("className")}),k.getElementsByTagName=a(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),k.getElementsByClassName=vt.test(n.getElementsByClassName)&&a(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),k.getById=a(function(e){return O.appendChild(e).id=R,!n.getElementsByName||!n.getElementsByName(R).length}),k.getById?(D.find.ID=function(e,t){if(typeof t.getElementById!==J&&$){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},D.filter.ID=function(e){var t=e.replace(kt,Dt);return function(e){return e.getAttribute("id")===t}}):(delete D.find.ID,D.filter.ID=function(e){var t=e.replace(kt,Dt);return function(e){var n=typeof e.getAttributeNode!==J&&e.getAttributeNode("id");return n&&n.value===t}}),D.find.TAG=k.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==J?t.getElementsByTagName(e):void 0}:function(e,t){var n,i=[],a=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[a++];)1===n.nodeType&&i.push(n);return i}return o},D.find.CLASS=k.getElementsByClassName&&function(e,t){return typeof t.getElementsByClassName!==J&&$?t.getElementsByClassName(e):void 0},j=[],I=[],(k.qsa=vt.test(n.querySelectorAll))&&(a(function(e){e.innerHTML="<select msallowclip=''><option selected=''></option></select>",e.querySelectorAll("[msallowclip^='']").length&&I.push("[*^$]="+it+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||I.push("\\["+it+"*(?:value|"+nt+")"),e.querySelectorAll(":checked").length||I.push(":checked")}),a(function(e){var t=n.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&I.push("name"+it+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||I.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),I.push(",.*:")})),(k.matchesSelector=vt.test(L=O.matches||O.webkitMatchesSelector||O.mozMatchesSelector||O.oMatchesSelector||O.msMatchesSelector))&&a(function(e){k.disconnectedMatch=L.call(e,"div"),L.call(e,"[s!='']:x"),j.push("!=",st)}),I=I.length&&RegExp(I.join("|")),j=j.length&&RegExp(j.join("|")),t=vt.test(O.compareDocumentPosition),A=t||vt.test(O.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},W=t?function(e,t){if(e===t)return S=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i?i:(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&i||!k.sortDetached&&t.compareDocumentPosition(e)===i?e===n||e.ownerDocument===V&&A(V,e)?-1:t===n||t.ownerDocument===V&&A(V,t)?1:_?tt.call(_,e)-tt.call(_,t):0:4&i?-1:1)}:function(e,t){if(e===t)return S=!0,0;var i,a=0,o=e.parentNode,s=t.parentNode,l=[e],u=[t];if(!o||!s)return e===n?-1:t===n?1:o?-1:s?1:_?tt.call(_,e)-tt.call(_,t):0;if(o===s)return r(e,t);for(i=e;i=i.parentNode;)l.unshift(i);for(i=t;i=i.parentNode;)u.unshift(i);for(;l[a]===u[a];)a++;return a?r(l[a],u[a]):l[a]===V?-1:u[a]===V?1:0},n):N},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==N&&E(e),n=n.replace(ct,"='$1']"),!(!k.matchesSelector||!$||j&&j.test(n)||I&&I.test(n)))try{var i=L.call(e,n);if(i||k.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(a){}return t(n,N,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==N&&E(e),A(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==N&&E(e);var n=D.attrHandle[t.toLowerCase()],i=n&&G.call(D.attrHandle,t.toLowerCase())?n(e,t,!$):void 0;return void 0!==i?i:k.attributes||!$?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},t.error=function(e){throw Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],i=0,a=0;if(S=!k.detectDuplicates,_=!k.sortStable&&e.slice(0),e.sort(W),S){for(;t=e[a++];)t===e[a]&&(i=n.push(a));for(;i--;)e.splice(n[i],1)}return _=null,e},x=t.getText=function(e){var t,n="",i=0,a=e.nodeType;if(a){if(1===a||9===a||11===a){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=x(e)}else if(3===a||4===a)return e.nodeValue}else for(;t=e[i++];)n+=x(t);return n},D=t.selectors={cacheLength:50,createPseudo:i,match:pt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(kt,Dt),e[3]=(e[3]||e[4]||e[5]||"").replace(kt,Dt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return pt.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&ht.test(n)&&(t=T(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(kt,Dt).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=z[e+" "];return t||(t=RegExp("(^|"+it+")"+e+"("+it+"|$)"))&&z(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==J&&e.getAttribute("class")||"")})},ATTR:function(e,n,i){return function(a){var o=t.attr(a,e);return null==o?"!="===n:n?(o+="","="===n?o===i:"!="===n?o!==i:"^="===n?i&&0===o.indexOf(i):"*="===n?i&&o.indexOf(i)>-1:"$="===n?i&&o.slice(-i.length)===i:"~="===n?(" "+o+" ").indexOf(i)>-1:"|="===n?o===i||o.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(e,t,n,i,a){var o="nth"!==e.slice(0,3),r="last"!==e.slice(-4),s="of-type"===t;return 1===i&&0===a?function(e){return!!e.parentNode}:function(t,n,l){var u,d,c,h,f,p,m=o!==r?"nextSibling":"previousSibling",g=t.parentNode,v=s&&t.nodeName.toLowerCase(),y=!l&&!s;if(g){if(o){for(;m;){for(c=t;c=c[m];)if(s?c.nodeName.toLowerCase()===v:1===c.nodeType)return!1;p=m="only"===e&&!p&&"nextSibling"}return!0}if(p=[r?g.firstChild:g.lastChild],r&&y){for(d=g[R]||(g[R]={}),u=d[e]||[],f=u[0]===H&&u[1],h=u[0]===H&&u[2],c=f&&g.childNodes[f];c=++f&&c&&c[m]||(h=f=0)||p.pop();)if(1===c.nodeType&&++h&&c===t){d[e]=[H,f,h];break}}else if(y&&(u=(t[R]||(t[R]={}))[e])&&u[0]===H)h=u[1];else for(;(c=++f&&c&&c[m]||(h=f=0)||p.pop())&&((s?c.nodeName.toLowerCase()!==v:1!==c.nodeType)||!++h||(y&&((c[R]||(c[R]={}))[e]=[H,h]),c!==t)););return h-=a,h===i||0===h%i&&h/i>=0}}},PSEUDO:function(e,n){var a,o=D.pseudos[e]||D.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[R]?o(n):o.length>1?(a=[e,e,"",n],D.setFilters.hasOwnProperty(e.toLowerCase())?i(function(e,t){for(var i,a=o(e,n),r=a.length;r--;)i=tt.call(e,a[r]),e[i]=!(t[i]=a[r])}):function(e){return o(e,0,a)}):o}},pseudos:{not:i(function(e){var t=[],n=[],a=M(e.replace(lt,"$1"));return a[R]?i(function(e,t,n,i){for(var o,r=a(e,null,i,[]),s=e.length;s--;)(o=r[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,a(t,null,o,n),!n.pop()}}),has:i(function(e){return function(n){return t(e,n).length>0}}),contains:i(function(e){return function(t){return(t.textContent||t.innerText||x(t)).indexOf(e)>-1}}),lang:i(function(e){return ft.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(kt,Dt).toLowerCase(),function(t){var n;do if(n=$?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===O},focus:function(e){return e===N.activeElement&&(!N.hasFocus||N.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(6>e.nodeType)return!1;return!0},parent:function(e){return!D.pseudos.empty(e)},header:function(e){return gt.test(e.nodeName)},input:function(e){return mt.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:u(function(){return[0]}),last:u(function(e,t){return[t-1]}),eq:u(function(e,t,n){return[0>n?n+t:n]}),even:u(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:u(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:u(function(e,t,n){for(var i=0>n?n+t:n;--i>=0;)e.push(i);return e}),gt:u(function(e,t,n){for(var i=0>n?n+t:n;t>++i;)e.push(i);return e})}},D.pseudos.nth=D.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})D.pseudos[w]=s(w);for(w in{submit:!0,reset:!0})D.pseudos[w]=l(w);return c.prototype=D.filters=D.pseudos,D.setFilters=new c,T=t.tokenize=function(e,n){var i,a,o,r,s,l,u,d=U[e+" "];if(d)return n?0:d.slice(0);for(s=e,l=[],u=D.preFilter;s;){(!i||(a=ut.exec(s)))&&(a&&(s=s.slice(a[0].length)||s),l.push(o=[])),i=!1,(a=dt.exec(s))&&(i=a.shift(),o.push({value:i,type:a[0].replace(lt," ")}),s=s.slice(i.length));for(r in D.filter)!(a=pt[r].exec(s))||u[r]&&!(a=u[r](a))||(i=a.shift(),o.push({value:i,type:r,matches:a}),s=s.slice(i.length));if(!i)break}return n?s.length:s?t.error(e):U(e,l).slice(0)
},M=t.compile=function(e,t){var n,i=[],a=[],o=q[e+" "];if(!o){for(t||(t=T(e)),n=t.length;n--;)o=y(t[n]),o[R]?i.push(o):a.push(o);o=q(e,b(a,i)),o.selector=e}return o},P=t.select=function(e,t,n,i){var a,o,r,s,l,u="function"==typeof e&&e,c=!i&&T(e=u.selector||e);if(n=n||[],1===c.length){if(o=c[0]=c[0].slice(0),o.length>2&&"ID"===(r=o[0]).type&&k.getById&&9===t.nodeType&&$&&D.relative[o[1].type]){if(t=(D.find.ID(r.matches[0].replace(kt,Dt),t)||[])[0],!t)return n;u&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(a=pt.needsContext.test(e)?0:o.length;a--&&(r=o[a],!D.relative[s=r.type]);)if((l=D.find[s])&&(i=l(r.matches[0].replace(kt,Dt),bt.test(o[0].type)&&d(t.parentNode)||t))){if(o.splice(a,1),e=i.length&&h(o),!e)return Z.apply(n,i),n;break}}return(u||M(e,c))(i,t,!$,n,bt.test(e)&&d(t.parentNode)||t),n},k.sortStable=R.split("").sort(W).join("")===R,k.detectDuplicates=!!S,E(),k.sortDetached=a(function(e){return 1&e.compareDocumentPosition(N.createElement("div"))}),a(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),k.attributes&&a(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),a(function(e){return null==e.getAttribute("disabled")})||o(nt,function(e,t,n){var i;return n?void 0:e[t]===!0?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),t}(e);at.find=ut,at.expr=ut.selectors,at.expr[":"]=at.expr.pseudos,at.unique=ut.uniqueSort,at.text=ut.getText,at.isXMLDoc=ut.isXML,at.contains=ut.contains;var dt=at.expr.match.needsContext,ct=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ht=/^.[^:#\[\.,]*$/;at.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?at.find.matchesSelector(i,e)?[i]:[]:at.find.matches(e,at.grep(t,function(e){return 1===e.nodeType}))},at.fn.extend({find:function(e){var t,n=[],i=this,a=i.length;if("string"!=typeof e)return this.pushStack(at(e).filter(function(){for(t=0;a>t;t++)if(at.contains(i[t],this))return!0}));for(t=0;a>t;t++)at.find(e,i[t],n);return n=this.pushStack(a>1?at.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(i(this,e||[],!1))},not:function(e){return this.pushStack(i(this,e||[],!0))},is:function(e){return!!i(this,"string"==typeof e&&dt.test(e)?at(e):e||[],!1).length}});var ft,pt=e.document,mt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,gt=at.fn.init=function(e,t){var n,i;if(!e)return this;if("string"==typeof e){if(n="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:mt.exec(e),!n||!n[1]&&t)return!t||t.jquery?(t||ft).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof at?t[0]:t,at.merge(this,at.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:pt,!0)),ct.test(n[1])&&at.isPlainObject(t))for(n in t)at.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}if(i=pt.getElementById(n[2]),i&&i.parentNode){if(i.id!==n[2])return ft.find(e);this.length=1,this[0]=i}return this.context=pt,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):at.isFunction(e)?ft.ready!==void 0?ft.ready(e):e(at):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),at.makeArray(e,this))};gt.prototype=at.fn,ft=at(pt);var vt=/^(?:parents|prev(?:Until|All))/,yt={children:!0,contents:!0,next:!0,prev:!0};at.extend({dir:function(e,t,n){for(var i=[],a=e[t];a&&9!==a.nodeType&&(void 0===n||1!==a.nodeType||!at(a).is(n));)1===a.nodeType&&i.push(a),a=a[t];return i},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),at.fn.extend({has:function(e){var t,n=at(e,this),i=n.length;return this.filter(function(){for(t=0;i>t;t++)if(at.contains(this,n[t]))return!0})},closest:function(e,t){for(var n,i=0,a=this.length,o=[],r=dt.test(e)||"string"!=typeof e?at(e,t||this.context):0;a>i;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(11>n.nodeType&&(r?r.index(n)>-1:1===n.nodeType&&at.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?at.unique(o):o)},index:function(e){return e?"string"==typeof e?at.inArray(this[0],at(e)):at.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(at.unique(at.merge(this.get(),at(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),at.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return at.dir(e,"parentNode")},parentsUntil:function(e,t,n){return at.dir(e,"parentNode",n)},next:function(e){return a(e,"nextSibling")},prev:function(e){return a(e,"previousSibling")},nextAll:function(e){return at.dir(e,"nextSibling")},prevAll:function(e){return at.dir(e,"previousSibling")},nextUntil:function(e,t,n){return at.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return at.dir(e,"previousSibling",n)},siblings:function(e){return at.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return at.sibling(e.firstChild)},contents:function(e){return at.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:at.merge([],e.childNodes)}},function(e,t){at.fn[e]=function(n,i){var a=at.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(a=at.filter(i,a)),this.length>1&&(yt[e]||(a=at.unique(a)),vt.test(e)&&(a=a.reverse())),this.pushStack(a)}});var bt=/\S+/g,wt={};at.Callbacks=function(e){e="string"==typeof e?wt[e]||o(e):at.extend({},e);var t,n,i,a,r,s,l=[],u=!e.once&&[],d=function(o){for(n=e.memory&&o,i=!0,r=s||0,s=0,a=l.length,t=!0;l&&a>r;r++)if(l[r].apply(o[0],o[1])===!1&&e.stopOnFalse){n=!1;break}t=!1,l&&(u?u.length&&d(u.shift()):n?l=[]:c.disable())},c={add:function(){if(l){var i=l.length;!function o(t){at.each(t,function(t,n){var i=at.type(n);"function"===i?e.unique&&c.has(n)||l.push(n):n&&n.length&&"string"!==i&&o(n)})}(arguments),t?a=l.length:n&&(s=i,d(n))}return this},remove:function(){return l&&at.each(arguments,function(e,n){for(var i;(i=at.inArray(n,l,i))>-1;)l.splice(i,1),t&&(a>=i&&a--,r>=i&&r--)}),this},has:function(e){return e?at.inArray(e,l)>-1:!(!l||!l.length)},empty:function(){return l=[],a=0,this},disable:function(){return l=u=n=void 0,this},disabled:function(){return!l},lock:function(){return u=void 0,n||c.disable(),this},locked:function(){return!u},fireWith:function(e,n){return!l||i&&!u||(n=n||[],n=[e,n.slice?n.slice():n],t?u.push(n):d(n)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},at.extend({Deferred:function(e){var t=[["resolve","done",at.Callbacks("once memory"),"resolved"],["reject","fail",at.Callbacks("once memory"),"rejected"],["notify","progress",at.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return a.done(arguments).fail(arguments),this},then:function(){var e=arguments;return at.Deferred(function(n){at.each(t,function(t,o){var r=at.isFunction(e[t])&&e[t];a[o[1]](function(){var e=r&&r.apply(this,arguments);e&&at.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o[0]+"With"](this===i?n.promise():this,r?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?at.extend(e,i):i}},a={};return i.pipe=i.then,at.each(t,function(e,o){var r=o[2],s=o[3];i[o[1]]=r.add,s&&r.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),a[o[0]]=function(){return a[o[0]+"With"](this===a?i:this,arguments),this},a[o[0]+"With"]=r.fireWith}),i.promise(a),e&&e.call(a,a),a},when:function(e){var t,n,i,a=0,o=G.call(arguments),r=o.length,s=1!==r||e&&at.isFunction(e.promise)?r:0,l=1===s?e:at.Deferred(),u=function(e,n,i){return function(a){n[e]=this,i[e]=arguments.length>1?G.call(arguments):a,i===t?l.notifyWith(n,i):--s||l.resolveWith(n,i)}};if(r>1)for(t=Array(r),n=Array(r),i=Array(r);r>a;a++)o[a]&&at.isFunction(o[a].promise)?o[a].promise().done(u(a,i,o)).fail(l.reject).progress(u(a,n,t)):--s;return s||l.resolveWith(i,o),l.promise()}});var kt;at.fn.ready=function(e){return at.ready.promise().done(e),this},at.extend({isReady:!1,readyWait:1,holdReady:function(e){e?at.readyWait++:at.ready(!0)},ready:function(e){if(e===!0?!--at.readyWait:!at.isReady){if(!pt.body)return setTimeout(at.ready);at.isReady=!0,e!==!0&&--at.readyWait>0||(kt.resolveWith(pt,[at]),at.fn.triggerHandler&&(at(pt).triggerHandler("ready"),at(pt).off("ready")))}}}),at.ready.promise=function(t){if(!kt)if(kt=at.Deferred(),"complete"===pt.readyState)setTimeout(at.ready);else if(pt.addEventListener)pt.addEventListener("DOMContentLoaded",s,!1),e.addEventListener("load",s,!1);else{pt.attachEvent("onreadystatechange",s),e.attachEvent("onload",s);var n=!1;try{n=null==e.frameElement&&pt.documentElement}catch(i){}n&&n.doScroll&&!function a(){if(!at.isReady){try{n.doScroll("left")}catch(e){return setTimeout(a,50)}r(),at.ready()}}()}return kt.promise(t)};var Dt,xt="undefined";for(Dt in at(nt))break;nt.ownLast="0"!==Dt,nt.inlineBlockNeedsLayout=!1,at(function(){var e,t,n,i;n=pt.getElementsByTagName("body")[0],n&&n.style&&(t=pt.createElement("div"),i=pt.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(t),typeof t.style.zoom!==xt&&(t.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",nt.inlineBlockNeedsLayout=e=3===t.offsetWidth,e&&(n.style.zoom=1)),n.removeChild(i))}),function(){var e=pt.createElement("div");if(null==nt.deleteExpando){nt.deleteExpando=!0;try{delete e.test}catch(t){nt.deleteExpando=!1}}e=null}(),at.acceptData=function(e){var t=at.noData[(e.nodeName+" ").toLowerCase()],n=+e.nodeType||1;return 1!==n&&9!==n?!1:!t||t!==!0&&e.getAttribute("classid")===t};var Ct=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Tt=/([A-Z])/g;at.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return e=e.nodeType?at.cache[e[at.expando]]:e[at.expando],!!e&&!u(e)},data:function(e,t,n){return d(e,t,n)},removeData:function(e,t){return c(e,t)},_data:function(e,t,n){return d(e,t,n,!0)},_removeData:function(e,t){return c(e,t,!0)}}),at.fn.extend({data:function(e,t){var n,i,a,o=this[0],r=o&&o.attributes;if(void 0===e){if(this.length&&(a=at.data(o),1===o.nodeType&&!at._data(o,"parsedAttrs"))){for(n=r.length;n--;)r[n]&&(i=r[n].name,0===i.indexOf("data-")&&(i=at.camelCase(i.slice(5)),l(o,i,a[i])));at._data(o,"parsedAttrs",!0)}return a}return"object"==typeof e?this.each(function(){at.data(this,e)}):arguments.length>1?this.each(function(){at.data(this,e,t)}):o?l(o,e,at.data(o,e)):void 0},removeData:function(e){return this.each(function(){at.removeData(this,e)})}}),at.extend({queue:function(e,t,n){var i;return e?(t=(t||"fx")+"queue",i=at._data(e,t),n&&(!i||at.isArray(n)?i=at._data(e,t,at.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=at.queue(e,t),i=n.length,a=n.shift(),o=at._queueHooks(e,t),r=function(){at.dequeue(e,t)};"inprogress"===a&&(a=n.shift(),i--),a&&("fx"===t&&n.unshift("inprogress"),delete o.stop,a.call(e,r,o)),!i&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return at._data(e,n)||at._data(e,n,{empty:at.Callbacks("once memory").add(function(){at._removeData(e,t+"queue"),at._removeData(e,n)})})}}),at.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),n>arguments.length?at.queue(this[0],e):void 0===t?this:this.each(function(){var n=at.queue(this,e,t);at._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&at.dequeue(this,e)})},dequeue:function(e){return this.each(function(){at.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,a=at.Deferred(),o=this,r=this.length,s=function(){--i||a.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";r--;)n=at._data(o[r],e+"queueHooks"),n&&n.empty&&(i++,n.empty.add(s));return s(),a.promise(t)}});var Mt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Pt=["Top","Right","Bottom","Left"],Ft=function(e,t){return e=t||e,"none"===at.css(e,"display")||!at.contains(e.ownerDocument,e)},_t=at.access=function(e,t,n,i,a,o,r){var s=0,l=e.length,u=null==n;if("object"===at.type(n)){a=!0;for(s in n)at.access(e,t,s,n[s],!0,o,r)}else if(void 0!==i&&(a=!0,at.isFunction(i)||(r=!0),u&&(r?(t.call(e,i),t=null):(u=t,t=function(e,t,n){return u.call(at(e),n)})),t))for(;l>s;s++)t(e[s],n,r?i:i.call(e[s],s,t(e[s],n)));return a?e:u?t.call(e):l?t(e[0],n):o},St=/^(?:checkbox|radio)$/i;!function(){var e=pt.createElement("input"),t=pt.createElement("div"),n=pt.createDocumentFragment();if(t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",nt.leadingWhitespace=3===t.firstChild.nodeType,nt.tbody=!t.getElementsByTagName("tbody").length,nt.htmlSerialize=!!t.getElementsByTagName("link").length,nt.html5Clone="<:nav></:nav>"!==pt.createElement("nav").cloneNode(!0).outerHTML,e.type="checkbox",e.checked=!0,n.appendChild(e),nt.appendChecked=e.checked,t.innerHTML="<textarea>x</textarea>",nt.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue,n.appendChild(t),t.innerHTML="<input type='radio' checked='checked' name='t'/>",nt.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,nt.noCloneEvent=!0,t.attachEvent&&(t.attachEvent("onclick",function(){nt.noCloneEvent=!1}),t.cloneNode(!0).click()),null==nt.deleteExpando){nt.deleteExpando=!0;try{delete t.test}catch(i){nt.deleteExpando=!1}}}(),function(){var t,n,i=pt.createElement("div");for(t in{submit:!0,change:!0,focusin:!0})n="on"+t,(nt[t+"Bubbles"]=n in e)||(i.setAttribute(n,"t"),nt[t+"Bubbles"]=i.attributes[n].expando===!1);i=null}();var Et=/^(?:input|select|textarea)$/i,Nt=/^key/,Ot=/^(?:mouse|pointer|contextmenu)|click/,$t=/^(?:focusinfocus|focusoutblur)$/,It=/^([^.]*)(?:\.(.+)|)$/;at.event={global:{},add:function(e,t,n,i,a){var o,r,s,l,u,d,c,h,f,p,m,g=at._data(e);if(g){for(n.handler&&(l=n,n=l.handler,a=l.selector),n.guid||(n.guid=at.guid++),(r=g.events)||(r=g.events={}),(d=g.handle)||(d=g.handle=function(e){return typeof at===xt||e&&at.event.triggered===e.type?void 0:at.event.dispatch.apply(d.elem,arguments)},d.elem=e),t=(t||"").match(bt)||[""],s=t.length;s--;)o=It.exec(t[s])||[],f=m=o[1],p=(o[2]||"").split(".").sort(),f&&(u=at.event.special[f]||{},f=(a?u.delegateType:u.bindType)||f,u=at.event.special[f]||{},c=at.extend({type:f,origType:m,data:i,handler:n,guid:n.guid,selector:a,needsContext:a&&at.expr.match.needsContext.test(a),namespace:p.join(".")},l),(h=r[f])||(h=r[f]=[],h.delegateCount=0,u.setup&&u.setup.call(e,i,p,d)!==!1||(e.addEventListener?e.addEventListener(f,d,!1):e.attachEvent&&e.attachEvent("on"+f,d))),u.add&&(u.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),a?h.splice(h.delegateCount++,0,c):h.push(c),at.event.global[f]=!0);e=null}},remove:function(e,t,n,i,a){var o,r,s,l,u,d,c,h,f,p,m,g=at.hasData(e)&&at._data(e);if(g&&(d=g.events)){for(t=(t||"").match(bt)||[""],u=t.length;u--;)if(s=It.exec(t[u])||[],f=m=s[1],p=(s[2]||"").split(".").sort(),f){for(c=at.event.special[f]||{},f=(i?c.delegateType:c.bindType)||f,h=d[f]||[],s=s[2]&&RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=o=h.length;o--;)r=h[o],!a&&m!==r.origType||n&&n.guid!==r.guid||s&&!s.test(r.namespace)||i&&i!==r.selector&&("**"!==i||!r.selector)||(h.splice(o,1),r.selector&&h.delegateCount--,c.remove&&c.remove.call(e,r));l&&!h.length&&(c.teardown&&c.teardown.call(e,p,g.handle)!==!1||at.removeEvent(e,f,g.handle),delete d[f])}else for(f in d)at.event.remove(e,f+t[u],n,i,!0);at.isEmptyObject(d)&&(delete g.handle,at._removeData(e,"events"))}},trigger:function(t,n,i,a){var o,r,s,l,u,d,c,h=[i||pt],f=tt.call(t,"type")?t.type:t,p=tt.call(t,"namespace")?t.namespace.split("."):[];if(s=d=i=i||pt,3!==i.nodeType&&8!==i.nodeType&&!$t.test(f+at.event.triggered)&&(f.indexOf(".")>=0&&(p=f.split("."),f=p.shift(),p.sort()),r=0>f.indexOf(":")&&"on"+f,t=t[at.expando]?t:new at.Event(f,"object"==typeof t&&t),t.isTrigger=a?2:3,t.namespace=p.join("."),t.namespace_re=t.namespace?RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),n=null==n?[t]:at.makeArray(n,[t]),u=at.event.special[f]||{},a||!u.trigger||u.trigger.apply(i,n)!==!1)){if(!a&&!u.noBubble&&!at.isWindow(i)){for(l=u.delegateType||f,$t.test(l+f)||(s=s.parentNode);s;s=s.parentNode)h.push(s),d=s;d===(i.ownerDocument||pt)&&h.push(d.defaultView||d.parentWindow||e)}for(c=0;(s=h[c++])&&!t.isPropagationStopped();)t.type=c>1?l:u.bindType||f,o=(at._data(s,"events")||{})[t.type]&&at._data(s,"handle"),o&&o.apply(s,n),o=r&&s[r],o&&o.apply&&at.acceptData(s)&&(t.result=o.apply(s,n),t.result===!1&&t.preventDefault());if(t.type=f,!a&&!t.isDefaultPrevented()&&(!u._default||u._default.apply(h.pop(),n)===!1)&&at.acceptData(i)&&r&&i[f]&&!at.isWindow(i)){d=i[r],d&&(i[r]=null),at.event.triggered=f;try{i[f]()}catch(m){}at.event.triggered=void 0,d&&(i[r]=d)}return t.result}},dispatch:function(e){e=at.event.fix(e);var t,n,i,a,o,r=[],s=G.call(arguments),l=(at._data(this,"events")||{})[e.type]||[],u=at.event.special[e.type]||{};if(s[0]=e,e.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,e)!==!1){for(r=at.event.handlers.call(this,e,l),t=0;(a=r[t++])&&!e.isPropagationStopped();)for(e.currentTarget=a.elem,o=0;(i=a.handlers[o++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(i.namespace))&&(e.handleObj=i,e.data=i.data,n=((at.event.special[i.origType]||{}).handle||i.handler).apply(a.elem,s),void 0!==n&&(e.result=n)===!1&&(e.preventDefault(),e.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,i,a,o,r=[],s=t.delegateCount,l=e.target;if(s&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==e.type)){for(a=[],o=0;s>o;o++)i=t[o],n=i.selector+" ",void 0===a[n]&&(a[n]=i.needsContext?at(n,this).index(l)>=0:at.find(n,this,null,[l]).length),a[n]&&a.push(i);a.length&&r.push({elem:l,handlers:a})}return t.length>s&&r.push({elem:this,handlers:t.slice(s)}),r},fix:function(e){if(e[at.expando])return e;var t,n,i,a=e.type,o=e,r=this.fixHooks[a];for(r||(this.fixHooks[a]=r=Ot.test(a)?this.mouseHooks:Nt.test(a)?this.keyHooks:{}),i=r.props?this.props.concat(r.props):this.props,e=new at.Event(o),t=i.length;t--;)n=i[t],e[n]=o[n];return e.target||(e.target=o.srcElement||pt),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,r.filter?r.filter(e,o):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,i,a,o=t.button,r=t.fromElement;return null==e.pageX&&null!=t.clientX&&(i=e.target.ownerDocument||pt,a=i.documentElement,n=i.body,e.pageX=t.clientX+(a&&a.scrollLeft||n&&n.scrollLeft||0)-(a&&a.clientLeft||n&&n.clientLeft||0),e.pageY=t.clientY+(a&&a.scrollTop||n&&n.scrollTop||0)-(a&&a.clientTop||n&&n.clientTop||0)),!e.relatedTarget&&r&&(e.relatedTarget=r===e.target?t.toElement:r),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==p()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===p()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return at.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(e){return at.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,i){var a=at.extend(new at.Event,n,{type:e,isSimulated:!0,originalEvent:{}});i?at.event.trigger(a,null,t):at.event.dispatch.call(t,a),a.isDefaultPrevented()&&n.preventDefault()}},at.removeEvent=pt.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var i="on"+t;e.detachEvent&&(typeof e[i]===xt&&(e[i]=null),e.detachEvent(i,n))},at.Event=function(e,t){return this instanceof at.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?h:f):this.type=e,t&&at.extend(this,t),this.timeStamp=e&&e.timeStamp||at.now(),void(this[at.expando]=!0)):new at.Event(e,t)},at.Event.prototype={isDefaultPrevented:f,isPropagationStopped:f,isImmediatePropagationStopped:f,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=h,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=h,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=h,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},at.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){at.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,a=e.relatedTarget,o=e.handleObj;return(!a||a!==i&&!at.contains(i,a))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),nt.submitBubbles||(at.event.special.submit={setup:function(){return at.nodeName(this,"form")?!1:void at.event.add(this,"click._submit keypress._submit",function(e){var t=e.target,n=at.nodeName(t,"input")||at.nodeName(t,"button")?t.form:void 0;n&&!at._data(n,"submitBubbles")&&(at.event.add(n,"submit._submit",function(e){e._submit_bubble=!0}),at._data(n,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&at.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return at.nodeName(this,"form")?!1:void at.event.remove(this,"._submit")}}),nt.changeBubbles||(at.event.special.change={setup:function(){return Et.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(at.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),at.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),at.event.simulate("change",this,e,!0)})),!1):void at.event.add(this,"beforeactivate._change",function(e){var t=e.target;Et.test(t.nodeName)&&!at._data(t,"changeBubbles")&&(at.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||at.event.simulate("change",this.parentNode,e,!0)}),at._data(t,"changeBubbles",!0))})},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return at.event.remove(this,"._change"),!Et.test(this.nodeName)}}),nt.focusinBubbles||at.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){at.event.simulate(t,e.target,at.event.fix(e),!0)};at.event.special[t]={setup:function(){var i=this.ownerDocument||this,a=at._data(i,t);a||i.addEventListener(e,n,!0),at._data(i,t,(a||0)+1)},teardown:function(){var i=this.ownerDocument||this,a=at._data(i,t)-1;a?at._data(i,t,a):(i.removeEventListener(e,n,!0),at._removeData(i,t))}}}),at.fn.extend({on:function(e,t,n,i,a){var o,r;if("object"==typeof e){"string"!=typeof t&&(n=n||t,t=void 0);for(o in e)this.on(o,t,n,e[o],a);return this}if(null==n&&null==i?(i=t,n=t=void 0):null==i&&("string"==typeof t?(i=n,n=void 0):(i=n,n=t,t=void 0)),i===!1)i=f;else if(!i)return this;return 1===a&&(r=i,i=function(e){return at().off(e),r.apply(this,arguments)},i.guid=r.guid||(r.guid=at.guid++)),this.each(function(){at.event.add(this,e,i,n,t)})},one:function(e,t,n,i){return this.on(e,t,n,i,1)},off:function(e,t,n){var i,a;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,at(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(a in e)this.off(a,t,e[a]);return this}return(t===!1||"function"==typeof t)&&(n=t,t=void 0),n===!1&&(n=f),this.each(function(){at.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){at.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?at.event.trigger(e,t,n,!0):void 0}});var jt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Lt=/ jQuery\d+="(?:null|\d+)"/g,At=RegExp("<(?:"+jt+")[\\s/>]","i"),Rt=/^\s+/,Vt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ht=/<([\w:]+)/,Bt=/<tbody/i,zt=/<|&#?\w+;/,Ut=/<(?:script|style|link)/i,qt=/checked\s*(?:[^=]|=\s*.checked.)/i,Wt=/^$|\/(?:java|ecma)script/i,Jt=/^true\/(.*)/,Yt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Gt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:nt.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Qt=m(pt),Xt=Qt.appendChild(pt.createElement("div"));Gt.optgroup=Gt.option,Gt.tbody=Gt.tfoot=Gt.colgroup=Gt.caption=Gt.thead,Gt.th=Gt.td,at.extend({clone:function(e,t,n){var i,a,o,r,s,l=at.contains(e.ownerDocument,e);if(nt.html5Clone||at.isXMLDoc(e)||!At.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(Xt.innerHTML=e.outerHTML,Xt.removeChild(o=Xt.firstChild)),!(nt.noCloneEvent&&nt.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||at.isXMLDoc(e)))for(i=g(o),s=g(e),r=0;null!=(a=s[r]);++r)i[r]&&x(a,i[r]);if(t)if(n)for(s=s||g(e),i=i||g(o),r=0;null!=(a=s[r]);r++)D(a,i[r]);else D(e,o);return i=g(o,"script"),i.length>0&&k(i,!l&&g(e,"script")),i=s=a=null,o},buildFragment:function(e,t,n,i){for(var a,o,r,s,l,u,d,c=e.length,h=m(t),f=[],p=0;c>p;p++)if(o=e[p],o||0===o)if("object"===at.type(o))at.merge(f,o.nodeType?[o]:o);else if(zt.test(o)){for(s=s||h.appendChild(t.createElement("div")),l=(Ht.exec(o)||["",""])[1].toLowerCase(),d=Gt[l]||Gt._default,s.innerHTML=d[1]+o.replace(Vt,"<$1></$2>")+d[2],a=d[0];a--;)s=s.lastChild;if(!nt.leadingWhitespace&&Rt.test(o)&&f.push(t.createTextNode(Rt.exec(o)[0])),!nt.tbody)for(o="table"!==l||Bt.test(o)?"<table>"!==d[1]||Bt.test(o)?0:s:s.firstChild,a=o&&o.childNodes.length;a--;)at.nodeName(u=o.childNodes[a],"tbody")&&!u.childNodes.length&&o.removeChild(u);for(at.merge(f,s.childNodes),s.textContent="";s.firstChild;)s.removeChild(s.firstChild);s=h.lastChild}else f.push(t.createTextNode(o));for(s&&h.removeChild(s),nt.appendChecked||at.grep(g(f,"input"),v),p=0;o=f[p++];)if((!i||-1===at.inArray(o,i))&&(r=at.contains(o.ownerDocument,o),s=g(h.appendChild(o),"script"),r&&k(s),n))for(a=0;o=s[a++];)Wt.test(o.type||"")&&n.push(o);return s=null,h},cleanData:function(e,t){for(var n,i,a,o,r=0,s=at.expando,l=at.cache,u=nt.deleteExpando,d=at.event.special;null!=(n=e[r]);r++)if((t||at.acceptData(n))&&(a=n[s],o=a&&l[a])){if(o.events)for(i in o.events)d[i]?at.event.remove(n,i):at.removeEvent(n,i,o.handle);l[a]&&(delete l[a],u?delete n[s]:typeof n.removeAttribute!==xt?n.removeAttribute(s):n[s]=null,Y.push(a))}}}),at.fn.extend({text:function(e){return _t(this,function(e){return void 0===e?at.text(this):this.empty().append((this[0]&&this[0].ownerDocument||pt).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=y(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=y(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,i=e?at.filter(e,this):this,a=0;null!=(n=i[a]);a++)t||1!==n.nodeType||at.cleanData(g(n)),n.parentNode&&(t&&at.contains(n.ownerDocument,n)&&k(g(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&at.cleanData(g(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&at.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return at.clone(this,e,t)})},html:function(e){return _t(this,function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e)return 1===t.nodeType?t.innerHTML.replace(Lt,""):void 0;if(!("string"!=typeof e||Ut.test(e)||!nt.htmlSerialize&&At.test(e)||!nt.leadingWhitespace&&Rt.test(e)||Gt[(Ht.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(Vt,"<$1></$2>");try{for(;i>n;n++)t=this[n]||{},1===t.nodeType&&(at.cleanData(g(t,!1)),t.innerHTML=e);t=0}catch(a){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,at.cleanData(g(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=Q.apply([],e);var n,i,a,o,r,s,l=0,u=this.length,d=this,c=u-1,h=e[0],f=at.isFunction(h);if(f||u>1&&"string"==typeof h&&!nt.checkClone&&qt.test(h))return this.each(function(n){var i=d.eq(n);f&&(e[0]=h.call(this,n,i.html())),i.domManip(e,t)});if(u&&(s=at.buildFragment(e,this[0].ownerDocument,!1,this),n=s.firstChild,1===s.childNodes.length&&(s=n),n)){for(o=at.map(g(s,"script"),b),a=o.length;u>l;l++)i=s,l!==c&&(i=at.clone(i,!0,!0),a&&at.merge(o,g(i,"script"))),t.call(this[l],i,l);if(a)for(r=o[o.length-1].ownerDocument,at.map(o,w),l=0;a>l;l++)i=o[l],Wt.test(i.type||"")&&!at._data(i,"globalEval")&&at.contains(r,i)&&(i.src?at._evalUrl&&at._evalUrl(i.src):at.globalEval((i.text||i.textContent||i.innerHTML||"").replace(Yt,"")));s=n=null}return this}}),at.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){at.fn[e]=function(e){for(var n,i=0,a=[],o=at(e),r=o.length-1;r>=i;i++)n=i===r?this:this.clone(!0),at(o[i])[t](n),X.apply(a,n.get());return this.pushStack(a)}});var Kt,Zt={};!function(){var e;nt.shrinkWrapBlocks=function(){if(null!=e)return e;e=!1;var t,n,i;return n=pt.getElementsByTagName("body")[0],n&&n.style?(t=pt.createElement("div"),i=pt.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(t),typeof t.style.zoom!==xt&&(t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",t.appendChild(pt.createElement("div")).style.width="5px",e=3!==t.offsetWidth),n.removeChild(i),e):void 0}}();var en,tn,nn=/^margin/,an=RegExp("^("+Mt+")(?!px)[a-z%]+$","i"),on=/^(top|right|bottom|left)$/;e.getComputedStyle?(en=function(e){return e.ownerDocument.defaultView.getComputedStyle(e,null)},tn=function(e,t,n){var i,a,o,r,s=e.style;return n=n||en(e),r=n?n.getPropertyValue(t)||n[t]:void 0,n&&(""!==r||at.contains(e.ownerDocument,e)||(r=at.style(e,t)),an.test(r)&&nn.test(t)&&(i=s.width,a=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=r,r=n.width,s.width=i,s.minWidth=a,s.maxWidth=o)),void 0===r?r:r+""}):pt.documentElement.currentStyle&&(en=function(e){return e.currentStyle},tn=function(e,t,n){var i,a,o,r,s=e.style;
return n=n||en(e),r=n?n[t]:void 0,null==r&&s&&s[t]&&(r=s[t]),an.test(r)&&!on.test(t)&&(i=s.left,a=e.runtimeStyle,o=a&&a.left,o&&(a.left=e.currentStyle.left),s.left="fontSize"===t?"1em":r,r=s.pixelLeft+"px",s.left=i,o&&(a.left=o)),void 0===r?r:r+""||"auto"}),!function(){function t(){var t,n,i,a;n=pt.getElementsByTagName("body")[0],n&&n.style&&(t=pt.createElement("div"),i=pt.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(t),t.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",o=r=!1,l=!0,e.getComputedStyle&&(o="1%"!==(e.getComputedStyle(t,null)||{}).top,r="4px"===(e.getComputedStyle(t,null)||{width:"4px"}).width,a=t.appendChild(pt.createElement("div")),a.style.cssText=t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",a.style.marginRight=a.style.width="0",t.style.width="1px",l=!parseFloat((e.getComputedStyle(a,null)||{}).marginRight)),t.innerHTML="<table><tr><td></td><td>t</td></tr></table>",a=t.getElementsByTagName("td"),a[0].style.cssText="margin:0;border:0;padding:0;display:none",s=0===a[0].offsetHeight,s&&(a[0].style.display="",a[1].style.display="none",s=0===a[0].offsetHeight),n.removeChild(i))}var n,i,a,o,r,s,l;n=pt.createElement("div"),n.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",a=n.getElementsByTagName("a")[0],(i=a&&a.style)&&(i.cssText="float:left;opacity:.5",nt.opacity="0.5"===i.opacity,nt.cssFloat=!!i.cssFloat,n.style.backgroundClip="content-box",n.cloneNode(!0).style.backgroundClip="",nt.clearCloneStyle="content-box"===n.style.backgroundClip,nt.boxSizing=""===i.boxSizing||""===i.MozBoxSizing||""===i.WebkitBoxSizing,at.extend(nt,{reliableHiddenOffsets:function(){return null==s&&t(),s},boxSizingReliable:function(){return null==r&&t(),r},pixelPosition:function(){return null==o&&t(),o},reliableMarginRight:function(){return null==l&&t(),l}}))}(),at.swap=function(e,t,n,i){var a,o,r={};for(o in t)r[o]=e.style[o],e.style[o]=t[o];a=n.apply(e,i||[]);for(o in t)e.style[o]=r[o];return a};var rn=/alpha\([^)]*\)/i,sn=/opacity\s*=\s*([^)]*)/,ln=/^(none|table(?!-c[ea]).+)/,un=RegExp("^("+Mt+")(.*)$","i"),dn=RegExp("^([+-])=("+Mt+")","i"),cn={position:"absolute",visibility:"hidden",display:"block"},hn={letterSpacing:"0",fontWeight:"400"},fn=["Webkit","O","Moz","ms"];at.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=tn(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":nt.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var a,o,r,s=at.camelCase(t),l=e.style;if(t=at.cssProps[s]||(at.cssProps[s]=P(l,s)),r=at.cssHooks[t]||at.cssHooks[s],void 0===n)return r&&"get"in r&&void 0!==(a=r.get(e,!1,i))?a:l[t];if(o=typeof n,"string"===o&&(a=dn.exec(n))&&(n=(a[1]+1)*a[2]+parseFloat(at.css(e,t)),o="number"),null!=n&&n===n&&("number"!==o||at.cssNumber[s]||(n+="px"),nt.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),!(r&&"set"in r&&void 0===(n=r.set(e,n,i)))))try{l[t]=n}catch(u){}}},css:function(e,t,n,i){var a,o,r,s=at.camelCase(t);return t=at.cssProps[s]||(at.cssProps[s]=P(e.style,s)),r=at.cssHooks[t]||at.cssHooks[s],r&&"get"in r&&(o=r.get(e,!0,n)),void 0===o&&(o=tn(e,t,i)),"normal"===o&&t in hn&&(o=hn[t]),""===n||n?(a=parseFloat(o),n===!0||at.isNumeric(a)?a||0:o):o}}),at.each(["height","width"],function(e,t){at.cssHooks[t]={get:function(e,n,i){return n?ln.test(at.css(e,"display"))&&0===e.offsetWidth?at.swap(e,cn,function(){return E(e,t,i)}):E(e,t,i):void 0},set:function(e,n,i){var a=i&&en(e);return _(e,n,i?S(e,t,i,nt.boxSizing&&"border-box"===at.css(e,"boxSizing",!1,a),a):0)}}}),nt.opacity||(at.cssHooks.opacity={get:function(e,t){return sn.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,i=e.currentStyle,a=at.isNumeric(t)?"alpha(opacity="+100*t+")":"",o=i&&i.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===at.trim(o.replace(rn,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||i&&!i.filter)||(n.filter=rn.test(o)?o.replace(rn,a):o+" "+a)}}),at.cssHooks.marginRight=M(nt.reliableMarginRight,function(e,t){return t?at.swap(e,{display:"inline-block"},tn,[e,"marginRight"]):void 0}),at.each({margin:"",padding:"",border:"Width"},function(e,t){at.cssHooks[e+t]={expand:function(n){for(var i=0,a={},o="string"==typeof n?n.split(" "):[n];4>i;i++)a[e+Pt[i]+t]=o[i]||o[i-2]||o[0];return a}},nn.test(e)||(at.cssHooks[e+t].set=_)}),at.fn.extend({css:function(e,t){return _t(this,function(e,t,n){var i,a,o={},r=0;if(at.isArray(t)){for(i=en(e),a=t.length;a>r;r++)o[t[r]]=at.css(e,t[r],!1,i);return o}return void 0!==n?at.style(e,t,n):at.css(e,t)},e,t,arguments.length>1)},show:function(){return F(this,!0)},hide:function(){return F(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Ft(this)?at(this).show():at(this).hide()})}}),at.Tween=N,N.prototype={constructor:N,init:function(e,t,n,i,a,o){this.elem=e,this.prop=n,this.easing=a||"swing",this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=o||(at.cssNumber[n]?"":"px")},cur:function(){var e=N.propHooks[this.prop];return e&&e.get?e.get(this):N.propHooks._default.get(this)},run:function(e){var t,n=N.propHooks[this.prop];return this.pos=t=this.options.duration?at.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):N.propHooks._default.set(this),this}},N.prototype.init.prototype=N.prototype,N.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=at.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){at.fx.step[e.prop]?at.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[at.cssProps[e.prop]]||at.cssHooks[e.prop])?at.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},N.propHooks.scrollTop=N.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},at.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},at.fx=N.prototype.init,at.fx.step={};var pn,mn,gn=/^(?:toggle|show|hide)$/,vn=RegExp("^(?:([+-])=|)("+Mt+")([a-z%]*)$","i"),yn=/queueHooks$/,bn=[j],wn={"*":[function(e,t){var n=this.createTween(e,t),i=n.cur(),a=vn.exec(t),o=a&&a[3]||(at.cssNumber[e]?"":"px"),r=(at.cssNumber[e]||"px"!==o&&+i)&&vn.exec(at.css(n.elem,e)),s=1,l=20;if(r&&r[3]!==o){o=o||r[3],a=a||[],r=+i||1;do s=s||".5",r/=s,at.style(n.elem,e,r+o);while(s!==(s=n.cur()/i)&&1!==s&&--l)}return a&&(r=n.start=+r||+i||0,n.unit=o,n.end=a[1]?r+(a[1]+1)*a[2]:+a[2]),n}]};at.Animation=at.extend(A,{tweener:function(e,t){at.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,i=0,a=e.length;a>i;i++)n=e[i],wn[n]=wn[n]||[],wn[n].unshift(t)},prefilter:function(e,t){t?bn.unshift(e):bn.push(e)}}),at.speed=function(e,t,n){var i=e&&"object"==typeof e?at.extend({},e):{complete:n||!n&&t||at.isFunction(e)&&e,duration:e,easing:n&&t||t&&!at.isFunction(t)&&t};return i.duration=at.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in at.fx.speeds?at.fx.speeds[i.duration]:at.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){at.isFunction(i.old)&&i.old.call(this),i.queue&&at.dequeue(this,i.queue)},i},at.fn.extend({fadeTo:function(e,t,n,i){return this.filter(Ft).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var a=at.isEmptyObject(e),o=at.speed(t,n,i),r=function(){var t=A(this,at.extend({},e),o);(a||at._data(this,"finish"))&&t.stop(!0)};return r.finish=r,a||o.queue===!1?this.each(r):this.queue(o.queue,r)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,a=null!=e&&e+"queueHooks",o=at.timers,r=at._data(this);if(a)r[a]&&r[a].stop&&i(r[a]);else for(a in r)r[a]&&r[a].stop&&yn.test(a)&&i(r[a]);for(a=o.length;a--;)o[a].elem!==this||null!=e&&o[a].queue!==e||(o[a].anim.stop(n),t=!1,o.splice(a,1));(t||!n)&&at.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=at._data(this),i=n[e+"queue"],a=n[e+"queueHooks"],o=at.timers,r=i?i.length:0;for(n.finish=!0,at.queue(this,e,[]),a&&a.stop&&a.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;r>t;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),at.each(["toggle","show","hide"],function(e,t){var n=at.fn[t];at.fn[t]=function(e,i,a){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate($(t,!0),e,i,a)}}),at.each({slideDown:$("show"),slideUp:$("hide"),slideToggle:$("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){at.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),at.timers=[],at.fx.tick=function(){var e,t=at.timers,n=0;for(pn=at.now();t.length>n;n++)e=t[n],e()||t[n]!==e||t.splice(n--,1);t.length||at.fx.stop(),pn=void 0},at.fx.timer=function(e){at.timers.push(e),e()?at.fx.start():at.timers.pop()},at.fx.interval=13,at.fx.start=function(){mn||(mn=setInterval(at.fx.tick,at.fx.interval))},at.fx.stop=function(){clearInterval(mn),mn=null},at.fx.speeds={slow:600,fast:200,_default:400},at.fn.delay=function(e,t){return e=at.fx?at.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var i=setTimeout(t,e);n.stop=function(){clearTimeout(i)}})},function(){var e,t,n,i,a;t=pt.createElement("div"),t.setAttribute("className","t"),t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",i=t.getElementsByTagName("a")[0],n=pt.createElement("select"),a=n.appendChild(pt.createElement("option")),e=t.getElementsByTagName("input")[0],i.style.cssText="top:1px",nt.getSetAttribute="t"!==t.className,nt.style=/top/.test(i.getAttribute("style")),nt.hrefNormalized="/a"===i.getAttribute("href"),nt.checkOn=!!e.value,nt.optSelected=a.selected,nt.enctype=!!pt.createElement("form").enctype,n.disabled=!0,nt.optDisabled=!a.disabled,e=pt.createElement("input"),e.setAttribute("value",""),nt.input=""===e.getAttribute("value"),e.value="t",e.setAttribute("type","radio"),nt.radioValue="t"===e.value}();var kn=/\r/g;at.fn.extend({val:function(e){var t,n,i,a=this[0];return arguments.length?(i=at.isFunction(e),this.each(function(n){var a;1===this.nodeType&&(a=i?e.call(this,n,at(this).val()):e,null==a?a="":"number"==typeof a?a+="":at.isArray(a)&&(a=at.map(a,function(e){return null==e?"":e+""})),t=at.valHooks[this.type]||at.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,a,"value")||(this.value=a))})):a?(t=at.valHooks[a.type]||at.valHooks[a.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(a,"value"))?n:(n=a.value,"string"==typeof n?n.replace(kn,""):null==n?"":n)):void 0}}),at.extend({valHooks:{option:{get:function(e){var t=at.find.attr(e,"value");return null!=t?t:at.trim(at.text(e))}},select:{get:function(e){for(var t,n,i=e.options,a=e.selectedIndex,o="select-one"===e.type||0>a,r=o?null:[],s=o?a+1:i.length,l=0>a?s:o?a:0;s>l;l++)if(n=i[l],!(!n.selected&&l!==a||(nt.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&at.nodeName(n.parentNode,"optgroup"))){if(t=at(n).val(),o)return t;r.push(t)}return r},set:function(e,t){for(var n,i,a=e.options,o=at.makeArray(t),r=a.length;r--;)if(i=a[r],at.inArray(at.valHooks.option.get(i),o)>=0)try{i.selected=n=!0}catch(s){i.scrollHeight}else i.selected=!1;return n||(e.selectedIndex=-1),a}}}}),at.each(["radio","checkbox"],function(){at.valHooks[this]={set:function(e,t){return at.isArray(t)?e.checked=at.inArray(at(e).val(),t)>=0:void 0}},nt.checkOn||(at.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var Dn,xn,Cn=at.expr.attrHandle,Tn=/^(?:checked|selected)$/i,Mn=nt.getSetAttribute,Pn=nt.input;at.fn.extend({attr:function(e,t){return _t(this,at.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){at.removeAttr(this,e)})}}),at.extend({attr:function(e,t,n){var i,a,o=e.nodeType;return e&&3!==o&&8!==o&&2!==o?typeof e.getAttribute===xt?at.prop(e,t,n):(1===o&&at.isXMLDoc(e)||(t=t.toLowerCase(),i=at.attrHooks[t]||(at.expr.match.bool.test(t)?xn:Dn)),void 0===n?i&&"get"in i&&null!==(a=i.get(e,t))?a:(a=at.find.attr(e,t),null==a?void 0:a):null!==n?i&&"set"in i&&void 0!==(a=i.set(e,n,t))?a:(e.setAttribute(t,n+""),n):void at.removeAttr(e,t)):void 0},removeAttr:function(e,t){var n,i,a=0,o=t&&t.match(bt);if(o&&1===e.nodeType)for(;n=o[a++];)i=at.propFix[n]||n,at.expr.match.bool.test(n)?Pn&&Mn||!Tn.test(n)?e[i]=!1:e[at.camelCase("default-"+n)]=e[i]=!1:at.attr(e,n,""),e.removeAttribute(Mn?n:i)},attrHooks:{type:{set:function(e,t){if(!nt.radioValue&&"radio"===t&&at.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),xn={set:function(e,t,n){return t===!1?at.removeAttr(e,n):Pn&&Mn||!Tn.test(n)?e.setAttribute(!Mn&&at.propFix[n]||n,n):e[at.camelCase("default-"+n)]=e[n]=!0,n}},at.each(at.expr.match.bool.source.match(/\w+/g),function(e,t){var n=Cn[t]||at.find.attr;Cn[t]=Pn&&Mn||!Tn.test(t)?function(e,t,i){var a,o;return i||(o=Cn[t],Cn[t]=a,a=null!=n(e,t,i)?t.toLowerCase():null,Cn[t]=o),a}:function(e,t,n){return n?void 0:e[at.camelCase("default-"+t)]?t.toLowerCase():null}}),Pn&&Mn||(at.attrHooks.value={set:function(e,t,n){return at.nodeName(e,"input")?void(e.defaultValue=t):Dn&&Dn.set(e,t,n)}}),Mn||(Dn={set:function(e,t,n){var i=e.getAttributeNode(n);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(n)),i.value=t+="","value"===n||t===e.getAttribute(n)?t:void 0}},Cn.id=Cn.name=Cn.coords=function(e,t,n){var i;return n?void 0:(i=e.getAttributeNode(t))&&""!==i.value?i.value:null},at.valHooks.button={get:function(e,t){var n=e.getAttributeNode(t);return n&&n.specified?n.value:void 0},set:Dn.set},at.attrHooks.contenteditable={set:function(e,t,n){Dn.set(e,""===t?!1:t,n)}},at.each(["width","height"],function(e,t){at.attrHooks[t]={set:function(e,n){return""===n?(e.setAttribute(t,"auto"),n):void 0}}})),nt.style||(at.attrHooks.style={get:function(e){return e.style.cssText||void 0},set:function(e,t){return e.style.cssText=t+""}});var Fn=/^(?:input|select|textarea|button|object)$/i,_n=/^(?:a|area)$/i;at.fn.extend({prop:function(e,t){return _t(this,at.prop,e,t,arguments.length>1)},removeProp:function(e){return e=at.propFix[e]||e,this.each(function(){try{this[e]=void 0,delete this[e]}catch(t){}})}}),at.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,n){var i,a,o,r=e.nodeType;return e&&3!==r&&8!==r&&2!==r?(o=1!==r||!at.isXMLDoc(e),o&&(t=at.propFix[t]||t,a=at.propHooks[t]),void 0!==n?a&&"set"in a&&void 0!==(i=a.set(e,n,t))?i:e[t]=n:a&&"get"in a&&null!==(i=a.get(e,t))?i:e[t]):void 0},propHooks:{tabIndex:{get:function(e){var t=at.find.attr(e,"tabindex");return t?parseInt(t,10):Fn.test(e.nodeName)||_n.test(e.nodeName)&&e.href?0:-1}}}}),nt.hrefNormalized||at.each(["href","src"],function(e,t){at.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),nt.optSelected||(at.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),at.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){at.propFix[this.toLowerCase()]=this}),nt.enctype||(at.propFix.enctype="encoding");var Sn=/[\t\r\n\f]/g;at.fn.extend({addClass:function(e){var t,n,i,a,o,r,s=0,l=this.length,u="string"==typeof e&&e;if(at.isFunction(e))return this.each(function(t){at(this).addClass(e.call(this,t,this.className))});if(u)for(t=(e||"").match(bt)||[];l>s;s++)if(n=this[s],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Sn," "):" ")){for(o=0;a=t[o++];)0>i.indexOf(" "+a+" ")&&(i+=a+" ");r=at.trim(i),n.className!==r&&(n.className=r)}return this},removeClass:function(e){var t,n,i,a,o,r,s=0,l=this.length,u=0===arguments.length||"string"==typeof e&&e;if(at.isFunction(e))return this.each(function(t){at(this).removeClass(e.call(this,t,this.className))});if(u)for(t=(e||"").match(bt)||[];l>s;s++)if(n=this[s],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Sn," "):"")){for(o=0;a=t[o++];)for(;i.indexOf(" "+a+" ")>=0;)i=i.replace(" "+a+" "," ");r=e?at.trim(i):"",n.className!==r&&(n.className=r)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):this.each(at.isFunction(e)?function(n){at(this).toggleClass(e.call(this,n,this.className,t),t)}:function(){if("string"===n)for(var t,i=0,a=at(this),o=e.match(bt)||[];t=o[i++];)a.hasClass(t)?a.removeClass(t):a.addClass(t);else(n===xt||"boolean"===n)&&(this.className&&at._data(this,"__className__",this.className),this.className=this.className||e===!1?"":at._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(Sn," ").indexOf(t)>=0)return!0;return!1}}),at.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){at.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),at.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var En=at.now(),Nn=/\?/,On=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;at.parseJSON=function(t){if(e.JSON&&e.JSON.parse)return e.JSON.parse(t+"");var n,i=null,a=at.trim(t+"");return a&&!at.trim(a.replace(On,function(e,t,a,o){return n&&t&&(i=0),0===i?e:(n=a||t,i+=!o-!a,"")}))?Function("return "+a)():at.error("Invalid JSON: "+t)},at.parseXML=function(t){var n,i;if(!t||"string"!=typeof t)return null;try{e.DOMParser?(i=new DOMParser,n=i.parseFromString(t,"text/xml")):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(t))}catch(a){n=void 0}return n&&n.documentElement&&!n.getElementsByTagName("parsererror").length||at.error("Invalid XML: "+t),n};var $n,In,jn=/#.*$/,Ln=/([?&])_=[^&]*/,An=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Rn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Vn=/^(?:GET|HEAD)$/,Hn=/^\/\//,Bn=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,zn={},Un={},qn="*/".concat("*");try{In=location.href}catch(Wn){In=pt.createElement("a"),In.href="",In=In.href}$n=Bn.exec(In.toLowerCase())||[],at.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:In,type:"GET",isLocal:Rn.test($n[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":qn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":at.parseJSON,"text xml":at.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?H(H(e,at.ajaxSettings),t):H(at.ajaxSettings,e)},ajaxPrefilter:R(zn),ajaxTransport:R(Un),ajax:function(e,t){function n(e,t,n,i){var a,d,v,y,w,D=t;2!==b&&(b=2,s&&clearTimeout(s),u=void 0,r=i||"",k.readyState=e>0?4:0,a=e>=200&&300>e||304===e,n&&(y=B(c,k,n)),y=z(c,y,k,a),a?(c.ifModified&&(w=k.getResponseHeader("Last-Modified"),w&&(at.lastModified[o]=w),w=k.getResponseHeader("etag"),w&&(at.etag[o]=w)),204===e||"HEAD"===c.type?D="nocontent":304===e?D="notmodified":(D=y.state,d=y.data,v=y.error,a=!v)):(v=D,(e||!D)&&(D="error",0>e&&(e=0))),k.status=e,k.statusText=(t||D)+"",a?p.resolveWith(h,[d,D,k]):p.rejectWith(h,[k,D,v]),k.statusCode(g),g=void 0,l&&f.trigger(a?"ajaxSuccess":"ajaxError",[k,c,a?d:v]),m.fireWith(h,[k,D]),l&&(f.trigger("ajaxComplete",[k,c]),--at.active||at.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var i,a,o,r,s,l,u,d,c=at.ajaxSetup({},t),h=c.context||c,f=c.context&&(h.nodeType||h.jquery)?at(h):at.event,p=at.Deferred(),m=at.Callbacks("once memory"),g=c.statusCode||{},v={},y={},b=0,w="canceled",k={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!d)for(d={};t=An.exec(r);)d[t[1].toLowerCase()]=t[2];t=d[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?r:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=y[n]=y[n]||e,v[e]=t),this},overrideMimeType:function(e){return b||(c.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>b)for(t in e)g[t]=[g[t],e[t]];else k.always(e[k.status]);return this},abort:function(e){var t=e||w;return u&&u.abort(t),n(0,t),this}};if(p.promise(k).complete=m.add,k.success=k.done,k.error=k.fail,c.url=((e||c.url||In)+"").replace(jn,"").replace(Hn,$n[1]+"//"),c.type=t.method||t.type||c.method||c.type,c.dataTypes=at.trim(c.dataType||"*").toLowerCase().match(bt)||[""],null==c.crossDomain&&(i=Bn.exec(c.url.toLowerCase()),c.crossDomain=!(!i||i[1]===$n[1]&&i[2]===$n[2]&&(i[3]||("http:"===i[1]?"80":"443"))===($n[3]||("http:"===$n[1]?"80":"443")))),c.data&&c.processData&&"string"!=typeof c.data&&(c.data=at.param(c.data,c.traditional)),V(zn,c,t,k),2===b)return k;l=c.global,l&&0===at.active++&&at.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!Vn.test(c.type),o=c.url,c.hasContent||(c.data&&(o=c.url+=(Nn.test(o)?"&":"?")+c.data,delete c.data),c.cache===!1&&(c.url=Ln.test(o)?o.replace(Ln,"$1_="+En++):o+(Nn.test(o)?"&":"?")+"_="+En++)),c.ifModified&&(at.lastModified[o]&&k.setRequestHeader("If-Modified-Since",at.lastModified[o]),at.etag[o]&&k.setRequestHeader("If-None-Match",at.etag[o])),(c.data&&c.hasContent&&c.contentType!==!1||t.contentType)&&k.setRequestHeader("Content-Type",c.contentType),k.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+("*"!==c.dataTypes[0]?", "+qn+"; q=0.01":""):c.accepts["*"]);for(a in c.headers)k.setRequestHeader(a,c.headers[a]);if(c.beforeSend&&(c.beforeSend.call(h,k,c)===!1||2===b))return k.abort();w="abort";for(a in{success:1,error:1,complete:1})k[a](c[a]);if(u=V(Un,c,t,k)){k.readyState=1,l&&f.trigger("ajaxSend",[k,c]),c.async&&c.timeout>0&&(s=setTimeout(function(){k.abort("timeout")},c.timeout));try{b=1,u.send(v,n)}catch(D){if(!(2>b))throw D;n(-1,D)}}else n(-1,"No Transport");return k},getJSON:function(e,t,n){return at.get(e,t,n,"json")},getScript:function(e,t){return at.get(e,void 0,t,"script")}}),at.each(["get","post"],function(e,t){at[t]=function(e,n,i,a){return at.isFunction(n)&&(a=a||i,i=n,n=void 0),at.ajax({url:e,type:t,dataType:a,data:n,success:i})}}),at.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){at.fn[t]=function(e){return this.on(t,e)}}),at._evalUrl=function(e){return at.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},at.fn.extend({wrapAll:function(e){if(at.isFunction(e))return this.each(function(t){at(this).wrapAll(e.call(this,t))});if(this[0]){var t=at(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return this.each(at.isFunction(e)?function(t){at(this).wrapInner(e.call(this,t))}:function(){var t=at(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=at.isFunction(e);return this.each(function(n){at(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){at.nodeName(this,"body")||at(this).replaceWith(this.childNodes)}).end()}}),at.expr.filters.hidden=function(e){return 0>=e.offsetWidth&&0>=e.offsetHeight||!nt.reliableHiddenOffsets()&&"none"===(e.style&&e.style.display||at.css(e,"display"))},at.expr.filters.visible=function(e){return!at.expr.filters.hidden(e)};var Jn=/%20/g,Yn=/\[\]$/,Gn=/\r?\n/g,Qn=/^(?:submit|button|image|reset|file)$/i,Xn=/^(?:input|select|textarea|keygen)/i;at.param=function(e,t){var n,i=[],a=function(e,t){t=at.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=at.ajaxSettings&&at.ajaxSettings.traditional),at.isArray(e)||e.jquery&&!at.isPlainObject(e))at.each(e,function(){a(this.name,this.value)});else for(n in e)U(n,e[n],t,a);return i.join("&").replace(Jn,"+")},at.fn.extend({serialize:function(){return at.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=at.prop(this,"elements");return e?at.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!at(this).is(":disabled")&&Xn.test(this.nodeName)&&!Qn.test(e)&&(this.checked||!St.test(e))}).map(function(e,t){var n=at(this).val();return null==n?null:at.isArray(n)?at.map(n,function(e){return{name:t.name,value:e.replace(Gn,"\r\n")}}):{name:t.name,value:n.replace(Gn,"\r\n")}}).get()}}),at.ajaxSettings.xhr=void 0!==e.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&q()||W()}:q;var Kn=0,Zn={},ei=at.ajaxSettings.xhr();e.ActiveXObject&&at(e).on("unload",function(){for(var e in Zn)Zn[e](void 0,!0)}),nt.cors=!!ei&&"withCredentials"in ei,ei=nt.ajax=!!ei,ei&&at.ajaxTransport(function(e){if(!e.crossDomain||nt.cors){var t;return{send:function(n,i){var a,o=e.xhr(),r=++Kn;if(o.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(a in e.xhrFields)o[a]=e.xhrFields[a];e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(a in n)void 0!==n[a]&&o.setRequestHeader(a,n[a]+"");o.send(e.hasContent&&e.data||null),t=function(n,a){var s,l,u;if(t&&(a||4===o.readyState))if(delete Zn[r],t=void 0,o.onreadystatechange=at.noop,a)4!==o.readyState&&o.abort();else{u={},s=o.status,"string"==typeof o.responseText&&(u.text=o.responseText);try{l=o.statusText}catch(d){l=""}s||!e.isLocal||e.crossDomain?1223===s&&(s=204):s=u.text?200:404}u&&i(s,l,u,o.getAllResponseHeaders())},e.async?4===o.readyState?setTimeout(t):o.onreadystatechange=Zn[r]=t:t()},abort:function(){t&&t(void 0,!0)}}}}),at.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return at.globalEval(e),e}}}),at.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),at.ajaxTransport("script",function(e){if(e.crossDomain){var t,n=pt.head||at("head")[0]||pt.documentElement;return{send:function(i,a){t=pt.createElement("script"),t.async=!0,e.scriptCharset&&(t.charset=e.scriptCharset),t.src=e.url,t.onload=t.onreadystatechange=function(e,n){(n||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),t=null,n||a(200,"success"))},n.insertBefore(t,n.firstChild)},abort:function(){t&&t.onload(void 0,!0)}}}});var ti=[],ni=/(=)\?(?=&|$)|\?\?/;at.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=ti.pop()||at.expando+"_"+En++;return this[e]=!0,e}}),at.ajaxPrefilter("json jsonp",function(t,n,i){var a,o,r,s=t.jsonp!==!1&&(ni.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&ni.test(t.data)&&"data");return s||"jsonp"===t.dataTypes[0]?(a=t.jsonpCallback=at.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(ni,"$1"+a):t.jsonp!==!1&&(t.url+=(Nn.test(t.url)?"&":"?")+t.jsonp+"="+a),t.converters["script json"]=function(){return r||at.error(a+" was not called"),r[0]},t.dataTypes[0]="json",o=e[a],e[a]=function(){r=arguments},i.always(function(){e[a]=o,t[a]&&(t.jsonpCallback=n.jsonpCallback,ti.push(a)),r&&at.isFunction(o)&&o(r[0]),r=o=void 0}),"script"):void 0}),at.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||pt;var i=ct.exec(e),a=!n&&[];return i?[t.createElement(i[1])]:(i=at.buildFragment([e],t,a),a&&a.length&&at(a).remove(),at.merge([],i.childNodes))};var ii=at.fn.load;at.fn.load=function(e,t,n){if("string"!=typeof e&&ii)return ii.apply(this,arguments);var i,a,o,r=this,s=e.indexOf(" ");return s>=0&&(i=at.trim(e.slice(s,e.length)),e=e.slice(0,s)),at.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(o="POST"),r.length>0&&at.ajax({url:e,type:o,dataType:"html",data:t}).done(function(e){a=arguments,r.html(i?at("<div>").append(at.parseHTML(e)).find(i):e)}).complete(n&&function(e,t){r.each(n,a||[e.responseText,t,e])}),this},at.expr.filters.animated=function(e){return at.grep(at.timers,function(t){return e===t.elem}).length};var ai=e.document.documentElement;at.offset={setOffset:function(e,t,n){var i,a,o,r,s,l,u,d=at.css(e,"position"),c=at(e),h={};"static"===d&&(e.style.position="relative"),s=c.offset(),o=at.css(e,"top"),l=at.css(e,"left"),u=("absolute"===d||"fixed"===d)&&at.inArray("auto",[o,l])>-1,u?(i=c.position(),r=i.top,a=i.left):(r=parseFloat(o)||0,a=parseFloat(l)||0),at.isFunction(t)&&(t=t.call(e,n,s)),null!=t.top&&(h.top=t.top-s.top+r),null!=t.left&&(h.left=t.left-s.left+a),"using"in t?t.using.call(e,h):c.css(h)}},at.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){at.offset.setOffset(this,e,t)});var t,n,i={top:0,left:0},a=this[0],o=a&&a.ownerDocument;return o?(t=o.documentElement,at.contains(t,a)?(typeof a.getBoundingClientRect!==xt&&(i=a.getBoundingClientRect()),n=J(o),{top:i.top+(n.pageYOffset||t.scrollTop)-(t.clientTop||0),left:i.left+(n.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):i):void 0},position:function(){if(this[0]){var e,t,n={top:0,left:0},i=this[0];return"fixed"===at.css(i,"position")?t=i.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),at.nodeName(e[0],"html")||(n=e.offset()),n.top+=at.css(e[0],"borderTopWidth",!0),n.left+=at.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-at.css(i,"marginTop",!0),left:t.left-n.left-at.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||ai;e&&!at.nodeName(e,"html")&&"static"===at.css(e,"position");)e=e.offsetParent;return e||ai})}}),at.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n=/Y/.test(t);at.fn[e]=function(i){return _t(this,function(e,i,a){var o=J(e);return void 0===a?o?t in o?o[t]:o.document.documentElement[i]:e[i]:void(o?o.scrollTo(n?at(o).scrollLeft():a,n?a:at(o).scrollTop()):e[i]=a)},e,i,arguments.length,null)}}),at.each(["top","left"],function(e,t){at.cssHooks[t]=M(nt.pixelPosition,function(e,n){return n?(n=tn(e,t),an.test(n)?at(e).position()[t]+"px":n):void 0})}),at.each({Height:"height",Width:"width"},function(e,t){at.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,i){at.fn[i]=function(i,a){var o=arguments.length&&(n||"boolean"!=typeof i),r=n||(i===!0||a===!0?"margin":"border");return _t(this,function(t,n,i){var a;return at.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(a=t.documentElement,Math.max(t.body["scroll"+e],a["scroll"+e],t.body["offset"+e],a["offset"+e],a["client"+e])):void 0===i?at.css(t,n,r):at.style(t,n,i,r)},t,o?i:void 0,o,null)
}})}),at.fn.size=function(){return this.length},at.fn.andSelf=at.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return at});var oi=e.jQuery,ri=e.$;return at.noConflict=function(t){return e.$===at&&(e.$=ri),t&&e.jQuery===at&&(e.jQuery=oi),at},typeof t===xt&&(e.jQuery=e.$=at),at}),"undefined"==typeof jQuery)throw Error("Bootstrap's JavaScript requires jQuery");+function(e){"use strict";function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(void 0!==e.style[n])return{end:t[n]};return!1}e.fn.emulateTransitionEnd=function(t){var n=!1,i=this;e(this).one(e.support.transition.end,function(){n=!0});var a=function(){n||e(i).trigger(e.support.transition.end)};return setTimeout(a,t),this},e(function(){e.support.transition=t()})}(jQuery),+function(e){"use strict";var t='[data-dismiss="alert"]',n=function(n){e(n).on("click",t,this.close)};n.prototype.close=function(t){function n(){o.trigger("closed.bs.alert").remove()}var i=e(this),a=i.attr("data-target");a||(a=i.attr("href"),a=a&&a.replace(/.*(?=#[^\s]*$)/,""));var o=e(a);t&&t.preventDefault(),o.length||(o=i.hasClass("alert")?i:i.parent()),o.trigger(t=e.Event("close.bs.alert")),t.isDefaultPrevented()||(o.removeClass("in"),e.support.transition&&o.hasClass("fade")?o.one(e.support.transition.end,n).emulateTransitionEnd(150):n())};var i=e.fn.alert;e.fn.alert=function(t){return this.each(function(){var i=e(this),a=i.data("bs.alert");a||i.data("bs.alert",a=new n(this)),"string"==typeof t&&a[t].call(i)})},e.fn.alert.Constructor=n,e.fn.alert.noConflict=function(){return e.fn.alert=i,this},e(document).on("click.bs.alert.data-api",t,n.prototype.close)}(jQuery),+function(e){"use strict";var t=function(n,i){this.$element=e(n),this.options=e.extend({},t.DEFAULTS,i),this.isLoading=!1};t.DEFAULTS={loadingText:"loading..."},t.prototype.setState=function(t){var n="disabled",i=this.$element,a=i.is("input")?"val":"html",o=i.data();t+="Text",o.resetText||i.data("resetText",i[a]()),i[a](o[t]||this.options[t]),setTimeout(e.proxy(function(){"loadingText"==t?(this.isLoading=!0,i.addClass(n).attr(n,n)):this.isLoading&&(this.isLoading=!1,i.removeClass(n).removeAttr(n))},this),0)},t.prototype.toggle=function(){var e=!0,t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var n=this.$element.find("input");"radio"==n.prop("type")&&(n.prop("checked")&&this.$element.hasClass("active")?e=!1:t.find(".active").removeClass("active")),e&&n.prop("checked",!this.$element.hasClass("active")).trigger("change")}e&&this.$element.toggleClass("active")};var n=e.fn.button;e.fn.button=function(n){return this.each(function(){var i=e(this),a=i.data("bs.button"),o="object"==typeof n&&n;a||i.data("bs.button",a=new t(this,o)),"toggle"==n?a.toggle():n&&a.setState(n)})},e.fn.button.Constructor=t,e.fn.button.noConflict=function(){return e.fn.button=n,this},e(document).on("click.bs.button.data-api","[data-toggle^=button]",function(t){var n=e(t.target);n.hasClass("btn")||(n=n.closest(".btn")),n.button("toggle"),t.preventDefault()})}(jQuery),+function(e){"use strict";var t=function(t,n){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter",e.proxy(this.pause,this)).on("mouseleave",e.proxy(this.cycle,this))};t.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},t.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},t.prototype.getActiveIndex=function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},t.prototype.to=function(t){var n=this,i=this.getActiveIndex();return t>this.$items.length-1||0>t?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){n.to(t)}):i==t?this.pause().cycle():this.slide(t>i?"next":"prev",e(this.$items[t]))},t.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},t.prototype.next=function(){return this.sliding?void 0:this.slide("next")},t.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},t.prototype.slide=function(t,n){var i=this.$element.find(".item.active"),a=n||i[t](),o=this.interval,r="next"==t?"left":"right",s="next"==t?"first":"last",l=this;if(!a.length){if(!this.options.wrap)return;a=this.$element.find(".item")[s]()}if(a.hasClass("active"))return this.sliding=!1;var u=e.Event("slide.bs.carousel",{relatedTarget:a[0],direction:r});return this.$element.trigger(u),u.isDefaultPrevented()?void 0:(this.sliding=!0,o&&this.pause(),this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid.bs.carousel",function(){var t=e(l.$indicators.children()[l.getActiveIndex()]);t&&t.addClass("active")})),e.support.transition&&this.$element.hasClass("slide")?(a.addClass(t),a[0].offsetWidth,i.addClass(r),a.addClass(r),i.one(e.support.transition.end,function(){a.removeClass([t,r].join(" ")).addClass("active"),i.removeClass(["active",r].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger("slid.bs.carousel")},0)}).emulateTransitionEnd(1e3*i.css("transition-duration").slice(0,-1))):(i.removeClass("active"),a.addClass("active"),this.sliding=!1,this.$element.trigger("slid.bs.carousel")),o&&this.cycle(),this)};var n=e.fn.carousel;e.fn.carousel=function(n){return this.each(function(){var i=e(this),a=i.data("bs.carousel"),o=e.extend({},t.DEFAULTS,i.data(),"object"==typeof n&&n),r="string"==typeof n?n:o.slide;a||i.data("bs.carousel",a=new t(this,o)),"number"==typeof n?a.to(n):r?a[r]():o.interval&&a.pause().cycle()})},e.fn.carousel.Constructor=t,e.fn.carousel.noConflict=function(){return e.fn.carousel=n,this},e(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(t){var n,i=e(this),a=e(i.attr("data-target")||(n=i.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"")),o=e.extend({},a.data(),i.data()),r=i.attr("data-slide-to");r&&(o.interval=!1),a.carousel(o),(r=i.attr("data-slide-to"))&&a.data("bs.carousel").to(r),t.preventDefault()}),e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var t=e(this);t.carousel(t.data())})})}(jQuery),+function(e){"use strict";var t=function(n,i){this.$element=e(n),this.options=e.extend({},t.DEFAULTS,i),this.transitioning=null,this.options.parent&&(this.$parent=e(this.options.parent)),this.options.toggle&&this.toggle()};t.DEFAULTS={toggle:!0},t.prototype.dimension=function(){var e=this.$element.hasClass("width");return e?"width":"height"},t.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t=e.Event("show.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var n=this.$parent&&this.$parent.find("> .panel > .in");if(n&&n.length){var i=n.data("bs.collapse");if(i&&i.transitioning)return;n.collapse("hide"),i||n.data("bs.collapse",null)}var a=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[a](0),this.transitioning=1;var o=function(){this.$element.removeClass("collapsing").addClass("collapse in")[a]("auto"),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return o.call(this);var r=e.camelCase(["scroll",a].join("-"));this.$element.one(e.support.transition.end,e.proxy(o,this)).emulateTransitionEnd(350)[a](this.$element[0][r])}}},t.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=e.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var i=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return e.support.transition?void this.$element[n](0).one(e.support.transition.end,e.proxy(i,this)).emulateTransitionEnd(350):i.call(this)}}},t.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var n=e.fn.collapse;e.fn.collapse=function(n){return this.each(function(){var i=e(this),a=i.data("bs.collapse"),o=e.extend({},t.DEFAULTS,i.data(),"object"==typeof n&&n);!a&&o.toggle&&"show"==n&&(n=!n),a||i.data("bs.collapse",a=new t(this,o)),"string"==typeof n&&a[n]()})},e.fn.collapse.Constructor=t,e.fn.collapse.noConflict=function(){return e.fn.collapse=n,this},e(document).on("click.bs.collapse.data-api","[data-toggle=collapse]",function(t){var n,i=e(this),a=i.attr("data-target")||t.preventDefault()||(n=i.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""),o=e(a),r=o.data("bs.collapse"),s=r?"toggle":i.data(),l=i.attr("data-parent"),u=l&&e(l);r&&r.transitioning||(u&&u.find('[data-toggle=collapse][data-parent="'+l+'"]').not(i).addClass("collapsed"),i[o.hasClass("in")?"addClass":"removeClass"]("collapsed")),o.collapse(s)})}(jQuery),+function(e){"use strict";function t(t){e(i).remove(),e(a).each(function(){var i=n(e(this)),a={relatedTarget:this};i.hasClass("open")&&(i.trigger(t=e.Event("hide.bs.dropdown",a)),t.isDefaultPrevented()||i.removeClass("open").trigger("hidden.bs.dropdown",a))})}function n(t){var n=t.attr("data-target");n||(n=t.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var i=n&&e(n);return i&&i.length?i:t.parent()}var i=".dropdown-backdrop",a="[data-toggle=dropdown]",o=function(t){e(t).on("click.bs.dropdown",this.toggle)};o.prototype.toggle=function(i){var a=e(this);if(!a.is(".disabled, :disabled")){var o=n(a),r=o.hasClass("open");if(t(),!r){"ontouchstart"in document.documentElement&&!o.closest(".navbar-nav").length&&e('<div class="dropdown-backdrop"/>').insertAfter(e(this)).on("click",t);var s={relatedTarget:this};if(o.trigger(i=e.Event("show.bs.dropdown",s)),i.isDefaultPrevented())return;o.toggleClass("open").trigger("shown.bs.dropdown",s),a.focus()}return!1}},o.prototype.keydown=function(t){if(/(38|40|27)/.test(t.keyCode)){var i=e(this);if(t.preventDefault(),t.stopPropagation(),!i.is(".disabled, :disabled")){var o=n(i),r=o.hasClass("open");if(!r||r&&27==t.keyCode)return 27==t.which&&o.find(a).focus(),i.click();var s=" li:not(.divider):visible a",l=o.find("[role=menu]"+s+", [role=listbox]"+s);if(l.length){var u=l.index(l.filter(":focus"));38==t.keyCode&&u>0&&u--,40==t.keyCode&&l.length-1>u&&u++,~u||(u=0),l.eq(u).focus()}}}};var r=e.fn.dropdown;e.fn.dropdown=function(t){return this.each(function(){var n=e(this),i=n.data("bs.dropdown");i||n.data("bs.dropdown",i=new o(this)),"string"==typeof t&&i[t].call(n)})},e.fn.dropdown.Constructor=o,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=r,this},e(document).on("click.bs.dropdown.data-api",t).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",a,o.prototype.toggle).on("keydown.bs.dropdown.data-api",a+", [role=menu], [role=listbox]",o.prototype.keydown)}(jQuery),+function(e){"use strict";var t=function(t,n){this.options=n,this.$element=e(t),this.$backdrop=this.isShown=null,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};t.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},t.prototype.toggle=function(e){return this[this.isShown?"hide":"show"](e)},t.prototype.show=function(t){var n=this,i=e.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(i),this.isShown||i.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.backdrop(function(){var i=e.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(document.body),n.$element.show().scrollTop(0),i&&n.$element[0].offsetWidth,n.$element.addClass("in").attr("aria-hidden",!1),n.enforceFocus();var a=e.Event("shown.bs.modal",{relatedTarget:t});i?n.$element.find(".modal-dialog").one(e.support.transition.end,function(){n.$element.focus().trigger(a)}).emulateTransitionEnd(300):n.$element.focus().trigger(a)}))},t.prototype.hide=function(t){t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one(e.support.transition.end,e.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},t.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.focus()},this))},t.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",e.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},t.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.removeBackdrop(),e.$element.trigger("hidden.bs.modal")})},t.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},t.prototype.backdrop=function(t){var n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=e.support.transition&&n;if(this.$backdrop=e('<div class="modal-backdrop '+n+'" />').appendTo(document.body),this.$element.on("click.dismiss.bs.modal",e.proxy(function(e){e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;i?this.$backdrop.one(e.support.transition.end,t).emulateTransitionEnd(150):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,t).emulateTransitionEnd(150):t()):t&&t()};var n=e.fn.modal;e.fn.modal=function(n,i){return this.each(function(){var a=e(this),o=a.data("bs.modal"),r=e.extend({},t.DEFAULTS,a.data(),"object"==typeof n&&n);o||a.data("bs.modal",o=new t(this,r)),"string"==typeof n?o[n](i):r.show&&o.show(i)})},e.fn.modal.Constructor=t,e.fn.modal.noConflict=function(){return e.fn.modal=n,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(t){var n=e(this),i=n.attr("href"),a=e(n.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),o=a.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(i)&&i},a.data(),n.data());n.is("a")&&t.preventDefault(),a.modal(o,this).one("hide",function(){n.is(":visible")&&n.focus()})}),e(document).on("show.bs.modal",".modal",function(){e(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){e(document.body).removeClass("modal-open")})}(jQuery),+function(e){"use strict";var t=function(e,t){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",e,t)};t.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},t.prototype.init=function(t,n,i){this.enabled=!0,this.type=t,this.$element=e(n),this.options=this.getOptions(i);for(var a=this.options.trigger.split(" "),o=a.length;o--;){var r=a[o];if("click"==r)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=r){var s="hover"==r?"mouseenter":"focusin",l="hover"==r?"mouseleave":"focusout";this.$element.on(s+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},t.prototype.getDelegateOptions=function(){var t={},n=this.getDefaults();return this._options&&e.each(this._options,function(e,i){n[e]!=i&&(t[e]=i)}),t},t.prototype.enter=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void(n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show()},t.prototype.leave=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void(n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide()},t.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){if(this.$element.trigger(t),t.isDefaultPrevented())return;var n=this,i=this.tip();this.setContent(),this.options.animation&&i.addClass("fade");var a="function"==typeof this.options.placement?this.options.placement.call(this,i[0],this.$element[0]):this.options.placement,o=/\s?auto?\s?/i,r=o.test(a);r&&(a=a.replace(o,"")||"top"),i.detach().css({top:0,left:0,display:"block"}).addClass(a),this.options.container?i.appendTo(this.options.container):i.insertAfter(this.$element);var s=this.getPosition(),l=i[0].offsetWidth,u=i[0].offsetHeight;if(r){var d=this.$element.parent(),c=a,h=document.documentElement.scrollTop||document.body.scrollTop,f="body"==this.options.container?window.innerWidth:d.outerWidth(),p="body"==this.options.container?window.innerHeight:d.outerHeight(),m="body"==this.options.container?0:d.offset().left;a="bottom"==a&&s.top+s.height+u-h>p?"top":"top"==a&&0>s.top-h-u?"bottom":"right"==a&&s.right+l>f?"left":"left"==a&&m>s.left-l?"right":a,i.removeClass(c).addClass(a)}var g=this.getCalculatedOffset(a,s,l,u);this.applyPlacement(g,a),this.hoverState=null;var v=function(){n.$element.trigger("shown.bs."+n.type)};e.support.transition&&this.$tip.hasClass("fade")?i.one(e.support.transition.end,v).emulateTransitionEnd(150):v()}},t.prototype.applyPlacement=function(t,n){var i,a=this.tip(),o=a[0].offsetWidth,r=a[0].offsetHeight,s=parseInt(a.css("margin-top"),10),l=parseInt(a.css("margin-left"),10);isNaN(s)&&(s=0),isNaN(l)&&(l=0),t.top=t.top+s,t.left=t.left+l,e.offset.setOffset(a[0],e.extend({using:function(e){a.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),a.addClass("in");var u=a[0].offsetWidth,d=a[0].offsetHeight;if("top"==n&&d!=r&&(i=!0,t.top=t.top+r-d),/bottom|top/.test(n)){var c=0;0>t.left&&(c=-2*t.left,t.left=0,a.offset(t),u=a[0].offsetWidth,d=a[0].offsetHeight),this.replaceArrow(c-o+u,u,"left")}else this.replaceArrow(d-r,d,"top");i&&a.offset(t)},t.prototype.replaceArrow=function(e,t,n){this.arrow().css(n,e?50*(1-e/t)+"%":"")},t.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},t.prototype.hide=function(){function t(){"in"!=n.hoverState&&i.detach(),n.$element.trigger("hidden.bs."+n.type)}var n=this,i=this.tip(),a=e.Event("hide.bs."+this.type);return this.$element.trigger(a),a.isDefaultPrevented()?void 0:(i.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?i.one(e.support.transition.end,t).emulateTransitionEnd(150):t(),this.hoverState=null,this)},t.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},t.prototype.hasContent=function(){return this.getTitle()},t.prototype.getPosition=function(){var t=this.$element[0];return e.extend({},"function"==typeof t.getBoundingClientRect?t.getBoundingClientRect():{width:t.offsetWidth,height:t.offsetHeight},this.$element.offset())},t.prototype.getCalculatedOffset=function(e,t,n,i){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-n/2}:"top"==e?{top:t.top-i,left:t.left+t.width/2-n/2}:"left"==e?{top:t.top+t.height/2-i/2,left:t.left-n}:{top:t.top+t.height/2-i/2,left:t.left+t.width}},t.prototype.getTitle=function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||("function"==typeof n.title?n.title.call(t[0]):n.title)},t.prototype.tip=function(){return this.$tip=this.$tip||e(this.options.template)},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},t.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},t.prototype.enable=function(){this.enabled=!0},t.prototype.disable=function(){this.enabled=!1},t.prototype.toggleEnabled=function(){this.enabled=!this.enabled},t.prototype.toggle=function(t){var n=t?e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;n.tip().hasClass("in")?n.leave(n):n.enter(n)},t.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var n=e.fn.tooltip;e.fn.tooltip=function(n){return this.each(function(){var i=e(this),a=i.data("bs.tooltip"),o="object"==typeof n&&n;(a||"destroy"!=n)&&(a||i.data("bs.tooltip",a=new t(this,o)),"string"==typeof n&&a[n]())})},e.fn.tooltip.Constructor=t,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=n,this}}(jQuery),+function(e){"use strict";var t=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw Error("Popover requires tooltip.js");t.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),t.prototype.constructor=t,t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content")[this.options.html?"string"==typeof n?"html":"append":"text"](n),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},t.prototype.hasContent=function(){return this.getTitle()||this.getContent()},t.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},t.prototype.tip=function(){return this.$tip||(this.$tip=e(this.options.template)),this.$tip};var n=e.fn.popover;e.fn.popover=function(n){return this.each(function(){var i=e(this),a=i.data("bs.popover"),o="object"==typeof n&&n;(a||"destroy"!=n)&&(a||i.data("bs.popover",a=new t(this,o)),"string"==typeof n&&a[n]())})},e.fn.popover.Constructor=t,e.fn.popover.noConflict=function(){return e.fn.popover=n,this}}(jQuery),+function(e){"use strict";function t(n,i){var a,o=e.proxy(this.process,this);this.$element=e(e(n).is("body")?window:n),this.$body=e("body"),this.$scrollElement=this.$element.on("scroll.bs.scroll-spy.data-api",o),this.options=e.extend({},t.DEFAULTS,i),this.selector=(this.options.target||(a=e(n).attr("href"))&&a.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.offsets=e([]),this.targets=e([]),this.activeTarget=null,this.refresh(),this.process()}t.DEFAULTS={offset:10},t.prototype.refresh=function(){var t=this.$element[0]==window?"offset":"position";this.offsets=e([]),this.targets=e([]);var n=this;this.$body.find(this.selector).map(function(){var i=e(this),a=i.data("target")||i.attr("href"),o=/^#./.test(a)&&e(a);return o&&o.length&&o.is(":visible")&&[[o[t]().top+(!e.isWindow(n.$scrollElement.get(0))&&n.$scrollElement.scrollTop()),a]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){n.offsets.push(this[0]),n.targets.push(this[1])})},t.prototype.process=function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,n=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,i=n-this.$scrollElement.height(),a=this.offsets,o=this.targets,r=this.activeTarget;if(t>=i)return r!=(e=o.last()[0])&&this.activate(e);if(r&&a[0]>=t)return r!=(e=o[0])&&this.activate(e);for(e=a.length;e--;)r!=o[e]&&t>=a[e]&&(!a[e+1]||a[e+1]>=t)&&this.activate(o[e])},t.prototype.activate=function(t){this.activeTarget=t,e(this.selector).parentsUntil(this.options.target,".active").removeClass("active");var n=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',i=e(n).parents("li").addClass("active");i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active")),i.trigger("activate.bs.scrollspy")};var n=e.fn.scrollspy;e.fn.scrollspy=function(n){return this.each(function(){var i=e(this),a=i.data("bs.scrollspy"),o="object"==typeof n&&n;a||i.data("bs.scrollspy",a=new t(this,o)),"string"==typeof n&&a[n]()})},e.fn.scrollspy.Constructor=t,e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=n,this},e(window).on("load",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);t.scrollspy(t.data())})})}(jQuery),+function(e){"use strict";var t=function(t){this.element=e(t)};t.prototype.show=function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),i=t.data("target");if(i||(i=t.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var a=n.find(".active:last a")[0],o=e.Event("show.bs.tab",{relatedTarget:a});if(t.trigger(o),!o.isDefaultPrevented()){var r=e(i);this.activate(t.parent("li"),n),this.activate(r,r.parent(),function(){t.trigger({type:"shown.bs.tab",relatedTarget:a})})}}},t.prototype.activate=function(t,n,i){function a(){o.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),t.addClass("active"),r?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active"),i&&i()}var o=n.find("> .active"),r=i&&e.support.transition&&o.hasClass("fade");r?o.one(e.support.transition.end,a).emulateTransitionEnd(150):a(),o.removeClass("in")};var n=e.fn.tab;e.fn.tab=function(n){return this.each(function(){var i=e(this),a=i.data("bs.tab");a||i.data("bs.tab",a=new t(this)),"string"==typeof n&&a[n]()})},e.fn.tab.Constructor=t,e.fn.tab.noConflict=function(){return e.fn.tab=n,this},e(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(t){t.preventDefault(),e(this).tab("show")})}(jQuery),+function(e){"use strict";var t=function(n,i){this.options=e.extend({},t.DEFAULTS,i),this.$window=e(window).on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this)),this.$element=e(n),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};t.RESET="affix affix-top affix-bottom",t.DEFAULTS={offset:0},t.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(t.RESET).addClass("affix");var e=this.$window.scrollTop(),n=this.$element.offset();return this.pinnedOffset=n.top-e},t.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)},t.prototype.checkPosition=function(){if(this.$element.is(":visible")){var n=e(document).height(),i=this.$window.scrollTop(),a=this.$element.offset(),o=this.options.offset,r=o.top,s=o.bottom;"top"==this.affixed&&(a.top+=i),"object"!=typeof o&&(s=r=o),"function"==typeof r&&(r=o.top(this.$element)),"function"==typeof s&&(s=o.bottom(this.$element));var l=null!=this.unpin&&i+this.unpin<=a.top?!1:null!=s&&a.top+this.$element.height()>=n-s?"bottom":null!=r&&r>=i?"top":!1;if(this.affixed!==l){this.unpin&&this.$element.css("top","");var u="affix"+(l?"-"+l:""),d=e.Event(u+".bs.affix");this.$element.trigger(d),d.isDefaultPrevented()||(this.affixed=l,this.unpin="bottom"==l?this.getPinnedOffset():null,this.$element.removeClass(t.RESET).addClass(u).trigger(e.Event(u.replace("affix","affixed"))),"bottom"==l&&this.$element.offset({top:n-s-this.$element.height()}))}}};var n=e.fn.affix;e.fn.affix=function(n){return this.each(function(){var i=e(this),a=i.data("bs.affix"),o="object"==typeof n&&n;a||i.data("bs.affix",a=new t(this,o)),"string"==typeof n&&a[n]()})},e.fn.affix.Constructor=t,e.fn.affix.noConflict=function(){return e.fn.affix=n,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var t=e(this),n=t.data();n.offset=n.offset||{},n.offsetBottom&&(n.offset.bottom=n.offsetBottom),n.offsetTop&&(n.offset.top=n.offsetTop),t.affix(n)})})}(jQuery),!window.addEventListener&&function(e,t,n,i,a,o,r){e[i]=t[i]=n[i]=function(e,t){var n=this;r.unshift([n,e,t,function(i){"blur"!==e&&(i.currentTarget=n,i.preventDefault=function(){i.returnValue=!1},i.stopPropagation=function(){i.cancelBubble=!0},i.target=i.srcElement||n,t.call(n,i))}]),this.attachEvent("on"+e,r[0][3])},e[a]=t[a]=n[a]=function(e,t){for(var n,i=0;n=r[i];++i)if(n[0]==this&&n[1]==e&&n[2]==t)return this.detachEvent("on"+e,r.splice(i,1)[0][3])},e[o]=t[o]=n[o]=function(e){return this.fireEvent("on"+e.type,e)}}(Window.prototype,HTMLDocument.prototype,Element.prototype,"addEventListener","removeEventListener","dispatchEvent",[]),Object.keys||(Object.keys=function(){"use strict";var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],i=n.length;return function(a){if("object"!=typeof a&&("function"!=typeof a||null===a))throw new TypeError("Object.keys called on non-object");var o,r,s=[];for(o in a)e.call(a,o)&&s.push(o);if(t)for(r=0;i>r;r++)e.call(a,n[r])&&s.push(n[r]);return s}}()),Array.prototype.reduce||(Array.prototype.reduce=function(e){"use strict";if(null==this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof e)throw new TypeError(e+" is not a function");var t,n=Object(this),i=n.length>>>0,a=0;if(2==arguments.length)t=arguments[1];else{for(;i>a&&!a in n;)a++;if(a>=i)throw new TypeError("Reduce of empty array with no initial value");t=n[a++]}for(;i>a;a++)a in n&&(t=e(t,n[a],a,n));return t}),function(e){function t(e,t,n){switch(arguments.length){case 2:return null!=e?e:t;case 3:return null!=e?e:null!=t?t:n;default:throw Error("Implement me")}}function n(e,t){return Pt.call(e,t)}function i(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function a(e){kt.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function o(e,t){var n=!0;return p(function(){return n&&(a(e),n=!1),t.apply(this,arguments)},t)}function r(e,t){bn[e]||(a(t),bn[e]=!0)}function s(e,t){return function(n){return v(e.call(this,n),t)}}function l(e,t){return function(n){return this.localeData().ordinal(e.call(this,n),t)}}function u(e,t){var n,i,a=12*(t.year()-e.year())+(t.month()-e.month()),o=e.clone().add(a,"months");return 0>t-o?(n=e.clone().add(a-1,"months"),i=(t-o)/(o-n)):(n=e.clone().add(a+1,"months"),i=(t-o)/(n-o)),-(a+i)}function d(e,t,n){var i;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?(i=e.isPM(n),i&&12>t&&(t+=12),i||12!==t||(t=0),t):t}function c(){}function h(e,t){t!==!1&&O(e),m(this,e),this._d=new Date(+e._d),kn===!1&&(kn=!0,kt.updateOffset(this),kn=!1)
}function f(e){var t=M(e),n=t.year||0,i=t.quarter||0,a=t.month||0,o=t.week||0,r=t.day||0,s=t.hour||0,l=t.minute||0,u=t.second||0,d=t.millisecond||0;this._milliseconds=+d+1e3*u+6e4*l+36e5*s,this._days=+r+7*o,this._months=+a+3*i+12*n,this._data={},this._locale=kt.localeData(),this._bubble()}function p(e,t){for(var i in t)n(t,i)&&(e[i]=t[i]);return n(t,"toString")&&(e.toString=t.toString),n(t,"valueOf")&&(e.valueOf=t.valueOf),e}function m(e,t){var n,i,a;if(t._isAMomentObject!==void 0&&(e._isAMomentObject=t._isAMomentObject),t._i!==void 0&&(e._i=t._i),t._f!==void 0&&(e._f=t._f),t._l!==void 0&&(e._l=t._l),t._strict!==void 0&&(e._strict=t._strict),t._tzm!==void 0&&(e._tzm=t._tzm),t._isUTC!==void 0&&(e._isUTC=t._isUTC),t._offset!==void 0&&(e._offset=t._offset),t._pf!==void 0&&(e._pf=t._pf),t._locale!==void 0&&(e._locale=t._locale),jt.length>0)for(n in jt)i=jt[n],a=t[i],a!==void 0&&(e[i]=a);return e}function g(e){return 0>e?Math.ceil(e):Math.floor(e)}function v(e,t,n){for(var i=""+Math.abs(e),a=e>=0;t>i.length;)i="0"+i;return(a?n?"+":"":"-")+i}function y(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function b(e,t){var n;return t=A(t,e),e.isBefore(t)?n=y(e,t):(n=y(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n}function w(e,t){return function(n,i){var a,o;return null===i||isNaN(+i)||(r(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),o=n,n=i,i=o),n="string"==typeof n?+n:n,a=kt.duration(n,i),k(this,a,e),this}}function k(e,t,n,i){var a=t._milliseconds,o=t._days,r=t._months;i=null==i?!0:i,a&&e._d.setTime(+e._d+a*n),o&&mt(e,"Date",pt(e,"Date")+o*n),r&&ft(e,pt(e,"Month")+r*n),i&&kt.updateOffset(e,o||r)}function D(e){return"[object Array]"===Object.prototype.toString.call(e)}function x(e){return"[object Date]"===Object.prototype.toString.call(e)||e instanceof Date}function C(e,t,n){var i,a=Math.min(e.length,t.length),o=Math.abs(e.length-t.length),r=0;for(i=0;a>i;i++)(n&&e[i]!==t[i]||!n&&F(e[i])!==F(t[i]))&&r++;return r+o}function T(e){if(e){var t=e.toLowerCase().replace(/(.)s$/,"$1");e=hn[e]||fn[t]||t}return e}function M(e){var t,i,a={};for(i in e)n(e,i)&&(t=T(i),t&&(a[t]=e[i]));return a}function P(t){var n,i;if(0===t.indexOf("week"))n=7,i="day";else{if(0!==t.indexOf("month"))return;n=12,i="month"}kt[t]=function(a,o){var r,s,l=kt._locale[t],u=[];if("number"==typeof a&&(o=a,a=e),s=function(e){var t=kt().utc().set(i,e);return l.call(kt._locale,t,a||"")},null!=o)return s(o);for(r=0;n>r;r++)u.push(s(r));return u}}function F(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=t>=0?Math.floor(t):Math.ceil(t)),n}function _(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function S(e,t,n){return ut(kt([e,11,31+t-n]),t,n).week}function E(e){return N(e)?366:365}function N(e){return 0===e%4&&0!==e%100||0===e%400}function O(e){var t;e._a&&-2===e._pf.overflow&&(t=0>e._a[_t]||e._a[_t]>11?_t:1>e._a[St]||e._a[St]>_(e._a[Ft],e._a[_t])?St:0>e._a[Et]||e._a[Et]>24||24===e._a[Et]&&(0!==e._a[Nt]||0!==e._a[Ot]||0!==e._a[$t])?Et:0>e._a[Nt]||e._a[Nt]>59?Nt:0>e._a[Ot]||e._a[Ot]>59?Ot:0>e._a[$t]||e._a[$t]>999?$t:-1,e._pf._overflowDayOfYear&&(Ft>t||t>St)&&(t=St),e._pf.overflow=t)}function $(t){return null==t._isValid&&(t._isValid=!isNaN(t._d.getTime())&&0>t._pf.overflow&&!t._pf.empty&&!t._pf.invalidMonth&&!t._pf.nullInput&&!t._pf.invalidFormat&&!t._pf.userInvalidated,t._strict&&(t._isValid=t._isValid&&0===t._pf.charsLeftOver&&0===t._pf.unusedTokens.length&&t._pf.bigHour===e)),t._isValid}function I(e){return e?e.toLowerCase().replace("_","-"):e}function j(e){for(var t,n,i,a,o=0;e.length>o;){for(a=I(e[o]).split("-"),t=a.length,n=I(e[o+1]),n=n?n.split("-"):null;t>0;){if(i=L(a.slice(0,t).join("-")))return i;if(n&&n.length>=t&&C(a,n,!0)>=t-1)break;t--}o++}return null}function L(e){var t=null;if(!It[e]&&Lt)try{t=kt.locale(),require("./locale/"+e),kt.locale(t)}catch(n){}return It[e]}function A(e,t){var n,i;return t._isUTC?(n=t.clone(),i=(kt.isMoment(e)||x(e)?+e:+kt(e))-+n,n._d.setTime(+n._d+i),kt.updateOffset(n,!1),n):kt(e).local()}function R(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function V(e){var t,n,i=e.match(Ht);for(t=0,n=i.length;n>t;t++)i[t]=yn[i[t]]?yn[i[t]]:R(i[t]);return function(a){var o="";for(t=0;n>t;t++)o+=i[t]instanceof Function?i[t].call(a,e):i[t];return o}}function H(e,t){return e.isValid()?(t=B(t,e.localeData()),pn[t]||(pn[t]=V(t)),pn[t](e)):e.localeData().invalidDate()}function B(e,t){function n(e){return t.longDateFormat(e)||e}var i=5;for(Bt.lastIndex=0;i>=0&&Bt.test(e);)e=e.replace(Bt,n),Bt.lastIndex=0,i-=1;return e}function z(e,t){var n,i=t._strict;switch(e){case"Q":return Zt;case"DDDD":return tn;case"YYYY":case"GGGG":case"gggg":return i?nn:qt;case"Y":case"G":case"g":return on;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return i?an:Wt;case"S":if(i)return Zt;case"SS":if(i)return en;case"SSS":if(i)return tn;case"DDD":return Ut;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Yt;case"a":case"A":return t._locale._meridiemParse;case"x":return Xt;case"X":return Kt;case"Z":case"ZZ":return Gt;case"T":return Qt;case"SSSS":return Jt;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return i?en:zt;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return zt;case"Do":return i?t._locale._ordinalParse:t._locale._ordinalParseLenient;default:return n=RegExp(K(X(e.replace("\\","")),"i"))}}function U(e){e=e||"";var t=e.match(Gt)||[],n=t[t.length-1]||[],i=(n+"").match(dn)||["-",0,0],a=+(60*i[1])+F(i[2]);return"+"===i[0]?a:-a}function q(e,t,n){var i,a=n._a;switch(e){case"Q":null!=t&&(a[_t]=3*(F(t)-1));break;case"M":case"MM":null!=t&&(a[_t]=F(t)-1);break;case"MMM":case"MMMM":i=n._locale.monthsParse(t,e,n._strict),null!=i?a[_t]=i:n._pf.invalidMonth=t;break;case"D":case"DD":null!=t&&(a[St]=F(t));break;case"Do":null!=t&&(a[St]=F(parseInt(t.match(/\d{1,2}/)[0],10)));break;case"DDD":case"DDDD":null!=t&&(n._dayOfYear=F(t));break;case"YY":a[Ft]=kt.parseTwoDigitYear(t);break;case"YYYY":case"YYYYY":case"YYYYYY":a[Ft]=F(t);break;case"a":case"A":n._meridiem=t;break;case"h":case"hh":n._pf.bigHour=!0;case"H":case"HH":a[Et]=F(t);break;case"m":case"mm":a[Nt]=F(t);break;case"s":case"ss":a[Ot]=F(t);break;case"S":case"SS":case"SSS":case"SSSS":a[$t]=F(1e3*("0."+t));break;case"x":n._d=new Date(F(t));break;case"X":n._d=new Date(1e3*parseFloat(t));break;case"Z":case"ZZ":n._useUTC=!0,n._tzm=U(t);break;case"dd":case"ddd":case"dddd":i=n._locale.weekdaysParse(t),null!=i?(n._w=n._w||{},n._w.d=i):n._pf.invalidWeekday=t;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":e=e.substr(0,1);case"gggg":case"GGGG":case"GGGGG":e=e.substr(0,2),t&&(n._w=n._w||{},n._w[e]=F(t));break;case"gg":case"GG":n._w=n._w||{},n._w[e]=kt.parseTwoDigitYear(t)}}function W(e){var n,i,a,o,r,s,l;n=e._w,null!=n.GG||null!=n.W||null!=n.E?(r=1,s=4,i=t(n.GG,e._a[Ft],ut(kt(),1,4).year),a=t(n.W,1),o=t(n.E,1)):(r=e._locale._week.dow,s=e._locale._week.doy,i=t(n.gg,e._a[Ft],ut(kt(),r,s).year),a=t(n.w,1),null!=n.d?(o=n.d,r>o&&++a):o=null!=n.e?n.e+r:r),l=dt(i,a,o,s,r),e._a[Ft]=l.year,e._dayOfYear=l.dayOfYear}function J(e){var n,i,a,o,r=[];if(!e._d){for(a=G(e),e._w&&null==e._a[St]&&null==e._a[_t]&&W(e),e._dayOfYear&&(o=t(e._a[Ft],a[Ft]),e._dayOfYear>E(o)&&(e._pf._overflowDayOfYear=!0),i=ot(o,0,e._dayOfYear),e._a[_t]=i.getUTCMonth(),e._a[St]=i.getUTCDate()),n=0;3>n&&null==e._a[n];++n)e._a[n]=r[n]=a[n];for(;7>n;n++)e._a[n]=r[n]=null==e._a[n]?2===n?1:0:e._a[n];24===e._a[Et]&&0===e._a[Nt]&&0===e._a[Ot]&&0===e._a[$t]&&(e._nextDay=!0,e._a[Et]=0),e._d=(e._useUTC?ot:at).apply(null,r),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Et]=24)}}function Y(e){var t;e._d||(t=M(e._i),e._a=[t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],J(e))}function G(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function Q(t){if(t._f===kt.ISO_8601)return void et(t);t._a=[],t._pf.empty=!0;var n,i,a,o,r,s=""+t._i,l=s.length,u=0;for(a=B(t._f,t._locale).match(Ht)||[],n=0;a.length>n;n++)o=a[n],i=(s.match(z(o,t))||[])[0],i&&(r=s.substr(0,s.indexOf(i)),r.length>0&&t._pf.unusedInput.push(r),s=s.slice(s.indexOf(i)+i.length),u+=i.length),yn[o]?(i?t._pf.empty=!1:t._pf.unusedTokens.push(o),q(o,i,t)):t._strict&&!i&&t._pf.unusedTokens.push(o);t._pf.charsLeftOver=l-u,s.length>0&&t._pf.unusedInput.push(s),t._pf.bigHour===!0&&12>=t._a[Et]&&(t._pf.bigHour=e),t._a[Et]=d(t._locale,t._a[Et],t._meridiem),J(t),O(t)}function X(e){return e.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,i,a){return t||n||i||a})}function K(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Z(e){var t,n,a,o,r;if(0===e._f.length)return e._pf.invalidFormat=!0,void(e._d=new Date(0/0));for(o=0;e._f.length>o;o++)r=0,t=m({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._pf=i(),t._f=e._f[o],Q(t),$(t)&&(r+=t._pf.charsLeftOver,r+=10*t._pf.unusedTokens.length,t._pf.score=r,(null==a||a>r)&&(a=r,n=t));p(e,n||t)}function et(e){var t,n,i=e._i,a=rn.exec(i);if(a){for(e._pf.iso=!0,t=0,n=ln.length;n>t;t++)if(ln[t][1].exec(i)){e._f=ln[t][0]+(a[6]||" ");break}for(t=0,n=un.length;n>t;t++)if(un[t][1].exec(i)){e._f+=un[t][0];break}i.match(Gt)&&(e._f+="Z"),Q(e)}else e._isValid=!1}function tt(e){et(e),e._isValid===!1&&(delete e._isValid,kt.createFromInputFallback(e))}function nt(e,t){var n,i=[];for(n=0;e.length>n;++n)i.push(t(e[n],n));return i}function it(t){var n,i=t._i;i===e?t._d=new Date:x(i)?t._d=new Date(+i):null!==(n=At.exec(i))?t._d=new Date(+n[1]):"string"==typeof i?tt(t):D(i)?(t._a=nt(i.slice(0),function(e){return parseInt(e,10)}),J(t)):"object"==typeof i?Y(t):"number"==typeof i?t._d=new Date(i):kt.createFromInputFallback(t)}function at(e,t,n,i,a,o,r){var s=new Date(e,t,n,i,a,o,r);return 1970>e&&s.setFullYear(e),s}function ot(e){var t=new Date(Date.UTC.apply(null,arguments));return 1970>e&&t.setUTCFullYear(e),t}function rt(e,t){if("string"==typeof e)if(isNaN(e)){if(e=t.weekdaysParse(e),"number"!=typeof e)return null}else e=parseInt(e,10);return e}function st(e,t,n,i,a){return a.relativeTime(t||1,!!n,e,i)}function lt(e,t,n){var i=kt.duration(e).abs(),a=Mt(i.as("s")),o=Mt(i.as("m")),r=Mt(i.as("h")),s=Mt(i.as("d")),l=Mt(i.as("M")),u=Mt(i.as("y")),d=mn.s>a&&["s",a]||1===o&&["m"]||mn.m>o&&["mm",o]||1===r&&["h"]||mn.h>r&&["hh",r]||1===s&&["d"]||mn.d>s&&["dd",s]||1===l&&["M"]||mn.M>l&&["MM",l]||1===u&&["y"]||["yy",u];return d[2]=t,d[3]=+e>0,d[4]=n,st.apply({},d)}function ut(e,t,n){var i,a=n-t,o=n-e.day();return o>a&&(o-=7),a-7>o&&(o+=7),i=kt(e).add(o,"d"),{week:Math.ceil(i.dayOfYear()/7),year:i.year()}}function dt(e,t,n,i,a){var o,r,s=ot(e,0,1).getUTCDay();return s=0===s?7:s,n=null!=n?n:a,o=a-s+(s>i?7:0)-(a>s?7:0),r=7*(t-1)+(n-a)+o+1,{year:r>0?e:e-1,dayOfYear:r>0?r:E(e-1)+r}}function ct(t){var n,i=t._i,a=t._f;return t._locale=t._locale||kt.localeData(t._l),null===i||a===e&&""===i?kt.invalid({nullInput:!0}):("string"==typeof i&&(t._i=i=t._locale.preparse(i)),kt.isMoment(i)?new h(i,!0):(a?D(a)?Z(t):Q(t):it(t),n=new h(t),n._nextDay&&(n.add(1,"d"),n._nextDay=e),n))}function ht(e,t){var n,i;if(1===t.length&&D(t[0])&&(t=t[0]),!t.length)return kt();for(n=t[0],i=1;t.length>i;++i)t[i][e](n)&&(n=t[i]);return n}function ft(e,t){var n;return"string"==typeof t&&(t=e.localeData().monthsParse(t),"number"!=typeof t)?e:(n=Math.min(e.date(),_(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e)}function pt(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function mt(e,t,n){return"Month"===t?ft(e,n):e._d["set"+(e._isUTC?"UTC":"")+t](n)}function gt(e,t){return function(n){return null!=n?(mt(this,e,n),kt.updateOffset(this,t),this):pt(this,e)}}function vt(e){return 400*e/146097}function yt(e){return 146097*e/400}function bt(e){kt.duration.fn[e]=function(){return this._data[e]}}function wt(e){"undefined"==typeof ender&&(Dt=Tt.moment,Tt.moment=e?o("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",kt):kt)}for(var kt,Dt,xt,Ct="2.9.0",Tt="undefined"==typeof global||"undefined"!=typeof window&&window!==global.window?this:global,Mt=Math.round,Pt=Object.prototype.hasOwnProperty,Ft=0,_t=1,St=2,Et=3,Nt=4,Ot=5,$t=6,It={},jt=[],Lt="undefined"!=typeof module&&module&&module.exports,At=/^\/?Date\((\-?\d+)/i,Rt=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Vt=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,Ht=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,Bt=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,zt=/\d\d?/,Ut=/\d{1,3}/,qt=/\d{1,4}/,Wt=/[+\-]?\d{1,6}/,Jt=/\d+/,Yt=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Gt=/Z|[\+\-]\d\d:?\d\d/gi,Qt=/T/i,Xt=/[\+\-]?\d+/,Kt=/[\+\-]?\d+(\.\d{1,3})?/,Zt=/\d/,en=/\d\d/,tn=/\d{3}/,nn=/\d{4}/,an=/[+-]?\d{6}/,on=/[+-]?\d+/,rn=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,sn="YYYY-MM-DDTHH:mm:ssZ",ln=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],un=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],dn=/([\+\-]|\d\d)/gi,cn=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),hn={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},fn={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},pn={},mn={s:45,m:45,h:22,d:26,M:11},gn="DDD w W M D d".split(" "),vn="M D H h m s w W".split(" "),yn={M:function(){return this.month()+1},MMM:function(e){return this.localeData().monthsShort(this,e)},MMMM:function(e){return this.localeData().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.localeData().weekdaysMin(this,e)},ddd:function(e){return this.localeData().weekdaysShort(this,e)},dddd:function(e){return this.localeData().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return v(this.year()%100,2)},YYYY:function(){return v(this.year(),4)},YYYYY:function(){return v(this.year(),5)},YYYYYY:function(){var e=this.year(),t=e>=0?"+":"-";return t+v(Math.abs(e),6)},gg:function(){return v(this.weekYear()%100,2)},gggg:function(){return v(this.weekYear(),4)},ggggg:function(){return v(this.weekYear(),5)},GG:function(){return v(this.isoWeekYear()%100,2)},GGGG:function(){return v(this.isoWeekYear(),4)},GGGGG:function(){return v(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return F(this.milliseconds()/100)},SS:function(){return v(F(this.milliseconds()/10),2)},SSS:function(){return v(this.milliseconds(),3)},SSSS:function(){return v(this.milliseconds(),3)},Z:function(){var e=this.utcOffset(),t="+";return 0>e&&(e=-e,t="-"),t+v(F(e/60),2)+":"+v(F(e)%60,2)},ZZ:function(){var e=this.utcOffset(),t="+";return 0>e&&(e=-e,t="-"),t+v(F(e/60),2)+v(F(e)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},x:function(){return this.valueOf()},X:function(){return this.unix()},Q:function(){return this.quarter()}},bn={},wn=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"],kn=!1;gn.length;)xt=gn.pop(),yn[xt+"o"]=l(yn[xt],xt);for(;vn.length;)xt=vn.pop(),yn[xt+xt]=s(yn[xt],2);yn.DDDD=s(yn.DDD,3),p(c.prototype,{set:function(e){var t,n;for(n in e)t=e[n],"function"==typeof t?this[n]=t:this["_"+n]=t;this._ordinalParseLenient=RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e,t,n){var i,a,o;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;12>i;i++){if(a=kt.utc([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=RegExp("^"+this.months(a,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=RegExp("^"+this.monthsShort(a,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(o="^"+this.months(a,"")+"|^"+this.monthsShort(a,""),this._monthsParse[i]=RegExp(o.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[i].test(e))return i;if(n&&"MMM"===t&&this._shortMonthsParse[i].test(e))return i;if(!n&&this._monthsParse[i].test(e))return i}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var t,n,i;for(this._weekdaysParse||(this._weekdaysParse=[]),t=0;7>t;t++)if(this._weekdaysParse[t]||(n=kt([2e3,1]).day(t),i="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[t]=RegExp(i.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t},_longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},isPM:function(e){return"p"===(e+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t,n){var i=this._calendar[e];return"function"==typeof i?i.apply(t,[n]):i},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,n,i){var a=this._relativeTime[n];return"function"==typeof a?a(e,t,n,i):a.replace(/%d/i,e)},pastFuture:function(e,t){var n=this._relativeTime[e>0?"future":"past"];return"function"==typeof n?n(t):n.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",_ordinalParse:/\d{1,2}/,preparse:function(e){return e},postformat:function(e){return e},week:function(e){return ut(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},firstDayOfWeek:function(){return this._week.dow},firstDayOfYear:function(){return this._week.doy},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),kt=function(t,n,a,o){var r;return"boolean"==typeof a&&(o=a,a=e),r={},r._isAMomentObject=!0,r._i=t,r._f=n,r._l=a,r._strict=o,r._isUTC=!1,r._pf=i(),ct(r)},kt.suppressDeprecationWarnings=!1,kt.createFromInputFallback=o("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),kt.min=function(){var e=[].slice.call(arguments,0);return ht("isBefore",e)},kt.max=function(){var e=[].slice.call(arguments,0);return ht("isAfter",e)},kt.utc=function(t,n,a,o){var r;return"boolean"==typeof a&&(o=a,a=e),r={},r._isAMomentObject=!0,r._useUTC=!0,r._isUTC=!0,r._l=a,r._i=t,r._f=n,r._strict=o,r._pf=i(),ct(r).utc()},kt.unix=function(e){return kt(1e3*e)},kt.duration=function(e,t){var i,a,o,r,s=e,l=null;return kt.isDuration(e)?s={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(s={},t?s[t]=e:s.milliseconds=e):(l=Rt.exec(e))?(i="-"===l[1]?-1:1,s={y:0,d:F(l[St])*i,h:F(l[Et])*i,m:F(l[Nt])*i,s:F(l[Ot])*i,ms:F(l[$t])*i}):(l=Vt.exec(e))?(i="-"===l[1]?-1:1,o=function(e){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*i},s={y:o(l[2]),M:o(l[3]),d:o(l[4]),h:o(l[5]),m:o(l[6]),s:o(l[7]),w:o(l[8])}):null==s?s={}:"object"==typeof s&&("from"in s||"to"in s)&&(r=b(kt(s.from),kt(s.to)),s={},s.ms=r.milliseconds,s.M=r.months),a=new f(s),kt.isDuration(e)&&n(e,"_locale")&&(a._locale=e._locale),a},kt.version=Ct,kt.defaultFormat=sn,kt.ISO_8601=function(){},kt.momentProperties=jt,kt.updateOffset=function(){},kt.relativeTimeThreshold=function(t,n){return mn[t]===e?!1:n===e?mn[t]:(mn[t]=n,!0)},kt.lang=o("moment.lang is deprecated. Use moment.locale instead.",function(e,t){return kt.locale(e,t)}),kt.locale=function(e,t){var n;return e&&(n=t!==void 0?kt.defineLocale(e,t):kt.localeData(e),n&&(kt.duration._locale=kt._locale=n)),kt._locale._abbr},kt.defineLocale=function(e,t){return null!==t?(t.abbr=e,It[e]||(It[e]=new c),It[e].set(t),kt.locale(e),It[e]):(delete It[e],null)},kt.langData=o("moment.langData is deprecated. Use moment.localeData instead.",function(e){return kt.localeData(e)}),kt.localeData=function(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return kt._locale;if(!D(e)){if(t=L(e))return t;e=[e]}return j(e)},kt.isMoment=function(e){return e instanceof h||null!=e&&n(e,"_isAMomentObject")},kt.isDuration=function(e){return e instanceof f};for(xt=wn.length-1;xt>=0;--xt)P(wn[xt]);kt.normalizeUnits=function(e){return T(e)},kt.invalid=function(e){var t=kt.utc(0/0);return null!=e?p(t._pf,e):t._pf.userInvalidated=!0,t},kt.parseZone=function(){return kt.apply(null,arguments).parseZone()},kt.parseTwoDigitYear=function(e){return F(e)+(F(e)>68?1900:2e3)},kt.isDate=x,p(kt.fn=h.prototype,{clone:function(){return kt(this)},valueOf:function(){return+this._d-6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var e=kt(this).utc();return e.year()>0&&9999>=e.year()?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():H(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):H(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return $(this)},isDSTShifted:function(){return this._a?this.isValid()&&C(this._a,(this._isUTC?kt.utc(this._a):kt(this._a)).toArray())>0:!1},parsingFlags:function(){return p({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(e){return this.utcOffset(0,e)},local:function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(this._dateUtcOffset(),"m")),this},format:function(e){var t=H(this,e||kt.defaultFormat);return this.localeData().postformat(t)},add:w(1,"add"),subtract:w(-1,"subtract"),diff:function(e,t,n){var i,a,o=A(e,this),r=6e4*(o.utcOffset()-this.utcOffset());return t=T(t),"year"===t||"month"===t||"quarter"===t?(a=u(this,o),"quarter"===t?a/=3:"year"===t&&(a/=12)):(i=this-o,a="second"===t?i/1e3:"minute"===t?i/6e4:"hour"===t?i/36e5:"day"===t?(i-r)/864e5:"week"===t?(i-r)/6048e5:i),n?a:g(a)},from:function(e,t){return kt.duration({to:this,from:e}).locale(this.locale()).humanize(!t)},fromNow:function(e){return this.from(kt(),e)},calendar:function(e){var t=e||kt(),n=A(t,this).startOf("day"),i=this.diff(n,"days",!0),a=-6>i?"sameElse":-1>i?"lastWeek":0>i?"lastDay":1>i?"sameDay":2>i?"nextDay":7>i?"nextWeek":"sameElse";return this.format(this.localeData().calendar(a,this,kt(t)))},isLeapYear:function(){return N(this.year())},isDST:function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=rt(e,this.localeData()),this.add(e-t,"d")):t},month:gt("Month",!0),startOf:function(e){switch(e=T(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e?this.weekday(0):"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(t){return t=T(t),t===e||"millisecond"===t?this:this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms")},isAfter:function(e,t){var n;return t=T(t!==void 0?t:"millisecond"),"millisecond"===t?(e=kt.isMoment(e)?e:kt(e),+this>+e):(n=kt.isMoment(e)?+e:+kt(e),+this.clone().startOf(t)>n)},isBefore:function(e,t){var n;return t=T(t!==void 0?t:"millisecond"),"millisecond"===t?(e=kt.isMoment(e)?e:kt(e),+e>+this):(n=kt.isMoment(e)?+e:+kt(e),n>+this.clone().endOf(t))},isBetween:function(e,t,n){return this.isAfter(e,n)&&this.isBefore(t,n)},isSame:function(e,t){var n;return t=T(t||"millisecond"),"millisecond"===t?(e=kt.isMoment(e)?e:kt(e),+this===+e):(n=+kt(e),n>=+this.clone().startOf(t)&&+this.clone().endOf(t)>=n)},min:o("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(e){return e=kt.apply(null,arguments),this>e?this:e}),max:o("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(e){return e=kt.apply(null,arguments),e>this?this:e}),zone:o("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",function(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}),utcOffset:function(e,t){var n,i=this._offset||0;return null!=e?("string"==typeof e&&(e=U(e)),16>Math.abs(e)&&(e=60*e),!this._isUTC&&t&&(n=this._dateUtcOffset()),this._offset=e,this._isUTC=!0,null!=n&&this.add(n,"m"),i!==e&&(!t||this._changeInProgress?k(this,kt.duration(e-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,kt.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?i:this._dateUtcOffset()},isLocal:function(){return!this._isUTC},isUtcOffset:function(){return this._isUTC},isUtc:function(){return this._isUTC&&0===this._offset},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(U(this._i)),this},hasAlignedHourOffset:function(e){return e=e?kt(e).utcOffset():0,0===(this.utcOffset()-e)%60},daysInMonth:function(){return _(this.year(),this.month())},dayOfYear:function(e){var t=Mt((kt(this).startOf("day")-kt(this).startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},quarter:function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},weekYear:function(e){var t=ut(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==e?t:this.add(e-t,"y")},isoWeekYear:function(e){var t=ut(this,1,4).year;return null==e?t:this.add(e-t,"y")},week:function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},isoWeek:function(e){var t=ut(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},weekday:function(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},isoWeekday:function(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)},isoWeeksInYear:function(){return S(this.year(),1,4)},weeksInYear:function(){var e=this.localeData()._week;return S(this.year(),e.dow,e.doy)},get:function(e){return e=T(e),this[e]()},set:function(e,t){var n;if("object"==typeof e)for(n in e)this.set(n,e[n]);else e=T(e),"function"==typeof this[e]&&this[e](t);return this},locale:function(t){var n;return t===e?this._locale._abbr:(n=kt.localeData(t),null!=n&&(this._locale=n),this)},lang:o("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===e?this.localeData():this.locale(t)}),localeData:function(){return this._locale},_dateUtcOffset:function(){return 15*-Math.round(this._d.getTimezoneOffset()/15)}}),kt.fn.millisecond=kt.fn.milliseconds=gt("Milliseconds",!1),kt.fn.second=kt.fn.seconds=gt("Seconds",!1),kt.fn.minute=kt.fn.minutes=gt("Minutes",!1),kt.fn.hour=kt.fn.hours=gt("Hours",!0),kt.fn.date=gt("Date",!0),kt.fn.dates=o("dates accessor is deprecated. Use date instead.",gt("Date",!0)),kt.fn.year=gt("FullYear",!0),kt.fn.years=o("years accessor is deprecated. Use year instead.",gt("FullYear",!0)),kt.fn.days=kt.fn.day,kt.fn.months=kt.fn.month,kt.fn.weeks=kt.fn.week,kt.fn.isoWeeks=kt.fn.isoWeek,kt.fn.quarters=kt.fn.quarter,kt.fn.toJSON=kt.fn.toISOString,kt.fn.isUTC=kt.fn.isUtc,p(kt.duration.fn=f.prototype,{_bubble:function(){var e,t,n,i=this._milliseconds,a=this._days,o=this._months,r=this._data,s=0;r.milliseconds=i%1e3,e=g(i/1e3),r.seconds=e%60,t=g(e/60),r.minutes=t%60,n=g(t/60),r.hours=n%24,a+=g(n/24),s=g(vt(a)),a-=g(yt(s)),o+=g(a/30),a%=30,s+=g(o/12),o%=12,r.days=a,r.months=o,r.years=s},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return g(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+2592e6*(this._months%12)+31536e6*F(this._months/12)},humanize:function(e){var t=lt(this,!e,this.localeData());return e&&(t=this.localeData().pastFuture(+this,t)),this.localeData().postformat(t)},add:function(e,t){var n=kt.duration(e,t);return this._milliseconds+=n._milliseconds,this._days+=n._days,this._months+=n._months,this._bubble(),this},subtract:function(e,t){var n=kt.duration(e,t);return this._milliseconds-=n._milliseconds,this._days-=n._days,this._months-=n._months,this._bubble(),this},get:function(e){return e=T(e),this[e.toLowerCase()+"s"]()},as:function(e){var t,n;if(e=T(e),"month"===e||"year"===e)return t=this._days+this._milliseconds/864e5,n=this._months+12*vt(t),"month"===e?n:n/12;switch(t=this._days+Math.round(yt(this._months/12)),e){case"week":return t/7+this._milliseconds/6048e5;case"day":return t+this._milliseconds/864e5;case"hour":return 24*t+this._milliseconds/36e5;case"minute":return 60*24*t+this._milliseconds/6e4;case"second":return 60*60*24*t+this._milliseconds/1e3;case"millisecond":return Math.floor(1e3*60*60*24*t)+this._milliseconds;default:throw Error("Unknown unit "+e)}},lang:kt.fn.lang,locale:kt.fn.locale,toIsoString:o("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var e=Math.abs(this.years()),t=Math.abs(this.months()),n=Math.abs(this.days()),i=Math.abs(this.hours()),a=Math.abs(this.minutes()),o=Math.abs(this.seconds()+this.milliseconds()/1e3);
return this.asSeconds()?(0>this.asSeconds()?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(n?n+"D":"")+(i||a||o?"T":"")+(i?i+"H":"")+(a?a+"M":"")+(o?o+"S":""):"P0D"},localeData:function(){return this._locale},toJSON:function(){return this.toISOString()}}),kt.duration.fn.toString=kt.duration.fn.toISOString;for(xt in cn)n(cn,xt)&&bt(xt.toLowerCase());kt.duration.fn.asMilliseconds=function(){return this.as("ms")},kt.duration.fn.asSeconds=function(){return this.as("s")},kt.duration.fn.asMinutes=function(){return this.as("m")},kt.duration.fn.asHours=function(){return this.as("h")},kt.duration.fn.asDays=function(){return this.as("d")},kt.duration.fn.asWeeks=function(){return this.as("weeks")},kt.duration.fn.asMonths=function(){return this.as("M")},kt.duration.fn.asYears=function(){return this.as("y")},kt.locale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=1===F(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+n}}),Lt?module.exports=kt:"function"==typeof define&&define.amd?(define(function(e,t,n){return n.config&&n.config()&&n.config().noGlobal===!0&&(Tt.moment=Dt),kt}),wt(!0)):wt()}.call(this),function(e){"use strict";if("function"==typeof define&&define.amd)define(["jquery","moment"],e);else if("object"==typeof exports)e(require("jquery"),require("moment"));else{if(!jQuery)throw"bootstrap-datetimepicker requires jQuery to be loaded first";if(!moment)throw"bootstrap-datetimepicker requires Moment.js to be loaded first";e(jQuery,moment)}}(function(e,t){"use strict";if(!t)throw Error("bootstrap-datetimepicker requires Moment.js to be loaded first");var n=function(n,i){var a,o,r,s,l,u={},d=t(),c=d.clone(),h=!0,f=!1,p=!1,m=0,g=[{clsName:"days",navFnc:"M",navStep:1},{clsName:"months",navFnc:"y",navStep:1},{clsName:"years",navFnc:"y",navStep:10}],v=["days","months","years"],y=["top","bottom","auto"],b=["left","right","auto"],w=["default","top","bottom"],k=function(e){if("string"!=typeof e||e.length>1)throw new TypeError("isEnabled expects a single character string parameter");switch(e){case"y":return-1!==r.indexOf("Y");case"M":return-1!==r.indexOf("M");case"d":return-1!==r.toLowerCase().indexOf("d");case"h":case"H":return-1!==r.toLowerCase().indexOf("h");case"m":return-1!==r.indexOf("m");case"s":return-1!==r.indexOf("s");default:return!1}},D=function(){return k("h")||k("m")||k("s")},x=function(){return k("y")||k("M")||k("d")},C=function(){var t=e("<thead>").append(e("<tr>").append(e("<th>").addClass("prev").attr("data-action","previous").append(e("<span>").addClass(i.icons.previous))).append(e("<th>").addClass("picker-switch").attr("data-action","pickerSwitch").attr("colspan",i.calendarWeeks?"6":"5")).append(e("<th>").addClass("next").attr("data-action","next").append(e("<span>").addClass(i.icons.next)))),n=e("<tbody>").append(e("<tr>").append(e("<td>").attr("colspan",i.calendarWeeks?"8":"7")));return[e("<div>").addClass("datepicker-days").append(e("<table>").addClass("table-condensed").append(t).append(e("<tbody>"))),e("<div>").addClass("datepicker-months").append(e("<table>").addClass("table-condensed").append(t.clone()).append(n.clone())),e("<div>").addClass("datepicker-years").append(e("<table>").addClass("table-condensed").append(t.clone()).append(n.clone()))]},T=function(){var t=e("<tr>"),n=e("<tr>"),a=e("<tr>");return k("h")&&(t.append(e("<td>").append(e("<a>").attr("href","#").addClass("btn").attr("data-action","incrementHours").append(e("<span>").addClass(i.icons.up)))),n.append(e("<td>").append(e("<span>").addClass("timepicker-hour").attr("data-time-component","hours").attr("data-action","showHours"))),a.append(e("<td>").append(e("<a>").attr("href","#").addClass("btn").attr("data-action","decrementHours").append(e("<span>").addClass(i.icons.down))))),k("m")&&(k("h")&&(t.append(e("<td>").addClass("separator")),n.append(e("<td>").addClass("separator").html(":")),a.append(e("<td>").addClass("separator"))),t.append(e("<td>").append(e("<a>").attr("href","#").addClass("btn").attr("data-action","incrementMinutes").append(e("<span>").addClass(i.icons.up)))),n.append(e("<td>").append(e("<span>").addClass("timepicker-minute").attr("data-time-component","minutes").attr("data-action","showMinutes"))),a.append(e("<td>").append(e("<a>").attr("href","#").addClass("btn").attr("data-action","decrementMinutes").append(e("<span>").addClass(i.icons.down))))),k("s")&&(k("m")&&(t.append(e("<td>").addClass("separator")),n.append(e("<td>").addClass("separator").html(":")),a.append(e("<td>").addClass("separator"))),t.append(e("<td>").append(e("<a>").attr("href","#").addClass("btn").attr("data-action","incrementSeconds").append(e("<span>").addClass(i.icons.up)))),n.append(e("<td>").append(e("<span>").addClass("timepicker-second").attr("data-time-component","seconds").attr("data-action","showSeconds"))),a.append(e("<td>").append(e("<a>").attr("href","#").addClass("btn").attr("data-action","decrementSeconds").append(e("<span>").addClass(i.icons.down))))),o||(t.append(e("<td>").addClass("separator")),n.append(e("<td>").append(e("<button>").addClass("btn btn-primary").attr("data-action","togglePeriod"))),a.append(e("<td>").addClass("separator"))),e("<div>").addClass("timepicker-picker").append(e("<table>").addClass("table-condensed").append([t,n,a]))},M=function(){var t=e("<div>").addClass("timepicker-hours").append(e("<table>").addClass("table-condensed")),n=e("<div>").addClass("timepicker-minutes").append(e("<table>").addClass("table-condensed")),i=e("<div>").addClass("timepicker-seconds").append(e("<table>").addClass("table-condensed")),a=[T()];return k("h")&&a.push(t),k("m")&&a.push(n),k("s")&&a.push(i),a},P=function(){var t=[];return i.showTodayButton&&t.push(e("<td>").append(e("<a>").attr("data-action","today").append(e("<span>").addClass(i.icons.today)))),!i.sideBySide&&x()&&D()&&t.push(e("<td>").append(e("<a>").attr("data-action","togglePicker").append(e("<span>").addClass(i.icons.time)))),i.showClear&&t.push(e("<td>").append(e("<a>").attr("data-action","clear").append(e("<span>").addClass(i.icons.clear)))),e("<table>").addClass("table-condensed").append(e("<tbody>").append(e("<tr>").append(t)))},F=function(){var t=e("<div>").addClass("bootstrap-datetimepicker-widget dropdown-menu"),n=e("<div>").addClass("datepicker").append(C()),a=e("<div>").addClass("timepicker").append(M()),r=e("<ul>").addClass("list-unstyled"),s=e("<li>").addClass("picker-switch"+(i.collapse?" accordion-toggle":"")).append(P());return o&&t.addClass("usetwentyfour"),i.sideBySide&&x()&&D()?(t.addClass("timepicker-sbs"),t.append(e("<div>").addClass("row").append(n.addClass("col-sm-6")).append(a.addClass("col-sm-6"))),t.append(s),t):("top"===i.toolbarPlacement&&r.append(s),x()&&r.append(e("<li>").addClass(i.collapse&&D()?"collapse in":"").append(n)),"default"===i.toolbarPlacement&&r.append(s),D()&&r.append(e("<li>").addClass(i.collapse&&x()?"collapse":"").append(a)),"bottom"===i.toolbarPlacement&&r.append(s),t.append(r))},_=function(){var t=n.data(),a={};return t.dateOptions&&t.dateOptions instanceof Object&&(a=e.extend(!0,a,t.dateOptions)),e.each(i,function(e){var n="date"+e.charAt(0).toUpperCase()+e.slice(1);void 0!==t[n]&&(a[e]=t[n])}),a},S=function(){var t,a=(f||n).position(),o=i.widgetPositioning.vertical,r=i.widgetPositioning.horizontal;if(i.widgetParent?t=i.widgetParent.append(p):n.is("input")?t=n.parent().append(p):(t=n,n.children().first().after(p)),"auto"===o&&(o=(f||n).offset().top+p.height()>e(window).height()+e(window).scrollTop()&&p.height()+n.outerHeight()<(f||n).offset().top?"top":"bottom"),"auto"===r&&(r=t.width()<a.left+p.outerWidth()?"right":"left"),"top"===o?p.addClass("top").removeClass("bottom"):p.addClass("bottom").removeClass("top"),"right"===r?p.addClass("pull-right"):p.removeClass("pull-right"),"relative"!==t.css("position")&&(t=t.parents().filter(function(){return"relative"===e(this).css("position")}).first()),0===t.length)throw Error("datetimepicker component should be placed within a relative positioned container");p.css({top:"top"===o?"auto":a.top+n.outerHeight(),bottom:"top"===o?a.top+n.outerHeight():"auto",left:"left"===r?t.css("padding-left"):"auto",right:"left"===r?"auto":t.css("padding-right")})},E=function(e){"dp.change"===e.type&&(e.date&&e.date.isSame(e.oldDate)||!e.date&&!e.oldDate)||n.trigger(e)},N=function(e){p&&(e&&(l=Math.max(m,Math.min(2,l+e))),p.find(".datepicker > div").hide().filter(".datepicker-"+g[l].clsName).show())},O=function(){var t=e("<tr>"),n=c.clone().startOf("w");for(i.calendarWeeks===!0&&t.append(e("<th>").addClass("cw").text("#"));n.isBefore(c.clone().endOf("w"));)t.append(e("<th>").addClass("dow").text(n.format("dd"))),n.add(1,"d");p.find(".datepicker-days thead").append(t)},$=function(e){return i.disabledDates?i.disabledDates[e.format("YYYY-MM-DD")]===!0:!1},I=function(e){return i.enabledDates?i.enabledDates[e.format("YYYY-MM-DD")]===!0:!1},j=function(e,t){return e.isValid()?i.disabledDates&&$(e)?!1:i.enabledDates&&I(e)?!0:i.minDate&&e.isBefore(i.minDate,t)?!1:i.maxDate&&e.isAfter(i.maxDate,t)?!1:"d"===t&&-1!==i.daysOfWeekDisabled.indexOf(e.day())?!1:!0:!1},L=function(){for(var t=[],n=c.clone().startOf("y").hour(12);n.isSame(c,"y");)t.push(e("<span>").attr("data-action","selectMonth").addClass("month").text(n.format("MMM"))),n.add(1,"M");p.find(".datepicker-months td").empty().append(t)},A=function(){var t=p.find(".datepicker-months"),n=t.find("th"),i=t.find("tbody").find("span");t.find(".disabled").removeClass("disabled"),j(c.clone().subtract(1,"y"),"y")||n.eq(0).addClass("disabled"),n.eq(1).text(c.year()),j(c.clone().add(1,"y"),"y")||n.eq(2).addClass("disabled"),i.removeClass("active"),d.isSame(c,"y")&&i.eq(d.month()).addClass("active"),i.each(function(t){j(c.clone().month(t),"M")||e(this).addClass("disabled")})},R=function(){var e=p.find(".datepicker-years"),t=e.find("th"),n=c.clone().subtract(5,"y"),a=c.clone().add(6,"y"),o="";for(e.find(".disabled").removeClass("disabled"),i.minDate&&i.minDate.isAfter(n,"y")&&t.eq(0).addClass("disabled"),t.eq(1).text(n.year()+"-"+a.year()),i.maxDate&&i.maxDate.isBefore(a,"y")&&t.eq(2).addClass("disabled");!n.isAfter(a,"y");)o+='<span data-action="selectYear" class="year'+(n.isSame(d,"y")?" active":"")+(j(n,"y")?"":" disabled")+'">'+n.year()+"</span>",n.add(1,"y");e.find("td").html(o)},V=function(){var n,a,o,r=p.find(".datepicker-days"),s=r.find("th"),l=[];if(x()){for(r.find(".disabled").removeClass("disabled"),s.eq(1).text(c.format(i.dayViewHeaderFormat)),j(c.clone().subtract(1,"M"),"M")||s.eq(0).addClass("disabled"),j(c.clone().add(1,"M"),"M")||s.eq(2).addClass("disabled"),n=c.clone().startOf("M").startOf("week");!c.clone().endOf("M").endOf("w").isBefore(n,"d");)0===n.weekday()&&(a=e("<tr>"),i.calendarWeeks&&a.append('<td class="cw">'+n.week()+"</td>"),l.push(a)),o="",n.isBefore(c,"M")&&(o+=" old"),n.isAfter(c,"M")&&(o+=" new"),n.isSame(d,"d")&&!h&&(o+=" active"),j(n,"d")||(o+=" disabled"),n.isSame(t(),"d")&&(o+=" today"),(0===n.day()||6===n.day())&&(o+=" weekend"),a.append('<td data-action="selectDay" class="day'+o+'">'+n.date()+"</td>"),n.add(1,"d");r.find("tbody").empty().append(l),A(),R()}},H=function(){var t=p.find(".timepicker-hours table"),n=c.clone().startOf("d"),i=[],a=e("<tr>");for(c.hour()>11&&!o&&n.hour(12);n.isSame(c,"d")&&(o||12>c.hour()&&12>n.hour()||c.hour()>11);)0===n.hour()%4&&(a=e("<tr>"),i.push(a)),a.append('<td data-action="selectHour" class="hour'+(j(n,"h")?"":" disabled")+'">'+n.format(o?"HH":"hh")+"</td>"),n.add(1,"h");t.empty().append(i)},B=function(){for(var t=p.find(".timepicker-minutes table"),n=c.clone().startOf("h"),a=[],o=e("<tr>"),r=1===i.stepping?5:i.stepping;c.isSame(n,"h");)0===n.minute()%(4*r)&&(o=e("<tr>"),a.push(o)),o.append('<td data-action="selectMinute" class="minute'+(j(n,"m")?"":" disabled")+'">'+n.format("mm")+"</td>"),n.add(r,"m");t.empty().append(a)},z=function(){for(var t=p.find(".timepicker-seconds table"),n=c.clone().startOf("m"),i=[],a=e("<tr>");c.isSame(n,"m");)0===n.second()%20&&(a=e("<tr>"),i.push(a)),a.append('<td data-action="selectSecond" class="second'+(j(n,"s")?"":" disabled")+'">'+n.format("ss")+"</td>"),n.add(5,"s");t.empty().append(i)},U=function(){var e=p.find(".timepicker span[data-time-component]");o||p.find(".timepicker [data-action=togglePeriod]").text(d.format("A")),e.filter("[data-time-component=hours]").text(d.format(o?"HH":"hh")),e.filter("[data-time-component=minutes]").text(d.format("mm")),e.filter("[data-time-component=seconds]").text(d.format("ss")),H(),B(),z()},q=function(){p&&(V(),U())},W=function(e){var t=h?null:d;return e?(e=e.clone().locale(i.locale),1!==i.stepping&&e.minutes(Math.round(e.minutes()/i.stepping)*i.stepping%60).seconds(0),j(e)?(d=e,c=d.clone(),a.val(d.format(r)),n.data("date",d.format(r)),q(),h=!1,E({type:"dp.change",date:d.clone(),oldDate:t})):(a.val(h?"":d.format(r)),E({type:"dp.error",date:e})),void 0):(h=!0,a.val(""),n.data("date",""),E({type:"dp.change",date:null,oldDate:t}),q(),void 0)},J=function(){var t=!1;return p?(p.find(".collapse").each(function(){var n=e(this).data("collapse");return n&&n.transitioning?(t=!0,!1):void 0}),t?u:(f&&f.hasClass("btn")&&f.toggleClass("active"),p.hide(),e(window).off("resize",S),p.off("click","[data-action]"),p.off("mousedown",!1),p.remove(),p=!1,E({type:"dp.hide",date:d.clone()}),u)):u},Y={next:function(){c.add(g[l].navStep,g[l].navFnc),V()},previous:function(){c.subtract(g[l].navStep,g[l].navFnc),V()},pickerSwitch:function(){N(1)},selectMonth:function(t){var n=e(t.target).closest("tbody").find("span").index(e(t.target));c.month(n),l===m&&(W(d.clone().year(c.year()).month(c.month())),J()),N(-1),V()},selectYear:function(t){var n=parseInt(e(t.target).text(),10)||0;c.year(n),l===m&&(W(d.clone().year(c.year())),J()),N(-1),V()},selectDay:function(t){var n=c.clone();e(t.target).is(".old")&&n.subtract(1,"M"),e(t.target).is(".new")&&n.add(1,"M"),W(n.date(parseInt(e(t.target).text(),10))),D()||i.keepOpen||J()},incrementHours:function(){W(d.clone().add(1,"h"))},incrementMinutes:function(){W(d.clone().add(i.stepping,"m"))},incrementSeconds:function(){W(d.clone().add(1,"s"))},decrementHours:function(){W(d.clone().subtract(1,"h"))},decrementMinutes:function(){W(d.clone().subtract(i.stepping,"m"))},decrementSeconds:function(){W(d.clone().subtract(1,"s"))},togglePeriod:function(){W(d.clone().add(d.hours()>=12?-12:12,"h"))},togglePicker:function(t){var n,a=e(t.target),o=a.closest("ul"),r=o.find(".in"),s=o.find(".collapse:not(.in)");if(r&&r.length){if(n=r.data("collapse"),n&&n.transitioning)return;r.collapse("hide"),s.collapse("show"),a.is("span")?a.toggleClass(i.icons.time+" "+i.icons.date):a.find("span").toggleClass(i.icons.time+" "+i.icons.date)}},showPicker:function(){p.find(".timepicker > div:not(.timepicker-picker)").hide(),p.find(".timepicker .timepicker-picker").show()},showHours:function(){p.find(".timepicker .timepicker-picker").hide(),p.find(".timepicker .timepicker-hours").show()},showMinutes:function(){p.find(".timepicker .timepicker-picker").hide(),p.find(".timepicker .timepicker-minutes").show()},showSeconds:function(){p.find(".timepicker .timepicker-picker").hide(),p.find(".timepicker .timepicker-seconds").show()},selectHour:function(t){var n=parseInt(e(t.target).text(),10);o||(d.hours()>=12?12!==n&&(n+=12):12===n&&(n=0)),W(d.clone().hours(n)),Y.showPicker.call(u)},selectMinute:function(t){W(d.clone().minutes(parseInt(e(t.target).text(),10))),Y.showPicker.call(u)},selectSecond:function(t){W(d.clone().seconds(parseInt(e(t.target).text(),10))),Y.showPicker.call(u)},clear:function(){W(null)},today:function(){W(t())}},G=function(t){return e(t.currentTarget).is(".disabled")?!1:(Y[e(t.currentTarget).data("action")].apply(u,arguments),!1)},Q=function(){var n,o={year:function(e){return e.month(0).date(1).hours(0).seconds(0).minutes(0)},month:function(e){return e.date(1).hours(0).seconds(0).minutes(0)},day:function(e){return e.hours(0).seconds(0).minutes(0)},hour:function(e){return e.seconds(0).minutes(0)},minute:function(e){return e.seconds(0)}};return a.prop("disabled")||a.prop("readonly")||p?u:(i.useCurrent&&h&&(n=t(),"string"==typeof i.useCurrent&&(n=o[i.useCurrent](n)),W(n)),p=F(),O(),L(),p.find(".timepicker-hours").hide(),p.find(".timepicker-minutes").hide(),p.find(".timepicker-seconds").hide(),q(),N(),e(window).on("resize",S),p.on("click","[data-action]",G),p.on("mousedown",!1),f&&f.hasClass("btn")&&f.toggleClass("active"),p.show(),S(),a.is(":focus")||a.focus(),E({type:"dp.show"}),u)},X=function(){return p?J():Q()},K=function(e){return e=t.isMoment(e)||e instanceof Date?t(e):t(e,s,i.useStrict),e.locale(i.locale),e},Z=function(e){27===e.keyCode&&J()},et=function(t){var n=e(t.target).val().trim(),i=n?K(n):null;return W(i),t.stopImmediatePropagation(),!1},tt=function(){a.on({change:et,blur:J,keydown:Z}),n.is("input")?a.on({focus:Q}):f&&(f.on("click",X),f.on("mousedown",!1))},nt=function(){a.off({change:et,blur:J,keydown:Z}),n.is("input")?a.off({focus:Q}):f&&(f.off("click",X),f.off("mousedown",!1))},it=function(t){var n={};return e.each(t,function(){var e=K(this);e.isValid()&&(n[e.format("YYYY-MM-DD")]=!0)}),Object.keys(n).length?n:!1},at=function(){var e=i.format||"L LT";r=e.replace(/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,function(e){return d.localeData().longDateFormat(e)||e}),s=i.extraFormats?i.extraFormats.slice():[],0>s.indexOf(e)&&0>s.indexOf(r)&&s.push(r),o=1>r.toLowerCase().indexOf("a")&&1>r.indexOf("h"),k("y")&&(m=2),k("M")&&(m=1),k("d")&&(m=0),l=Math.max(m,l),h||W(d)};if(u.destroy=function(){J(),nt(),n.removeData("DateTimePicker"),n.removeData("date")},u.toggle=X,u.show=Q,u.hide=J,u.disable=function(){return J(),f&&f.hasClass("btn")&&f.addClass("disabled"),a.prop("disabled",!0),u},u.enable=function(){return f&&f.hasClass("btn")&&f.removeClass("disabled"),a.prop("disabled",!1),u},u.options=function(t){if(0===arguments.length)return e.extend(!0,{},i);if(!(t instanceof Object))throw new TypeError("options() options parameter should be an object");return e.extend(!0,i,t),e.each(i,function(e,t){if(void 0===u[e])throw new TypeError("option "+e+" is not recognized!");u[e](t)}),u},u.date=function(e){if(0===arguments.length)return h?null:d.clone();if(!(null===e||"string"==typeof e||t.isMoment(e)||e instanceof Date))throw new TypeError("date() parameter must be one of [null, string, moment or Date]");return W(null===e?null:K(e)),u},u.format=function(e){if(0===arguments.length)return i.format;if("string"!=typeof e&&("boolean"!=typeof e||e!==!1))throw new TypeError("format() expects a sting or boolean:false parameter "+e);return i.format=e,r&&at(),u},u.dayViewHeaderFormat=function(e){if(0===arguments.length)return i.dayViewHeaderFormat;if("string"!=typeof e)throw new TypeError("dayViewHeaderFormat() expects a string parameter");return i.dayViewHeaderFormat=e,u},u.extraFormats=function(e){if(0===arguments.length)return i.extraFormats;if(e!==!1&&!(e instanceof Array))throw new TypeError("extraFormats() expects an array or false parameter");return i.extraFormats=e,s&&at(),u},u.disabledDates=function(t){if(0===arguments.length)return i.disabledDates?e.extend({},i.disabledDates):i.disabledDates;if(!t)return i.disabledDates=!1,q(),u;if(!(t instanceof Array))throw new TypeError("disabledDates() expects an array parameter");return i.disabledDates=it(t),i.enabledDates=!1,q(),u},u.enabledDates=function(t){if(0===arguments.length)return i.enabledDates?e.extend({},i.enabledDates):i.enabledDates;if(!t)return i.enabledDates=!1,q(),u;if(!(t instanceof Array))throw new TypeError("enabledDates() expects an array parameter");return i.enabledDates=it(t),i.disabledDates=!1,q(),u},u.daysOfWeekDisabled=function(e){if(0===arguments.length)return i.daysOfWeekDisabled.splice(0);if(!(e instanceof Array))throw new TypeError("daysOfWeekDisabled() expects an array parameter");return i.daysOfWeekDisabled=e.reduce(function(e,t){return t=parseInt(t,10),t>6||0>t||isNaN(t)?e:(-1===e.indexOf(t)&&e.push(t),e)},[]).sort(),q(),u},u.maxDate=function(e){if(0===arguments.length)return i.maxDate?i.maxDate.clone():i.maxDate;if("boolean"==typeof e&&e===!1)return i.maxDate=!1,q(),u;var t=K(e);if(!t.isValid())throw new TypeError("maxDate() Could not parse date parameter: "+e);if(i.minDate&&t.isBefore(i.minDate))throw new TypeError("maxDate() date parameter is before options.minDate: "+t.format(r));return i.maxDate=t,i.maxDate.isBefore(e)&&W(i.maxDate),q(),u},u.minDate=function(e){if(0===arguments.length)return i.minDate?i.minDate.clone():i.minDate;if("boolean"==typeof e&&e===!1)return i.minDate=!1,q(),u;var t=K(e);if(!t.isValid())throw new TypeError("minDate() Could not parse date parameter: "+e);if(i.maxDate&&t.isAfter(i.maxDate))throw new TypeError("minDate() date parameter is after options.maxDate: "+t.format(r));return i.minDate=t,i.minDate.isAfter(e)&&W(i.minDate),q(),u},u.defaultDate=function(e){if(0===arguments.length)return i.defaultDate?i.defaultDate.clone():i.defaultDate;if(!e)return i.defaultDate=!1,u;var t=K(e);if(!t.isValid())throw new TypeError("defaultDate() Could not parse date parameter: "+e);if(!j(t))throw new TypeError("defaultDate() date passed is invalid according to component setup validations");return i.defaultDate=t,i.defaultDate&&""===a.val().trim()&&W(i.defaultDate),u},u.locale=function(e){if(0===arguments.length)return i.locale;if(!t.localeData(e))throw new TypeError("locale() locale "+e+" is not loaded from moment locales!");return i.locale=e,d.locale(i.locale),c.locale(i.locale),r&&at(),p&&(J(),Q()),u},u.stepping=function(e){return 0===arguments.length?i.stepping:(e=parseInt(e,10),(isNaN(e)||1>e)&&(e=1),i.stepping=e,u)},u.useCurrent=function(e){var t=["year","month","day","hour","minute"];if(0===arguments.length)return i.useCurrent;if("boolean"!=typeof e&&"string"!=typeof e)throw new TypeError("useCurrent() expects a boolean or string parameter");if("string"==typeof e&&-1===t.indexOf(e.toLowerCase()))throw new TypeError("useCurrent() expects a string parameter of "+t.join(", "));return i.useCurrent=e,u},u.collapse=function(e){if(0===arguments.length)return i.collapse;if("boolean"!=typeof e)throw new TypeError("collapse() expects a boolean parameter");return i.collapse===e?u:(i.collapse=e,p&&(J(),Q()),u)},u.icons=function(t){if(0===arguments.length)return e.extend({},i.icons);if(!(t instanceof Object))throw new TypeError("icons() expects parameter to be an Object");return e.extend(i.icons,t),p&&(J(),Q()),u},u.useStrict=function(e){if(0===arguments.length)return i.useStrict;if("boolean"!=typeof e)throw new TypeError("useStrict() expects a boolean parameter");return i.useStrict=e,u},u.sideBySide=function(e){if(0===arguments.length)return i.sideBySide;if("boolean"!=typeof e)throw new TypeError("sideBySide() expects a boolean parameter");return i.sideBySide=e,p&&(J(),Q()),u},u.viewMode=function(e){if(0===arguments.length)return i.viewMode;if("string"!=typeof e)throw new TypeError("viewMode() expects a string parameter");if(-1===v.indexOf(e))throw new TypeError("viewMode() parameter must be one of ("+v.join(", ")+") value");return i.viewMode=e,l=Math.max(v.indexOf(e),m),N(),u},u.toolbarPlacement=function(e){if(0===arguments.length)return i.toolbarPlacement;if("string"!=typeof e)throw new TypeError("toolbarPlacement() expects a string parameter");if(-1===w.indexOf(e))throw new TypeError("toolbarPlacement() parameter must be one of ("+w.join(", ")+") value");return i.toolbarPlacement=e,p&&(J(),Q()),u},u.widgetPositioning=function(t){if(0===arguments.length)return e.extend({},i.widgetPositioning);if("[object Object]"!=={}.toString.call(t))throw new TypeError("widgetPositioning() expects an object variable");if(t.horizontal){if("string"!=typeof t.horizontal)throw new TypeError("widgetPositioning() horizontal variable must be a string");if(t.horizontal=t.horizontal.toLowerCase(),-1===b.indexOf(t.horizontal))throw new TypeError("widgetPositioning() expects horizontal parameter to be one of ("+b.join(", ")+")");i.widgetPositioning.horizontal=t.horizontal}if(t.vertical){if("string"!=typeof t.vertical)throw new TypeError("widgetPositioning() vertical variable must be a string");if(t.vertical=t.vertical.toLowerCase(),-1===y.indexOf(t.vertical))throw new TypeError("widgetPositioning() expects vertical parameter to be one of ("+y.join(", ")+")");i.widgetPositioning.vertical=t.vertical}return q(),u},u.calendarWeeks=function(e){if(0===arguments.length)return i.calendarWeeks;if("boolean"!=typeof e)throw new TypeError("calendarWeeks() expects parameter to be a boolean value");return i.calendarWeeks=e,q(),u},u.showTodayButton=function(e){if(0===arguments.length)return i.showTodayButton;if("boolean"!=typeof e)throw new TypeError("showTodayButton() expects a boolean parameter");return i.showTodayButton=e,p&&(J(),Q()),u},u.showClear=function(e){if(0===arguments.length)return i.showClear;if("boolean"!=typeof e)throw new TypeError("showClear() expects a boolean parameter");return i.showClear=e,p&&(J(),Q()),u},u.widgetParent=function(t){if(0===arguments.length)return i.widgetParent;if("string"==typeof t&&(t=e(t)),null!==t&&"string"!=typeof t&&!(t instanceof jQuery))throw new TypeError("widgetParent() expects a string or a jQuery object parameter");return i.widgetParent=t,p&&(J(),Q()),u},u.keepOpen=function(e){if(0===arguments.length)return i.format;if("boolean"!=typeof e)throw new TypeError("keepOpen() expects a boolean parameter");return i.keepOpen=e,u},n.is("input"))a=n;else if(a=n.find(".datepickerinput"),0===a.size())a=n.find("input");else if(!a.is("input"))throw Error('CSS class "datepickerinput" cannot be applied to non input element');if(n.hasClass("input-group")&&(f=0===n.find(".datepickerbutton").size()?n.find('[class^="input-group-"]'):n.find(".datepickerbutton")),!a.is("input"))throw Error("Could not initialize DateTimePicker without an input element");return e.extend(!0,i,_()),u.options(i),at(),tt(),a.prop("disabled")&&u.disable(),0!==a.val().trim().length?W(K(a.val().trim())):i.defaultDate&&W(i.defaultDate),u};e.fn.datetimepicker=function(t){return this.each(function(){var i=e(this);i.data("DateTimePicker")||(t=e.extend(!0,{},e.fn.datetimepicker.defaults,t),i.data("DateTimePicker",n(i,t)))})},e.fn.datetimepicker.defaults={format:!1,dayViewHeaderFormat:"MMMM YYYY",extraFormats:!1,stepping:1,minDate:!1,maxDate:!1,useCurrent:!0,collapse:!0,locale:t.locale(),defaultDate:!1,disabledDates:!1,enabledDates:!1,icons:{time:"glyphicon glyphicon-time",date:"glyphicon glyphicon-calendar",up:"glyphicon glyphicon-chevron-up",down:"glyphicon glyphicon-chevron-down",previous:"glyphicon glyphicon-chevron-left",next:"glyphicon glyphicon-chevron-right",today:"glyphicon glyphicon-screenshot",clear:"glyphicon glyphicon-trash"},useStrict:!1,sideBySide:!1,daysOfWeekDisabled:[],calendarWeeks:!1,viewMode:"days",toolbarPlacement:"default",showTodayButton:!1,showClear:!1,widgetPositioning:{horizontal:"auto",vertical:"auto"},widgetParent:null,keepOpen:!1}}),function(){var e=this,t=e._,n={},i=Array.prototype,a=Object.prototype,o=Function.prototype,r=i.push,s=i.slice,l=i.concat,u=a.toString,d=a.hasOwnProperty,c=i.forEach,h=i.map,f=i.reduce,p=i.reduceRight,m=i.filter,g=i.every,v=i.some,y=i.indexOf,b=i.lastIndexOf,w=Array.isArray,k=Object.keys,D=o.bind,x=function(e){return e instanceof x?e:this instanceof x?void(this._wrapped=e):new x(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=x),exports._=x):e._=x,x.VERSION="1.6.0";var C=x.each=x.forEach=function(e,t,i){if(null==e)return e;if(c&&e.forEach===c)e.forEach(t,i);else if(e.length===+e.length){for(var a=0,o=e.length;o>a;a++)if(t.call(i,e[a],a,e)===n)return}else for(var r=x.keys(e),a=0,o=r.length;o>a;a++)if(t.call(i,e[r[a]],r[a],e)===n)return;return e};x.map=x.collect=function(e,t,n){var i=[];return null==e?i:h&&e.map===h?e.map(t,n):(C(e,function(e,a,o){i.push(t.call(n,e,a,o))}),i)};var T="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(e,t,n,i){var a=arguments.length>2;if(null==e&&(e=[]),f&&e.reduce===f)return i&&(t=x.bind(t,i)),a?e.reduce(t,n):e.reduce(t);if(C(e,function(e,o,r){a?n=t.call(i,n,e,o,r):(n=e,a=!0)}),!a)throw new TypeError(T);return n},x.reduceRight=x.foldr=function(e,t,n,i){var a=arguments.length>2;if(null==e&&(e=[]),p&&e.reduceRight===p)return i&&(t=x.bind(t,i)),a?e.reduceRight(t,n):e.reduceRight(t);var o=e.length;if(o!==+o){var r=x.keys(e);o=r.length}if(C(e,function(s,l,u){l=r?r[--o]:--o,a?n=t.call(i,n,e[l],l,u):(n=e[l],a=!0)}),!a)throw new TypeError(T);return n},x.find=x.detect=function(e,t,n){var i;return M(e,function(e,a,o){return t.call(n,e,a,o)?(i=e,!0):void 0}),i},x.filter=x.select=function(e,t,n){var i=[];return null==e?i:m&&e.filter===m?e.filter(t,n):(C(e,function(e,a,o){t.call(n,e,a,o)&&i.push(e)}),i)},x.reject=function(e,t,n){return x.filter(e,function(e,i,a){return!t.call(n,e,i,a)},n)},x.every=x.all=function(e,t,i){t||(t=x.identity);var a=!0;return null==e?a:g&&e.every===g?e.every(t,i):(C(e,function(e,o,r){return(a=a&&t.call(i,e,o,r))?void 0:n}),!!a)};var M=x.some=x.any=function(e,t,i){t||(t=x.identity);var a=!1;return null==e?a:v&&e.some===v?e.some(t,i):(C(e,function(e,o,r){return a||(a=t.call(i,e,o,r))?n:void 0}),!!a)};x.contains=x.include=function(e,t){return null==e?!1:y&&e.indexOf===y?-1!=e.indexOf(t):M(e,function(e){return e===t})},x.invoke=function(e,t){var n=s.call(arguments,2),i=x.isFunction(t);return x.map(e,function(e){return(i?t:e[t]).apply(e,n)})},x.pluck=function(e,t){return x.map(e,x.property(t))},x.where=function(e,t){return x.filter(e,x.matches(t))},x.findWhere=function(e,t){return x.find(e,x.matches(t))},x.max=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&65535>e.length)return Math.max.apply(Math,e);var i=-1/0,a=-1/0;return C(e,function(e,o,r){var s=t?t.call(n,e,o,r):e;s>a&&(i=e,a=s)}),i},x.min=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&65535>e.length)return Math.min.apply(Math,e);var i=1/0,a=1/0;return C(e,function(e,o,r){var s=t?t.call(n,e,o,r):e;a>s&&(i=e,a=s)}),i},x.shuffle=function(e){var t,n=0,i=[];return C(e,function(e){t=x.random(n++),i[n-1]=i[t],i[t]=e}),i},x.sample=function(e,t,n){return null==t||n?(e.length!==+e.length&&(e=x.values(e)),e[x.random(e.length-1)]):x.shuffle(e).slice(0,Math.max(0,t))};var P=function(e){return null==e?x.identity:x.isFunction(e)?e:x.property(e)};x.sortBy=function(e,t,n){return t=P(t),x.pluck(x.map(e,function(e,i,a){return{value:e,index:i,criteria:t.call(n,e,i,a)}}).sort(function(e,t){var n=e.criteria,i=t.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return e.index-t.index}),"value")};var F=function(e){return function(t,n,i){var a={};return n=P(n),C(t,function(o,r){var s=n.call(i,o,r,t);e(a,s,o)}),a}};x.groupBy=F(function(e,t,n){x.has(e,t)?e[t].push(n):e[t]=[n]}),x.indexBy=F(function(e,t,n){e[t]=n}),x.countBy=F(function(e,t){x.has(e,t)?e[t]++:e[t]=1}),x.sortedIndex=function(e,t,n,i){n=P(n);for(var a=n.call(i,t),o=0,r=e.length;r>o;){var s=o+r>>>1;a>n.call(i,e[s])?o=s+1:r=s}return o},x.toArray=function(e){return e?x.isArray(e)?s.call(e):e.length===+e.length?x.map(e,x.identity):x.values(e):[]},x.size=function(e){return null==e?0:e.length===+e.length?e.length:x.keys(e).length},x.first=x.head=x.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:0>t?[]:s.call(e,0,t)},x.initial=function(e,t,n){return s.call(e,0,e.length-(null==t||n?1:t))},x.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:s.call(e,Math.max(e.length-t,0))},x.rest=x.tail=x.drop=function(e,t,n){return s.call(e,null==t||n?1:t)},x.compact=function(e){return x.filter(e,x.identity)};var _=function(e,t,n){return t&&x.every(e,x.isArray)?l.apply(n,e):(C(e,function(e){x.isArray(e)||x.isArguments(e)?t?r.apply(n,e):_(e,t,n):n.push(e)}),n)};x.flatten=function(e,t){return _(e,t,[])},x.without=function(e){return x.difference(e,s.call(arguments,1))},x.partition=function(e,t){var n=[],i=[];return C(e,function(e){(t(e)?n:i).push(e)}),[n,i]},x.uniq=x.unique=function(e,t,n,i){x.isFunction(t)&&(i=n,n=t,t=!1);var a=n?x.map(e,n,i):e,o=[],r=[];return C(a,function(n,i){(t?i&&r[r.length-1]===n:x.contains(r,n))||(r.push(n),o.push(e[i]))
}),o},x.union=function(){return x.uniq(x.flatten(arguments,!0))},x.intersection=function(e){var t=s.call(arguments,1);return x.filter(x.uniq(e),function(e){return x.every(t,function(t){return x.contains(t,e)})})},x.difference=function(e){var t=l.apply(i,s.call(arguments,1));return x.filter(e,function(e){return!x.contains(t,e)})},x.zip=function(){for(var e=x.max(x.pluck(arguments,"length").concat(0)),t=Array(e),n=0;e>n;n++)t[n]=x.pluck(arguments,""+n);return t},x.object=function(e,t){if(null==e)return{};for(var n={},i=0,a=e.length;a>i;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n},x.indexOf=function(e,t,n){if(null==e)return-1;var i=0,a=e.length;if(n){if("number"!=typeof n)return i=x.sortedIndex(e,t),e[i]===t?i:-1;i=0>n?Math.max(0,a+n):n}if(y&&e.indexOf===y)return e.indexOf(t,n);for(;a>i;i++)if(e[i]===t)return i;return-1},x.lastIndexOf=function(e,t,n){if(null==e)return-1;var i=null!=n;if(b&&e.lastIndexOf===b)return i?e.lastIndexOf(t,n):e.lastIndexOf(t);for(var a=i?n:e.length;a--;)if(e[a]===t)return a;return-1},x.range=function(e,t,n){1>=arguments.length&&(t=e||0,e=0),n=arguments[2]||1;for(var i=Math.max(Math.ceil((t-e)/n),0),a=0,o=Array(i);i>a;)o[a++]=e,e+=n;return o};var S=function(){};x.bind=function(e,t){var n,i;if(D&&e.bind===D)return D.apply(e,s.call(arguments,1));if(!x.isFunction(e))throw new TypeError;return n=s.call(arguments,2),i=function(){if(!(this instanceof i))return e.apply(t,n.concat(s.call(arguments)));S.prototype=e.prototype;var a=new S;S.prototype=null;var o=e.apply(a,n.concat(s.call(arguments)));return Object(o)===o?o:a}},x.partial=function(e){var t=s.call(arguments,1);return function(){for(var n=0,i=t.slice(),a=0,o=i.length;o>a;a++)i[a]===x&&(i[a]=arguments[n++]);for(;arguments.length>n;)i.push(arguments[n++]);return e.apply(this,i)}},x.bindAll=function(e){var t=s.call(arguments,1);if(0===t.length)throw Error("bindAll must be passed function names");return C(t,function(t){e[t]=x.bind(e[t],e)}),e},x.memoize=function(e,t){var n={};return t||(t=x.identity),function(){var i=t.apply(this,arguments);return x.has(n,i)?n[i]:n[i]=e.apply(this,arguments)}},x.delay=function(e,t){var n=s.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},x.defer=function(e){return x.delay.apply(x,[e,1].concat(s.call(arguments,1)))},x.throttle=function(e,t,n){var i,a,o,r=null,s=0;n||(n={});var l=function(){s=n.leading===!1?0:x.now(),r=null,o=e.apply(i,a),i=a=null};return function(){var u=x.now();s||n.leading!==!1||(s=u);var d=t-(u-s);return i=this,a=arguments,0>=d?(clearTimeout(r),r=null,s=u,o=e.apply(i,a),i=a=null):r||n.trailing===!1||(r=setTimeout(l,d)),o}},x.debounce=function(e,t,n){var i,a,o,r,s,l=function(){var u=x.now()-r;t>u?i=setTimeout(l,t-u):(i=null,n||(s=e.apply(o,a),o=a=null))};return function(){o=this,a=arguments,r=x.now();var u=n&&!i;return i||(i=setTimeout(l,t)),u&&(s=e.apply(o,a),o=a=null),s}},x.once=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}},x.wrap=function(e,t){return x.partial(t,e)},x.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},x.after=function(e,t){return function(){return 1>--e?t.apply(this,arguments):void 0}},x.keys=function(e){if(!x.isObject(e))return[];if(k)return k(e);var t=[];for(var n in e)x.has(e,n)&&t.push(n);return t},x.values=function(e){for(var t=x.keys(e),n=t.length,i=Array(n),a=0;n>a;a++)i[a]=e[t[a]];return i},x.pairs=function(e){for(var t=x.keys(e),n=t.length,i=Array(n),a=0;n>a;a++)i[a]=[t[a],e[t[a]]];return i},x.invert=function(e){for(var t={},n=x.keys(e),i=0,a=n.length;a>i;i++)t[e[n[i]]]=n[i];return t},x.functions=x.methods=function(e){var t=[];for(var n in e)x.isFunction(e[n])&&t.push(n);return t.sort()},x.extend=function(e){return C(s.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},x.pick=function(e){var t={},n=l.apply(i,s.call(arguments,1));return C(n,function(n){n in e&&(t[n]=e[n])}),t},x.omit=function(e){var t={},n=l.apply(i,s.call(arguments,1));for(var a in e)x.contains(n,a)||(t[a]=e[a]);return t},x.defaults=function(e){return C(s.call(arguments,1),function(t){if(t)for(var n in t)void 0===e[n]&&(e[n]=t[n])}),e},x.clone=function(e){return x.isObject(e)?x.isArray(e)?e.slice():x.extend({},e):e},x.tap=function(e,t){return t(e),e};var E=function(e,t,n,i){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof x&&(e=e._wrapped),t instanceof x&&(t=t._wrapped);var a=u.call(e);if(a!=u.call(t))return!1;switch(a){case"[object String]":return e==t+"";case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var o=n.length;o--;)if(n[o]==e)return i[o]==t;var r=e.constructor,s=t.constructor;if(r!==s&&!(x.isFunction(r)&&r instanceof r&&x.isFunction(s)&&s instanceof s)&&"constructor"in e&&"constructor"in t)return!1;n.push(e),i.push(t);var l=0,d=!0;if("[object Array]"==a){if(l=e.length,d=l==t.length)for(;l--&&(d=E(e[l],t[l],n,i)););}else{for(var c in e)if(x.has(e,c)&&(l++,!(d=x.has(t,c)&&E(e[c],t[c],n,i))))break;if(d){for(c in t)if(x.has(t,c)&&!l--)break;d=!l}}return n.pop(),i.pop(),d};x.isEqual=function(e,t){return E(e,t,[],[])},x.isEmpty=function(e){if(null==e)return!0;if(x.isArray(e)||x.isString(e))return 0===e.length;for(var t in e)if(x.has(e,t))return!1;return!0},x.isElement=function(e){return!(!e||1!==e.nodeType)},x.isArray=w||function(e){return"[object Array]"==u.call(e)},x.isObject=function(e){return e===Object(e)},C(["Arguments","Function","String","Number","Date","RegExp"],function(e){x["is"+e]=function(t){return u.call(t)=="[object "+e+"]"}}),x.isArguments(arguments)||(x.isArguments=function(e){return!(!e||!x.has(e,"callee"))}),true&&(x.isFunction=function(e){return"function"==typeof e}),x.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},x.isNaN=function(e){return x.isNumber(e)&&e!=+e},x.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==u.call(e)},x.isNull=function(e){return null===e},x.isUndefined=function(e){return void 0===e},x.has=function(e,t){return d.call(e,t)},x.noConflict=function(){return e._=t,this},x.identity=function(e){return e},x.constant=function(e){return function(){return e}},x.property=function(e){return function(t){return t[e]}},x.matches=function(e){return function(t){if(t===e)return!0;for(var n in e)if(e[n]!==t[n])return!1;return!0}},x.times=function(e,t,n){for(var i=Array(Math.max(0,e)),a=0;e>a;a++)i[a]=t.call(n,a);return i},x.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},x.now=Date.now||function(){return(new Date).getTime()};var N={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};N.unescape=x.invert(N.escape);var O={escape:RegExp("["+x.keys(N.escape).join("")+"]","g"),unescape:RegExp("("+x.keys(N.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(e){x[e]=function(t){return null==t?"":(""+t).replace(O[e],function(t){return N[e][t]})}}),x.result=function(e,t){if(null==e)return void 0;var n=e[t];return x.isFunction(n)?n.call(e):n},x.mixin=function(e){C(x.functions(e),function(t){var n=x[t]=e[t];x.prototype[t]=function(){var e=[this._wrapped];return r.apply(e,arguments),A.call(this,n.apply(x,e))}})};var $=0;x.uniqueId=function(e){var t=++$+"";return e?e+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var I=/(.)^/,j={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},L=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(e,t,n){var i;n=x.defaults({},n,x.templateSettings);var a=RegExp([(n.escape||I).source,(n.interpolate||I).source,(n.evaluate||I).source].join("|")+"|$","g"),o=0,r="__p+='";e.replace(a,function(t,n,i,a,s){return r+=e.slice(o,s).replace(L,function(e){return"\\"+j[e]}),n&&(r+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),i&&(r+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),a&&(r+="';\n"+a+"\n__p+='"),o=s+t.length,t}),r+="';\n",n.variable||(r="with(obj||{}){\n"+r+"}\n"),r="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+r+"return __p;\n";try{i=Function(n.variable||"obj","_",r)}catch(s){throw s.source=r,s}if(t)return i(t,x);var l=function(e){return i.call(this,e,x)};return l.source="function("+(n.variable||"obj")+"){\n"+r+"}",l},x.chain=function(e){return x(e).chain()};var A=function(e){return this._chain?x(e).chain():e};x.mixin(x),C(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=i[e];x.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!=e&&"splice"!=e||0!==n.length||delete n[0],A.call(this,n)}}),C(["concat","join","slice"],function(e){var t=i[e];x.prototype[e]=function(){return A.call(this,t.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return x})}.call(this),function(e,t){if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(n,i,a){e.Backbone=t(e,a,n,i)});else if("undefined"!=typeof exports){var n=require("underscore");t(e,exports,n)}else e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(this,function(e,t,n,i){var a=e.Backbone,o=[];o.push;var r=o.slice;o.splice,t.VERSION="1.1.2",t.$=i,t.noConflict=function(){return e.Backbone=a,this},t.emulateHTTP=!1,t.emulateJSON=!1;var s=t.Events={on:function(e,t,n){if(!u(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var i=this._events[e]||(this._events[e]=[]);return i.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,i){if(!u(this,"once",e,[t,i])||!t)return this;var a=this,o=n.once(function(){a.off(e,o),t.apply(this,arguments)});return o._callback=t,this.on(e,o,i)},off:function(e,t,i){var a,o,r,s,l,d,c,h;if(!this._events||!u(this,"off",e,[t,i]))return this;if(!e&&!t&&!i)return this._events=void 0,this;for(s=e?[e]:n.keys(this._events),l=0,d=s.length;d>l;l++)if(e=s[l],r=this._events[e]){if(this._events[e]=a=[],t||i)for(c=0,h=r.length;h>c;c++)o=r[c],(t&&t!==o.callback&&t!==o.callback._callback||i&&i!==o.context)&&a.push(o);a.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=r.call(arguments,1);if(!u(this,"trigger",e,t))return this;var n=this._events[e],i=this._events.all;return n&&d(n,t),i&&d(i,arguments),this},stopListening:function(e,t,i){var a=this._listeningTo;if(!a)return this;var o=!t&&!i;i||"object"!=typeof t||(i=this),e&&((a={})[e._listenId]=e);for(var r in a)e=a[r],e.off(t,i,this),(o||n.isEmpty(e._events))&&delete this._listeningTo[r];return this}},l=/\s+/,u=function(e,t,n,i){if(!n)return!0;if("object"==typeof n){for(var a in n)e[t].apply(e,[a,n[a]].concat(i));return!1}if(l.test(n)){for(var o=n.split(l),r=0,s=o.length;s>r;r++)e[t].apply(e,[o[r]].concat(i));return!1}return!0},d=function(e,t){var n,i=-1,a=e.length,o=t[0],r=t[1],s=t[2];switch(t.length){case 0:for(;a>++i;)(n=e[i]).callback.call(n.ctx);return;case 1:for(;a>++i;)(n=e[i]).callback.call(n.ctx,o);return;case 2:for(;a>++i;)(n=e[i]).callback.call(n.ctx,o,r);return;case 3:for(;a>++i;)(n=e[i]).callback.call(n.ctx,o,r,s);return;default:for(;a>++i;)(n=e[i]).callback.apply(n.ctx,t);return}},c={listenTo:"on",listenToOnce:"once"};n.each(c,function(e,t){s[t]=function(t,i,a){var o=this._listeningTo||(this._listeningTo={}),r=t._listenId||(t._listenId=n.uniqueId("l"));return o[r]=t,a||"object"!=typeof i||(a=this),t[e](i,a,this),this}}),s.bind=s.on,s.unbind=s.off,n.extend(t,s);var h=t.Model=function(e,t){var i=e||{};t||(t={}),this.cid=n.uniqueId("c"),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(i=this.parse(i,t)||{}),i=n.defaults({},i,n.result(this,"defaults")),this.set(i,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(h.prototype,s,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,i){var a,o,r,s,l,u,d,c;if(null==e)return this;if("object"==typeof e?(o=e,i=t):(o={})[e]=t,i||(i={}),!this._validate(o,i))return!1;r=i.unset,l=i.silent,s=[],u=this._changing,this._changing=!0,u||(this._previousAttributes=n.clone(this.attributes),this.changed={}),c=this.attributes,d=this._previousAttributes,this.idAttribute in o&&(this.id=o[this.idAttribute]);for(a in o)t=o[a],n.isEqual(c[a],t)||s.push(a),n.isEqual(d[a],t)?delete this.changed[a]:this.changed[a]=t,r?delete c[a]:c[a]=t;if(!l){s.length&&(this._pending=i);for(var h=0,f=s.length;f>h;h++)this.trigger("change:"+s[h],this,c[s[h]],i)}if(u)return this;if(!l)for(;this._pending;)i=this._pending,this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var i in this.attributes)t[i]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?n.clone(this.changed):!1;var t,i=!1,a=this._changing?this._previousAttributes:this.attributes;for(var o in e)n.isEqual(a[o],t=e[o])||((i||(i={}))[o]=t);return i},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){e=e?n.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=this,i=e.success;return e.success=function(n){return t.set(t.parse(n,e),e)?(i&&i(t,n,e),t.trigger("sync",t,n,e),void 0):!1},L(this,e),this.sync("read",this,e)},save:function(e,t,i){var a,o,r,s=this.attributes;if(null==e||"object"==typeof e?(a=e,i=t):(a={})[e]=t,i=n.extend({validate:!0},i),a&&!i.wait){if(!this.set(a,i))return!1}else if(!this._validate(a,i))return!1;a&&i.wait&&(this.attributes=n.extend({},s,a)),void 0===i.parse&&(i.parse=!0);var l=this,u=i.success;return i.success=function(e){l.attributes=s;var t=l.parse(e,i);return i.wait&&(t=n.extend(a||{},t)),n.isObject(t)&&!l.set(t,i)?!1:(u&&u(l,e,i),l.trigger("sync",l,e,i),void 0)},L(this,i),o=this.isNew()?"create":i.patch?"patch":"update","patch"===o&&(i.attrs=a),r=this.sync(o,this,i),a&&i.wait&&(this.attributes=s),r},destroy:function(e){e=e?n.clone(e):{};var t=this,i=e.success,a=function(){t.trigger("destroy",t,t.collection,e)};if(e.success=function(n){(e.wait||t.isNew())&&a(),i&&i(t,n,e),t.isNew()||t.trigger("sync",t,n,e)},this.isNew())return e.success(),!1;L(this,e);var o=this.sync("delete",this,e);return e.wait||a(),o},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||j();return this.isNew()?e:e.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(e){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},n.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var i=this.validationError=this.validate(e,t)||null;return i?(this.trigger("invalid",this,i,n.extend(t,{validationError:i})),!1):!0}});var f=["keys","values","pairs","invert","pick","omit"];n.each(f,function(e){h.prototype[e]=function(){var t=r.call(arguments);return t.unshift(this.attributes),n[e].apply(n,t)}});var p=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},m={add:!0,remove:!0,merge:!0},g={add:!0,remove:!1};n.extend(p.prototype,s,{model:h,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,g))},remove:function(e,t){var i=!n.isArray(e);e=i?[e]:n.clone(e),t||(t={});var a,o,r,s;for(a=0,o=e.length;o>a;a++)s=e[a]=this.get(e[a]),s&&(delete this._byId[s.id],delete this._byId[s.cid],r=this.indexOf(s),this.models.splice(r,1),this.length--,t.silent||(t.index=r,s.trigger("remove",s,this,t)),this._removeReference(s,t));return i?e[0]:e},set:function(e,t){t=n.defaults({},t,m),t.parse&&(e=this.parse(e,t));var i=!n.isArray(e);e=i?e?[e]:[]:n.clone(e);var a,o,r,s,l,u,d,c=t.at,f=this.model,p=this.comparator&&null==c&&t.sort!==!1,g=n.isString(this.comparator)?this.comparator:null,v=[],y=[],b={},w=t.add,k=t.merge,D=t.remove,x=!p&&w&&D?[]:!1;for(a=0,o=e.length;o>a;a++){if(l=e[a]||{},r=l instanceof h?s=l:l[f.prototype.idAttribute||"id"],u=this.get(r))D&&(b[u.cid]=!0),k&&(l=l===s?s.attributes:l,t.parse&&(l=u.parse(l,t)),u.set(l,t),p&&!d&&u.hasChanged(g)&&(d=!0)),e[a]=u;else if(w){if(s=e[a]=this._prepareModel(l,t),!s)continue;v.push(s),this._addReference(s,t)}s=u||s,!x||!s.isNew()&&b[s.id]||x.push(s),b[s.id]=!0}if(D){for(a=0,o=this.length;o>a;++a)b[(s=this.models[a]).cid]||y.push(s);y.length&&this.remove(y,t)}if(v.length||x&&x.length)if(p&&(d=!0),this.length+=v.length,null!=c)for(a=0,o=v.length;o>a;a++)this.models.splice(c+a,0,v[a]);else{x&&(this.models.length=0);var C=x||v;for(a=0,o=C.length;o>a;a++)this.models.push(C[a])}if(d&&this.sort({silent:!0}),!t.silent){for(a=0,o=v.length;o>a;a++)(s=v[a]).trigger("add",s,this,t);(d||x&&x.length)&&this.trigger("sort",this,t)}return i?e[0]:e},reset:function(e,t){t||(t={});for(var i=0,a=this.models.length;a>i;i++)this._removeReference(this.models[i],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(){return r.apply(this.models,arguments)},get:function(e){return null==e?void 0:this._byId[e]||this._byId[e.id]||this._byId[e.cid]},at:function(e){return this.models[e]},where:function(e,t){return n.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw Error("Cannot sort a set without a comparator");return e||(e={}),n.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return n.invoke(this.models,"get",e)},fetch:function(e){e=e?n.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=e.success,i=this;return e.success=function(n){var a=e.reset?"reset":"set";i[a](n,e),t&&t(i,n,e),i.trigger("sync",i,n,e)},L(this,e),this.sync("read",this,e)},create:function(e,t){if(t=t?n.clone(t):{},!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var i=this,a=t.success;return t.success=function(e,n){t.wait&&i.add(e,t),a&&a(e,n,t)},e.save(null,t),e},parse:function(e){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof h)return e;t=t?n.clone(t):{},t.collection=this;var i=new this.model(e,t);return i.validationError?(this.trigger("invalid",this,i.validationError,t),!1):i},_addReference:function(e){this._byId[e.cid]=e,null!=e.id&&(this._byId[e.id]=e),e.collection||(e.collection=this),e.on("all",this._onModelEvent,this)},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,i){("add"!==e&&"remove"!==e||n===this)&&("destroy"===e&&this.remove(t,i),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))}});var v=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];n.each(v,function(e){p.prototype[e]=function(){var t=r.call(arguments);return t.unshift(this.models),n[e].apply(n,t)}});var y=["groupBy","countBy","sortBy","indexBy"];n.each(y,function(e){p.prototype[e]=function(t,i){var a=n.isFunction(t)?t:function(e){return e.get(t)};return n[e](this.models,a,i)}});var b=t.View=function(e){this.cid=n.uniqueId("view"),e||(e={}),n.extend(this,n.pick(e,k)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},w=/^(\S+)\s*(.*)$/,k=["model","collection","el","id","attributes","className","tagName","events"];n.extend(b.prototype,s,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,n){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=n.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var i=e[t];if(n.isFunction(i)||(i=this[e[t]]),i){var a=t.match(w),o=a[1],r=a[2];i=n.bind(i,this),o+=".delegateEvents"+this.cid,""===r?this.$el.on(o,i):this.$el.on(o,r,i)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"),!1);else{var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e["class"]=n.result(this,"className"));var i=t.$("<"+n.result(this,"tagName")+">").attr(e);this.setElement(i,!1)}}}),t.sync=function(e,i,a){var o=x[e];n.defaults(a||(a={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var r={type:o,dataType:"json"};if(a.url||(r.url=n.result(i,"url")||j()),null!=a.data||!i||"create"!==e&&"update"!==e&&"patch"!==e||(r.contentType="application/json",r.data=JSON.stringify(a.attrs||i.toJSON(a))),a.emulateJSON&&(r.contentType="application/x-www-form-urlencoded",r.data=r.data?{model:r.data}:{}),a.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){r.type="POST",a.emulateJSON&&(r.data._method=o);var s=a.beforeSend;a.beforeSend=function(e){return e.setRequestHeader("X-HTTP-Method-Override",o),s?s.apply(this,arguments):void 0}}"GET"===r.type||a.emulateJSON||(r.processData=!1),"PATCH"===r.type&&D&&(r.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=a.xhr=t.ajax(n.extend(r,a));return i.trigger("request",i,l,a),l};var D=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),x={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var C=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},T=/\((.*?)\)/g,M=/(\(\?)?:\w+/g,P=/\*\w+/g,F=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(C.prototype,s,{initialize:function(){},route:function(e,i,a){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(i)&&(a=i,i=""),a||(a=this[i]);var o=this;return t.history.route(e,function(n){var r=o._extractParameters(e,n);o.execute(a,r),o.trigger.apply(o,["route:"+i].concat(r)),o.trigger("route",i,r),t.history.trigger("route",o,i,r)}),this},execute:function(e,t){e&&e.apply(this,t)},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var e,t=n.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(F,"\\$&").replace(T,"(?:$1)?").replace(M,function(e,t){return t?e:"([^/?]+)"}).replace(P,"([^?]*?)"),RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var i=e.exec(t).slice(1);return n.map(i,function(e,t){return t===i.length-1?e||null:e?decodeURIComponent(e):null})}});var _=t.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},S=/^[#\/]|\s+$/g,E=/^\/+|\/+$/g,N=/msie [\w.]+/,O=/\/$/,$=/#.*$/;_.started=!1,n.extend(_.prototype,s,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=decodeURI(this.location.pathname+this.location.search);var n=this.root.replace(O,"");e.indexOf(n)||(e=e.slice(n.length))}else e=this.getHash();return e.replace(S,"")},start:function(e){if(_.started)throw Error("Backbone.history has already been started");_.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var i=this.getFragment(),a=document.documentMode,o=N.exec(navigator.userAgent.toLowerCase())&&(!a||7>=a);if(this.root=("/"+this.root+"/").replace(E,"/"),o&&this._wantsHashChange){var r=t.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=r.hide().appendTo("body")[0].contentWindow,this.navigate(i)}this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!o?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=i;var s=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&s.hash&&(this.fragment=this.getHash().replace(S,""),this.history.replaceState({},document.title,this.root+this.fragment))}return this.options.silent?void 0:this.loadUrl()},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),_.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment?!1:(this.iframe&&this.navigate(e),this.loadUrl(),void 0)},loadUrl:function(e){return e=this.fragment=this.getFragment(e),n.any(this.handlers,function(t){return t.route.test(e)?(t.callback(e),!0):void 0})},navigate:function(e,t){if(!_.started)return!1;t&&t!==!0||(t={trigger:!!t});var n=this.root+(e=this.getFragment(e||""));if(e=e.replace($,""),this.fragment!==e){if(this.fragment=e,""===e&&"/"!==n&&(n=n.slice(0,-1)),this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,n){if(n){var i=e.href.replace(/(javascript:|#).*$/,"");e.replace(i+"#"+t)}else e.hash="#"+t}}),t.history=new _;var I=function(e,t){var i,a=this;i=e&&n.has(e,"constructor")?e.constructor:function(){return a.apply(this,arguments)},n.extend(i,a,t);var o=function(){this.constructor=i};return o.prototype=a.prototype,i.prototype=new o,e&&n.extend(i.prototype,e),i.__super__=a.prototype,i};h.extend=p.extend=C.extend=b.extend=_.extend=I;var j=function(){throw Error('A "url" property or function must be specified')},L=function(e,t){var n=t.error;t.error=function(i){n&&n(e,i,t),e.trigger("error",e,i,t)}};return t});var RCBase64={keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t,n,i,a,o,r,s,l="",u=0;for(e=this.utf8_encode(e);e.length>u;)t=e.charCodeAt(u++),n=e.charCodeAt(u++),i=e.charCodeAt(u++),a=t>>2,o=(3&t)<<4|n>>4,r=(15&n)<<2|i>>6,s=63&i,isNaN(n)?r=s=64:isNaN(i)&&(s=64),l=l+this.keyStr.charAt(a)+this.keyStr.charAt(o)+this.keyStr.charAt(r)+this.keyStr.charAt(s);return l},decode:function(e){var t,n,i,a,o,r,s,l="",u=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");e.length>u;)a=this.keyStr.indexOf(e.charAt(u++)),o=this.keyStr.indexOf(e.charAt(u++)),r=this.keyStr.indexOf(e.charAt(u++)),s=this.keyStr.indexOf(e.charAt(u++)),t=a<<2|o>>4,n=(15&o)<<4|r>>2,i=(3&r)<<6|s,l+=String.fromCharCode(t),64!==r&&(l+=String.fromCharCode(n)),64!==s&&(l+=String.fromCharCode(i));return l=this.utf8_decode(l)},utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");var t,n,i="";for(t=0;e.length>t;t++)n=e.charCodeAt(t),128>n?i+=String.fromCharCode(n):n>127&&2048>n?(i+=String.fromCharCode(192|n>>6),i+=String.fromCharCode(128|63&n)):(i+=String.fromCharCode(224|n>>12),i+=String.fromCharCode(128|63&n>>6),i+=String.fromCharCode(128|63&n));return i},utf8_decode:function(e){for(var t="",n=0,i=0,a=0,o=0;e.length>n;)i=e.charCodeAt(n),128>i?(t+=String.fromCharCode(i),n++):i>191&&224>i?(a=e.charCodeAt(n+1),t+=String.fromCharCode((31&i)<<6|63&a),n+=2):(a=e.charCodeAt(n+1),o=e.charCodeAt(n+2),t+=String.fromCharCode((15&i)<<12|(63&a)<<6|63&o),n+=3);return t}},RestClient;if(RestClient=function(){this.VERSION="RESTCLIENT_VERSION",this.authorization={},this.server={},this.response={},this.headers={},this.accessToken={},this.autoUseRefreshToken=!0,this.autoStoreAccessToken=!0,this.authorizationType="none",this.contentType="application/json",this.sendOAuthBearerAuthorization=!1,this.dataType="json",this.oauth2NeedsAuthorization=!0,this.expiredAccessTokenMessage="",this.restfulBehavior=!0,this.backupAJAXURL=null,this.acceptType=null,this.RESTMethods={create:"POST",read:"GET",update:"PUT","delete":"DELETE"},this.OAUTH2GrantTypes={code:"authorization_code",implicit:"token",user:"password",client:"client_credentials",refresh:"refresh_token"},RestClient.prototype.initObject.call(this)},RestClient.prototype.HTTP_SUCCESS=["200","201","202","204","207"],RestClient.prototype.HTTP_BAD_REQUEST=400,RestClient.prototype.HTTP_UNAUTHORIZED=401,RestClient.prototype.OAUTH2_INVALID_GRANT="invalid_grant",RestClient.prototype.initObject=function(){this.authorization={},this.server={},this.response={},this.headers={},this.accessToken={},this.autoUseRefreshToken=!0,this.autoStoreAccessToken=!0,this.authorizationType="none",this.contentType="application/json",this.acceptType="application/json",this.sendOAuthBearerAuthorization=!1,this.oauth2NeedsAuthorization=!0,this.dataType="json",this.expiredAccessTokenMessage="The access token provided has expired."},RestClient.prototype.setUseRefreshTokenAutomatically=function(e){return _.isBoolean(e)&&(this.autoUseRefreshToken=e),this},RestClient.prototype.setStoreAccessTokenAutomatically=function(e){return _.isBoolean(e)&&(this.autoStoreAccessToken=e),this},RestClient.prototype.setAuthorizationType=function(e){var t={none:1,basic:1,oauth2:1};return t[e]&&(this.authorizationType=e),this},RestClient.prototype.setContentType=function(e){return this.contentType=e,this},RestClient.prototype.setAcceptType=function(e){var t={plain:"text/plain",xhtml_xml:"application/xhtml+xml",json:"application/json",xml:"application/xml",all:"*/*"};return t[e]&&(this.acceptType=t[e]),this},RestClient.prototype.setSendBearerAuthorization=function(e){return _.isBoolean(e)&&(this.sendOAuthBearerAuthorization=e),this
},RestClient.prototype.setOAuth2NeedsAuthorization=function(e){return _.isBoolean(e)&&(this.oauth2NeedsAuthorization=e),this},RestClient.prototype.setDataType=function(e){var t={json:"application/json",plain:"text/plain",form:"application/x-www-form-urlencoded",html:"text/html"};return t[e]&&(this.dataType=e,this.contentType=t[e]),this},RestClient.prototype.setAccessTokenExpiredMessage=function(e){return this.expiredAccessTokenMessage=e,this},RestClient.prototype.getVersion=function(){return this.VERSION},RestClient.prototype.setClient=function(e,t,n){return this.authorization.client_id=e,this.authorization.client_secret=t,this.authorization.client_url="undefined"!==n?n:null,this},RestClient.prototype.setGrantType=function(e,t){return this.authorization.grant_type="undefined"!==this.OAUTH2GrantTypes[e]?this.OAUTH2GrantTypes[e]:null,this.authorization=_.extend(this.authorization,t),this},RestClient.prototype.setAuthorizationServer=function(e){var t,n=!0;return e===void 0||null===e?n=!1:(t=/(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/,e.match(t)?this.server.rest_auth_uri=e:n=!1),n},RestClient.prototype.setHeader=function(e,t){var n,i=!0;return e&&t?(n=JSON.parse('{"'+e+'" :  "'+t+'"}'),this.headers=_.extend(this.headers,n)):i=!1,i},RestClient.prototype.JSONParse=function(e){var t;try{t=e?""===e?"":JSON.parse(e):""}catch(n){t="ERROR_PARSE"}return t},RestClient.prototype.setBasicCredentials=function(e,t){return this.authorization.basic_user=e,this.authorization.basic_password=t,this},RestClient.prototype.setAccessToken=function(e){return"object"==typeof e&&(this.accessToken=e),this},RestClient.prototype.setRestfulBehavior=function(e){return _.isBoolean(e)&&(this.restfulBehavior=e),this},RestClient.prototype.setBackupAjaxUrl=function(e){return this.backupAJAXURL=e,this},RestClient.prototype.toParams=function(e){var t=_.keys(e),n=[];return _.each(t,function(t){n.push(t+"="+e[t])}),n.join("&")},RestClient.prototype.prepareBody=function(e){var t="";return"json"===this.dataType||"jsonp"===this.dataType?"object"==typeof e&&(t=JSON.stringify(e)):t=this.toParams(e),t},RestClient.prototype.createXHR=function(){var e;if(window.XMLHttpRequest)e=new XMLHttpRequest;else try{e=new ActiveXObject("MSXML2.XMLHTTP")}catch(t){try{e=new ActiveXObject("Microsoft.XMLHTTP")}catch(n){}}return e?e:!1},RestClient.prototype.authorize=function(e){var t,n,i,a,o=this,r=!1,s="create",l=this.RESTMethods[s];t=RCBase64.encode(this.authorization.client_id+":"+this.authorization.client_secret),n=this.createXHR();try{n.open(l,this.server.rest_auth_uri,!1)}catch(u){return e.xhrfailure?e.xhrfailure(u,{}):this.XHRFailure(u,{}),r}if(n.onreadystatechange=function(){if(e.ready?e.ready(n):o.AuthorizeReady(n),4===n.readyState){if(a=o.JSONParse(n.responseText),-1!=o.HTTP_SUCCESS.indexOf(n.status+"")&&"ERROR_PARSE"!==a)if(o.autoStoreAccessToken&&(o.accessToken=a.token||{}),r=!0,e.success)try{e.success(n,a)}catch(t){throw Error(t.message)}else o.AuthorizeSuccess(n,a);else if("ERROR_PARSE"===a&&(a={success:!1,error:{error:o.HTTP_BAD_REQUEST,error_description:"Response is not a valid JSON"}}),e.failure)try{e.failure(n,a)}catch(t){throw Error(t.message)}else o.AuthorizeFailure(n,a);"function"==typeof e.complete&&e.complete(n,a)}},i={},this.authorization.grant_type)switch(i.grant_type=this.authorization.grant_type,this.authorization.grant_type){case"authorization_code":i.code=this.authorization.code;break;case"token":i.token=this.authorization.token;break;case"password":i.username=this.authorization.username,i.password=this.authorization.password;break;case"client_credentials":i.client_id=this.authorization.client_id,i.client_id=this.authorization.client_secret;break;case"refresh_token":i.refresh_token=this.authorization.refresh_token}return this.oauth2NeedsAuthorization&&n.setRequestHeader("Authorization","Basic "+t),n.setRequestHeader("Accept",this.acceptType),n.setRequestHeader("Content-Type",this.contentType),_.each(this.headers,function(e,t){n.setRequestHeader(t,e)}),n.send(this.prepareBody(i)),r},RestClient.prototype.prepareReqFields=function(e){var t;return t={success:!1,error:{error:this.HTTP_BAD_REQUEST,error_description:"Required fields not found"},fields:e}},RestClient.prototype.prepareConsumeUrl=function(e,t,n,i){var a,o,r=this.acceptType,s=this.contentType,l=!1;if(this.restfulBehavior)switch(e){case"read":a=t,n&&(a+=n),"oauth2"!==this.authorizationType||this.sendOAuthBearerAuthorization||(l=!0,a+="?access_token="+this.accessToken.access_token),i&&i!=={}&&(a+=l?"&":"?",a+=this.toParams(i)),o=null,null===s&&(s="application/json");break;case"create":a=t,o=i||{},"oauth2"!==this.authorizationType||this.sendOAuthBearerAuthorization||(o.access_token=this.accessToken.access_token),o=this.prepareBody(o);break;case"update":a=t,n&&(a+=n),o=i||{},"oauth2"!==this.authorizationType||this.sendOAuthBearerAuthorization||(o.access_token=this.accessToken.access_token),o=this.prepareBody(o);break;case"delete":a=t,n&&(a+=n),o=i||{},"oauth2"!==this.authorizationType||this.sendOAuthBearerAuthorization||(o.access_token=this.accessToken.access_token),o=this.prepareBody(o)}else a=this.backupAJAXURL,o={operation:e,url:t,id:n,data:i},o="data='"+encodeURIComponent(JSON.stringify(o))+"'",null===s&&(s="application/json");return r||(r="*/*"),{url:a,body:o,content_type:s,acceptType:r}},RestClient.prototype.getCall=function(e){return e.operation="read",this.consume(e)},RestClient.prototype.postCall=function(e){return e.operation="create",this.consume(e)},RestClient.prototype.putCall=function(e){return e.operation="update",this.consume(e)},RestClient.prototype.deleteCall=function(e){return e.operation="delete",this.consume(e)},RestClient.prototype.consume=function(e){var t,n,i,a,o,r,s,l,u,d,c,h,f,p,m,g={},v=!0,y=[],b=!1;if(e.operation?i=e.operation:(v=!1,y.push("operation")),e.url?u=e.url:(v=!1,y.push("url")),d=e.data||null,c=e.id||null,!v)return e.failure?e.failure(null,this.prepareReqFields(y)):this.ConsumeFailure(null,this.prepareReqFields(y)),v;h=this.prepareConsumeUrl(i,u,c,d),r=h.url,o=h.body,p=h.content_type,m=h.acceptType,n=this.createXHR(),a=this.restfulBehavior?this.RESTMethods[i]:this.RESTMethods.create;try{switch(n.open(a,r,!1),this.authorizationType){case"none":break;case"basic":t=RCBase64.encode(this.authorization.basic_user+":"+this.authorization.basic_password),n.setRequestHeader("Authorization","Basic "+t);break;case"oauth2":if(!this.accessToken.access_token)return v=!1,y.push("access_token"),l={success:!1,error:{error:this.HTTP_BAD_REQUEST,error_description:"Access Token not defined"}},e.failure?e.failure(null,this.prepareReqFields(y)):this.ConsumeFailure(null,this.prepareReqFields(y)),v;this.sendOAuthBearerAuthorization&&(f="Bearer "+this.accessToken.access_token,n.setRequestHeader("Authorization",f))}}catch(w){return e.xhrfailure?e.xhrfailure(w,d):this.XHRFailure(w,d),!1}s=this,n.onreadystatechange=function(){if(e.ready?e.ready(n):s.ConsumeReady(n),4===n.readyState){if(g=s.JSONParse(n.responseText),-1!=s.HTTP_SUCCESS.indexOf(n.status+"")&&"ERROR_PARSE"!==g)if(s.autoStoreAccessToken&&(s.accessToken=g.token||{}),v=!0,e.success)try{e.success(n,g)}catch(t){throw Error(t.message)}else s.AuthorizeSuccess(n,g);else if(v=!1,"ERROR_PARSE"===g?g={success:!1,error:{error:s.HTTP_BAD_REQUEST,error_description:"Response is not a valid JSON"}}:(g.error===s.OAUTH2_INVALID_GRANT&&g.error_description===s.expiredAccessTokenMessage&&(b=!0),n.status===s.HTTP_UNAUTHORIZED&&s.autoUseRefreshToken&&b&&(s.accessToken.refresh_token?(s.setGrantType("refresh",{refresh_token:s.accessToken.refresh_token}),s.authorize({success:function(){v=s.consume(e),v&&(e.autorefresh?e.autorefresh(s.accessToken):s.AuthorizeAutoRefresh(s.accessToken))},failure:function(t,n){v=!1,e.failure?e.failure(null,n):s.ConsumeFailure(null,n)}})):(v=!1,g={success:!1,error:{error:s.HTTP_UNAUTHORIZED,error_description:"Refresh token is not defined"}}))),e.failure)try{e.failure(n,g)}catch(t){throw Error(t.message)}else s.AuthorizeFailure(n,g);"function"==typeof e.complete&&e.complete(n,g)}},n.setRequestHeader("Accept",m),n.setRequestHeader("Content-Type",p),_.each(this.headers,function(e,t){n.setRequestHeader(t,e)});try{n.send(o)}catch(k){try{e.failure(n,g)}catch(D){throw Error(D.message)}}return v},RestClient.prototype.XHRFailure=function(){},RestClient.prototype.AuthorizeSuccess=function(){},RestClient.prototype.AuthorizeFailure=function(){},RestClient.prototype.AuthorizeReady=function(){},RestClient.prototype.AuthorizeAutoRefresh=function(){},RestClient.prototype.ConsumeSuccess=function(){},RestClient.prototype.ConsumeFailure=function(){},RestClient.prototype.ConsumeReady=function(){},"undefined"!=typeof exports){module.exports={RestClient:RestClient,RCBase64:RCBase64};var _=require("underscore")}var language={en:{ERROR_NETWORK_FORM_DATA:"Network Error - Error getting form data",ERROR_NETWORK_SUBMIT_NEW:"Network Error - Error submitting a new case",ERROR_NETWORK_SUBMIT_CASE:"Network Error - Error submitting a case",ERROR_NETWORK_ROUTE:"Network Error - Error deriving a case",ERROR_NETWORK_JSON_FORM:"Network Error - Error in the form definition",ERROR_NETWORK_TRIGGER:"Network Error - Error in trigger execute",INFO_PMDYNAFORM_JSON:"There isn't a JSON definition",INFO_PMDYNAFORM_DERIVATED:"Routed successfully",INFO_PMDYNAFORM_SUBMIT:"Submited successfully",INFO_CASE_FINISHED:"Case finished"}};Array.prototype.filter||(Array.prototype.filter=function(e){"use strict";if(void 0===this||null===this)throw new TypeError;var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var i=[],a=arguments.length>=2?arguments[1]:void 0,o=0;n>o;o++)if(o in t){var r=t[o];e.call(a,r,o,t)&&i.push(r)}return i}),String.prototype.trim||function(){var e=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;String.prototype.trim=function(){return this.replace(e,"")}}(),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length>>>0,n=Number(arguments[1])||0;for(n=0>n?Math.ceil(n):Math.floor(n),0>n&&(n+=t);t>n;n++)if(n in this&&this[n]===e)return n;return-1});var PMDynaform={VERSION:"0.1.0",view:{},model:{},collection:{},Extension:{},restData:{}};PMDynaform.extendNamespace=function(e,t){var n,i,a,o;if(2!==arguments.length)throw Error("Dynaform.extendNamespace(): method needs 2 arguments");for(i=e.split("."),"PMDynaform"===i[0]&&(i=i.slice(1)),n=PMDynaform,o=0;i.length-1>o;o+=1)a=i[o],n[a]===void 0&&(n[a]={}),n=n[a];return a=i[i.length-1],n[a],n[a]=t,t},PMDynaform.inheritFrom=function(e,t){function n(e){var t=function(){};return t.prototype=e,new t}var i,a,o,r,s;if(2!==arguments.length)throw Error("PMDynaform.inheritFrom(): method needs 2 arguments");for(o=e.split("."),"PMDynaform"===o[0]&&(o=o.slice(1)),i=PMDynaform,r=0;o.length>r;r+=1){if(a=o[r],i[a]===void 0)throw Error("PMDynaform.inheritFrom(): object "+a+" not found, full path was "+e);i=i[a]}s=n(i.prototype),s.constructor=t,t.prototype=s,t.superclass=i},String.prototype.capitalize=function(){return this.toLowerCase().replace(/(^|\s)([a-z])/g,function(e,t,n){return t+n.toUpperCase()})},jQuery.fn.extend({setLabel:function(e){var t=getFieldById(this.attr("id"))||null;return"string"==typeof e&&t&&t.setLabel(e),this},getLabel:function(){var e=getFieldById(this.attr("id"))||null;return e?e.getLabel():null},setValue:function(e){var t=getFieldById(this.attr("id"))||null;if(!t)throw Error("The field not exist!");return t.setValue(e),this},getValue:function(e){var e=getFieldById(this.attr("id"))||null;return e?e.getValue():null},setOnchange:function(e){var t;if(getFieldById(this.attr("id"))?t=getFieldById(this.attr("id")):getFormById(this.attr("id"))&&(t=getFormById(this.attr("id"))),"function"!=typeof e||!t)throw Error("The id is no Valid or handler is not a function");return t.setOnChange(e),this},getInfo:function(){var e=getFieldById(this.attr("id"))||null;return e?e.getInfo():null},setHref:function(e){var t=getFieldById(this.attr("id"))||null;return"link"===t.model.get("type")&&t.setHref(e),this},setRequired:function(){},required:function(){}}),function(){var e=function(t){this.onSupportSelectorFields=null,this.fieldType=null,this.fields=[],this.queries=[],this.forms=[],e.prototype.init.call(this,t)};e.prototype.init=function(e){var t={fields:[],queries:[],forms:[],onSupportSelectorFields:{text:"onTextField",textarea:"onTextAreaField"}};$.extend(!0,t,e),this.setOnSupportSelectorFields(t.onSupportSelectorFields).setFields(t.fields).setForms(t.forms).applyGlobalSelectors()},e.prototype.addQuery=function(e){if("string"!=typeof e)throw Error("The query selector must be a string");return this.queries.push(e),this},e.prototype.setOnSupportSelectorFields=function(e){if("object"!=typeof e)throw Error("The parameter for the support fields is wrong");return this.onSupportSelectorFields=e,this},e.prototype.setFields=function(e){return"object"==typeof e&&(this.fields=e),this},e.prototype.setForms=function(e){return jQuery.isArray(e)&&(this.forms=e),this},e.prototype.onTextField=function(){return this},e.prototype.onTextAreaField=function(){return this},e.prototype.findFieldById=function(e){var t,n=null;e:for(t=0;this.fields.length>t;t+=1)if(this.fields[t].model.id===e){n=this.fields[t];break e}return n},e.prototype.findFormById=function(e){var t;for(t=0;this.forms.length>t;t+=1)if(this.forms[t].model.id===e)return this.forms[t];return null},e.prototype.findFieldByName=function(e){var t,n=[];for(t=0;this.fields.length>t;t+=1)this.fields[t].model.get("name")===e&&n.push(this.fields[t]);return n},e.prototype.findFieldByAttribute=function(e,t){var n,i=[];for(n=0;this.fields.length>n;n+=1)this.fields[n].model.attributes[e]&&this.fields[n].model.get(e)===t&&i.push(this.fields[n]);return i},e.prototype.applyGlobalSelectors=function(){var e=this;return window.getFieldByAttribute=function(t,n){return e.addQuery(t+": "+n),e.findFieldByAttribute(t,n)},window.getFieldById=function(t){return e.addQuery("id: "+t),e.findFieldById(t)},window.getFieldByName=function(t){return e.addQuery("name: "+t),e.findFieldByName(t)},window.getFormById=function(t){return e.addQuery("id: "+t),e.findFormById(t)},this},PMDynaform.extendNamespace("PMDynaform.core.Selector",e)}(),function(){var e={generateID:function(){var e,t=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=999999999),Math.floor(Math.random()*(t-e+1))+e},n=function(e,t){var n,i,a={};return e===void 0&&(e=""),i=function(e,t){var n,i="";if(e=parseInt(e,10).toString(16),e.length>t)return e.slice(e.length-t);if(t>e.length){for(i="",n=0;1+(t-e.length)>n;n+=1)i+="0";return i+e}return e},a||(a={}),a.uniqidSeed||(a.uniqidSeed=Math.floor(123456789*Math.random())),a.uniqidSeed+=1,n=e,n+=i(parseInt((new Date).getTime()/1e3,10),8),n+=i(a.uniqidSeed,5),t&&(n+=""+(10*Math.random()).toFixed(8)),n};do e=n(t(0,999999999),!0),e=e.replace(".","0");while(32!==e.length);return"pmd"+e},generateName:function(e){return e+"["+PMDynaform.core.Utils.generateID()+"]"}};PMDynaform.extendNamespace("PMDynaform.core.Utils",e)}(),function(){var e=function(e,t,n){var i,a,o=this;e=$(e),t="function"==typeof t?t(e.val(),void 0,e,n):t;var r={getCaret:function(){try{var t,n=0,i=e.get(0),a=document.selection,o=i.selectionStart;return a&&!~navigator.appVersion.indexOf("MSIE 10")?(t=a.createRange(),t.moveStart("character",e.is("input")?-e.val().length:-e.text().length),n=t.text.length):(o||"0"===o)&&(n=o),n}catch(r){}},setCaret:function(t){try{if(e.is(":focus")){var n,i=e.get(0);i.setSelectionRange?i.setSelectionRange(t,t):i.createTextRange&&(n=i.createTextRange(),n.collapse(!0),n.moveEnd("character",t),n.moveStart("character",t),n.select())}}catch(a){}},events:function(){e.on("keydown.mask",function(){}).on("keyup.mask",r.behaviour).on("paste.mask drop.mask",function(){setTimeout(function(){e.keydown().keyup()},100)}).on("change.mask",function(){e.data("changed",!0)}).on("blur.mask",function(){i===e.val()||e.data("changed")||e.trigger("change"),e.data("changed",!1)}).on("focusout.mask",function(){n.clearIfNotMatch&&!a.test(r.val())&&r.val("")})},getRegexMask:function(){for(var e,n,i,a,r,s,l=[],u=0;t.length>u;u++)e=o.translation[t[u]],e?(n=(""+e.pattern).replace(/.{1}$|^.{1}/g,""),i=e.optional,a=e.recursive,a?(l.push(t[u]),r={digit:t[u],pattern:n}):l.push(i||a?n+"?":n)):l.push("\\"+t[u]);return s=l.join(""),r&&(s=s.replace(RegExp("("+r.digit+"(.*"+r.digit+")?)"),"($1)?").replace(RegExp(r.digit,"g"),r.pattern)),RegExp(s)},destroyEvents:function(){e.off(["keydown","keyup","paste","drop","change","blur","focusout","DOMNodeInserted",""].join(".mask ")).removeData("changeCalled")},val:function(t){var n=e.is("input");return e&&e[0].getAttribute("mask")&&e[0].getAttribute("mask").length?arguments.length>0?n?e.val(t):e.text(t):n?e.val():e.text():void 0},getMCharsBeforeCount:function(e,n){for(var i=0,a=0,r=t.length;r>a&&e>a;a++)o.translation[t.charAt(a)]||(e=n?e+1:e,i++);return i},caretPos:function(e,n,i,a){var s=o.translation[t.charAt(Math.min(e-1,t.length-1))];return s?Math.min(e+i-n-a,i):r.caretPos(e+1,n,i,a)},behaviour:function(e){e=e||window.event;var t=e.keyCode||e.which;if(-1===$.inArray(t,o.byPassKeys)){var n=r.getCaret(),i=r.val(),a=i?i.length?i.length:0:"",s=a>n,l=r.getMasked(),u=l.length,d=r.getMCharsBeforeCount(u-1)-r.getMCharsBeforeCount(a-1);return l!==i&&r.val(l),!s||65===t&&e.ctrlKey||(8!==t&&46!==t&&(n=r.caretPos(n,a,u,d)),r.setCaret(n)),r.callbacks(e)}},getMasked:function(e){var i,a,s=[],l=r.val(),u=0,d=t.length,c=0,h=l?l.length?l.length:0:"",f=1,p="push",m=-1;for(n.reverse?(p="unshift",f=-1,i=0,u=d-1,c=h-1,a=function(){return u>-1&&c>-1}):(i=d-1,a=function(){return d>u&&h>c});a();){var g=t.charAt(u),v=l.charAt(c),y=o.translation[g];y?(v.match(y.pattern)?(s[p](v),y.recursive&&(-1===m?m=u:u===i&&(u=m-f),i===m&&(u-=f)),u+=f):y.optional&&(u+=f,c-=f),c+=f):(e||s[p](g),v===g&&(c+=f),u+=f)}var b=t.charAt(i);return d!==h+1||o.translation[b]||s.push(b),s.join("")},callbacks:function(a){var o=r.val(),s=o!==i;s===!0&&"function"==typeof n.onChange&&n.onChange(o,a,e,n),s===!0&&"function"==typeof n.onKeyPress&&n.onKeyPress(o,a,e,n),"function"==typeof n.onComplete&&o.length===t.length&&n.onComplete(o,a,e,n)}};o.remove=function(){var e;r.destroyEvents(),r.val(o.getCleanVal()).removeAttr("maxlength"),e=r.getCaret(),r.setCaret(e-r.getMCharsBeforeCount(e))},o.getCleanVal=function(){return r.getMasked(!0)},o.init=function(){n=n||{},o.byPassKeys=[9,16,17,18,36,37,38,39,40,91],o.translation={"#":{pattern:/\d/,recursive:!0},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/}},o.translation=$.extend({},o.translation,n.translation),o=$.extend(!0,{},o,n),a=r.getRegexMask(),n.maxlength!==!1&&e.attr("maxlength",t.length),n.placeholder&&e.attr("placeholder",n.placeholder),e.attr("autocomplete","off"),r.destroyEvents(),r.events();var i=r.getCaret();r.val(r.getMasked()),r.setCaret(i+r.getMCharsBeforeCount(i,!0))}()},t={},n="DOMNodeInserted.mask",i=function(){var e=$(this),t={},n="data-mask-";e.attr(n+"reverse")&&(t.reverse=!0),"false"===e.attr(n+"maxlength")&&(t.maxlength=!1),e.attr(n+"clearifnotmatch")&&(t.clearIfNotMatch=!0),e.mask(e.attr("data-mask"),t)};$.fn.mask=function(i,a){var o=this.selector,r=function(t){return t.originalEvent&&$(t.originalEvent.relatedNode)[0]===$(this)[0]?void 0:$(this).data("mask",new e(this,i,a))};this.each(r),o&&!t[o]&&(t[o]=!0,setTimeout(function(){$(document).on(n,o,r)},500))},$.fn.unmask=function(){try{return this.each(function(){$(this).data("mask").remove()})}catch(e){}},$.fn.cleanVal=function(){return this.data("mask").getCleanVal()},$("*[data-mask]").each(i),$(document).on(n,"*[data-mask]",i)}(),function(){var e={requiredText:{message:"This field is required",fn:function(e){return e=e.trim(),null===e||0===e.length||/^\s+$/.test(e)?!1:!0}},requiredDropDown:{message:"This field is required",fn:function(e){return e=e.trim(),null===e||0===e.length||/^\s+$/.test(e)?!1:!0}},requiredCheckBox:{message:"This field is required",fn:function(e){if("number"==typeof e)var t=e>0?!0:!1;else t=!1;return t}},requiredFile:{message:"This field File is required",fn:function(e){return e=e.trim(),null===e||0===e.length||/^\s+$/.test(e)?!1:!0}},requiredRadioGroup:{message:"This field is required",fn:function(e){if("number"==typeof e)var t=e>0?!0:!1;else t=!1;return t}},integer:{message:"Invalid value for the integer field",mask:/[\d\.]/i,fn:function(e){return""!=e&&!isNaN(e)&&Math.round(e)==e}},"float":{message:"Invalid value for the float field",fn:function(e){return/^-?\d+\.?\d*$/.test(e)}},string:{fn:function(){return!0}},"boolean":{fn:function(){return!0}},maxLength:{message:"The maximum length are ",fn:function(e,t){var n;if("number"!=typeof t)throw Error("The parameter maxlength is not a number");return n=t>=(""+e).length?!0:!1}}};PMDynaform.extendNamespace("PMDynaform.core.Validators",e)}(),function(){var e=function(t){this.model=null,this.view=null,this.data=null,this.fields=null,this.keys=null,this.token=null,this.renderTo=null,this.urlFormat=null,this.endPointsPath=null,this.forms=null,this.externalLibs=null,this.dependentLibraries=null,this.submitRest=null,this.onSubmitForm=Function(),e.prototype.init.call(this,t)};e.prototype.init=function(e){var t={submitRest:!1,data:{},urlFormat:"{server}/{apiName}/{apiVersion}/{workspace}/{keyProject}/{projectId}/{endPointPath}",keys:{server:"",projectId:"",workspace:"",keyProject:"project",apiName:"api",apiVersion:"1.0"},token:{accessToken:"",clientId:"x-pm-local-client",clientSecret:"",expiresIn:"",refreshToken:"",scope:"",tokenType:"bearer"},endPointsPath:{project:"",createVariable:"process-variable",variableList:"process-variable",variableInfo:"process-variable/{var_uid}",executeQuery:"process-variable/{var_name}/execute-query",uploadFile:"uploadfile/{field_name}",executeQuerySuggest:"process-variable/{var_name}/execute-query-suggest"},externalLibs:"",renderTo:document.body,onLoad:Function()};!_.isEmpty(e.data)&&e.data.items[0]&&e.data.items[0].externalLibs&&(this.externalLibs=e.data.items[0].externalLibs.split(","));var n=this;$("body").append("<div class='pmDynaformLoading' style='position: fixed;left: 0px;top: 0px;width: 100%;height: 100%;z-index: 9999;background: url(/lib/img/loading.gif) 50% 50% no-repeat #f9f9f9;'></div>"),this.setExternalLibreries(this.externalLibs,0,function(){jQuery.extend(!0,t,e),n.setData(t.data).setUrlFormat(t.urlFormat).setKeys(t.keys).setToken(t.token).setRenderTo(t.renderTo).setEndPointsPath(t.endPointsPath).checkDependenciesLibraries(),n.submitRest=t.submitRest,t.onLoad(),$("body").find(".pmDynaformLoading").remove()})},e.prototype.setExternalLibreries=function(e,t,n){var i,a,o=this;if(jQuery.isArray(e)&&e.length>t)switch(i=e[t].trim(),a=i.substring(i.lastIndexOf(".")+1)){case"js":var r=document.createElement("script");r.onload=function(){o.setExternalLibreries(e,t+1,n)},r.type="text/javascript",r.src=i,document.head.appendChild(r);break;case"css":var s=document.createElement("link");s.onload=function(){o.setExternalLibreries(e,t+1,n)},s.rel="stylesheet",s.href=i,document.head.appendChild(s)}else n()},e.prototype.setData=function(e){return"object"==typeof e&&(this.data=e),this.view&&(this.destroy(),this.loadProject()),this},e.prototype.setData2=function(e){return this.view.setData2(e),this},e.prototype.setUrlFormat=function(e){return"string"==typeof e&&(this.urlFormat=e),this},e.prototype.setKeys=function(e){var t,n,i={};if("object"==typeof e){for(t in e)n="/"===e[t][0]?e[t].substring(1):e[t],i[t]="/"===n[n.length-1]?n.substring(0,n.length-1):n;i.server=i.server.replace(/\https:\/\//,"").replace(/\http:\/\//,""),this.keys=i}return this},e.prototype.setToken=function(e){return"object"==typeof e&&(this.token=e),this},e.prototype.setRenderTo=function(e){return this.renderTo=e,this},e.prototype.setEndPointsPath=function(e){var t,n,i={};for(n in e){if("string"!=typeof e[n])throw Error("The endpoint path is not correct, "+e[n]);t="/"===e[n][0]?e[n].substring(1):e[n],i[n]="/"===e[n][e[n].length-1]?e[n].substring(0,e[n].length-1):e[n]}return this.endPointsPath=i,this},e.prototype.checkDependenciesLibraries=function(){var e,t,n=!1,i=this.data.items;for(t=function(e){var i,a,o=["geomap","other"];e:for(i=0;e.length>i;i+=1)for(a=0;e[i].length>a;a+=1){if($.inArray(e[i][a].type,o)>=0){n=!0;break e}"form"===e[i][a].type&&t(e[i][a].items)}},e=0;i.length>e;e+=1)t(i[e].items);return n?this.loadGeoMapDependencies():this.loadProject(),this},e.prototype.checkScript=function(){var e,t;for(e=0;this.forms.length>e;e+=1)_.isEmpty(this.forms[e].model.get("script"))||(t=new PMDynaform.core.Script({script:this.forms[e].model.get("script").code}),t.render())},e.prototype.setAllFields=function(e){return"object"==typeof e&&(this.fields=e,this.selector.setFields(e)),this},e.prototype.loadProject=function(){var e=this;return this.model=new PMDynaform.model.Panel(this.data),this.view=new PMDynaform.view.Panel({tagName:"div",renderTo:this.renderTo,model:this.model,project:this}),this.forms=this.view.getPanels(),this.createGlobalPmdynaformClass(this.view),this.createSelectors(),this.checkScript(),this.createMessageLoading(),e.view.afterRender(),e.view.$el.find(".pmdynaform-form-message-loading").remove(),$("#shadow-form").remove(),this},e.prototype.createMessageLoading=function(){var e=_.template($("#tpl-loading").html());this.view.$el.prepend(e({title:"Loading",msg:"Please wait while the data is loading..."})),this.view.$el.find("#shadow-form").css("height",this.view.$el.height()+"px")},e.prototype.createSelectors=function(){var e,t,n=[];for(t=function(e){var i;for(i=0;e.length>i;i+=1)"form"===e[i].model.get("type")?t(e[i].formView.getFields()):n.push(e[i])},e=0;this.forms.length>e;e+=1)t(this.forms[e].getFields());return this.fields=n,this.selector=new PMDynaform.core.Selector({fields:n,forms:this.forms}),this},e.prototype.createGlobalPmdynaformClass=function(){},e.prototype.loadGeoMapDependencies=function(){var e,t,n=!0,i="";i=document.body.getElementsByTagName("script");e:for(e=0;i.length>e;e+=1)if($(i[e]).data&&"google"===$(i[e]).data("script")){n=!1;break e}if(n){t=function(e){this.project=e.project},t.prototype.load=function(){this.project.loadProject()},window.pmd=new t({project:this});var a=document.createElement("script");a.type="text/javascript",$(a).data("script","google"),a.src="https://maps.googleapis.com/maps/api/js?v=3.exp&callback=pmd.load",document.body.appendChild(a)}else this.loadProject();return this},e.prototype.registerKey=function(e,t){if("string"!=typeof e||"string"!=typeof t)throw Error("The parameters must be strings.");if(this.keys[e])throw Error("The key already exists.");return this.keys[e]=t,this},e.prototype.getEndPoint=function(e){return this.endPointsPath[e]},e.prototype.setModel=function(e){return e instanceof Backbone.Model&&(this.model=e),this},e.prototype.setView=function(e){return e instanceof Backbone.View&&(this.view=e),this},e.prototype.getFullURL=function(e){var t,n=this.keys,i=this.urlFormat;for(t in n)n.hasOwnProperty(t)&&(i=i.replace(RegExp("{"+t+"}","g"),n[t]));return i=window.location.protocol+"//"+i.replace(/{endPointPath}/,e)},e.prototype.getForms=function(){var e;return this.view instanceof PMDynaform.view.Panel&&(e=this.view.getPanels()),e},e.prototype.getData=function(){var e=this.view.getData();return e},e.prototype.destroy=function(){return this.view.$el.remove(),this},PMDynaform.extendNamespace("PMDynaform.core.Project",e)}(),function(){var e=function(e){this.cursor=0,this.tokens=e};e.prototype.next=function(){return this.tokens[this.cursor++]},e.prototype.peek=function(e){return void 0===e&&(e=0),this.tokens[this.cursor+e]},PMDynaform.extendNamespace("PMDynaform.core.TokenStream",e);var t=function(){this.tokens={},this.regex=null,this.fields=[],this.tokenNames=[],this.tokenFields={}};t.prototype.addToken=function(e,t){this.tokens[e]=t},t.prototype.addField=function(e,t){var n;-1===$.inArray(t,this.fields)&&this.fields.push(t),n=(""+this.fields).replace(/,/g,"|"),n=n.replace(RegExp("\\[","g"),"\\["),n=n.replace(RegExp("\\]","g"),"\\]"),this.tokens[e]=n},t.prototype.addTokenValue=function(e,t){this.tokenFields[e]=parseFloat(t)?parseFloat(t):0},t.prototype.tokenize=function(t){var n;return this.buildExpression(t),n=this.findTokens(t),new e(n)},t.prototype.buildExpression=function(){var e,t=[];for(e in this.tokens)this.tokenNames.push(e),t.push("("+this.tokens[e]+")");this.regex=RegExp(t.join("|"),"g")},t.prototype.findTokens=function(e){for(var t,n,i=[];null!==(t=this.regex.exec(e));)if(void 0!==t)for(n=1;t.length>n;n+=1)t[n]&&i.push({name:this.tokenNames[n-1],data:t[n],value:null});return i},PMDynaform.extendNamespace("PMDynaform.core.Tokenizer",t);var n=function(e){this.data=""+e,this.tokenizer=new t};n.prototype.initializeTokens=function(){return this.tokenizer.addToken("whitespace","\\s+"),this.tokenizer.addToken("l_paren","\\("),this.tokenizer.addToken("r_paren","\\)"),this.tokenizer.addToken("float","[0-9]+\\.[0-9]+"),this.tokenizer.addToken("int","[0-9]+"),this.tokenizer.addToken("div","\\/"),this.tokenizer.addToken("mul","\\*"),this.tokenizer.addToken("add","\\+"),this.tokenizer.addToken("sub","\\-"),this.tokenizer.addToken("constant","pi|PI"),this.tokenizer.addToken("function","[a-zA-Z_][a-zA-Z0-9_]*"),this},n.prototype.addToken=function(e,t){return this.tokenizer.addToken(e,t),this},n.prototype.addField=function(e,t){return this.tokenizer.addField(e,t),this},n.prototype.addTokenValue=function(e,t){return this.tokenizer.addTokenValue(e,t),this},n.prototype.consumeConstant=function(e){return"Math."+e.data.toUpperCase()},n.prototype.consumeField=function(e){return void 0===this.tokenizer.tokenFields[e.data]?0:this.tokenizer.tokenFields[e.data]},n.prototype.consumeFunction=function(e,t){for(var n,i=[t.data];(n=e.next())&&(i.push(n.data),"r_paren"!==n.name););return"Math."+i.join("")},n.prototype.evaluate=function(){var e,t,n,i,a=[];for(this.initializeTokens(),e=this.tokenizer.tokenize(this.data);i=e.next();)switch(i.name){case"int":case"float":case"mul":case"div":case"sub":case"add":a.push(i.data);break;case"field":a.push(this.consumeField(i));break;case"constant":a.push(this.consumeConstant(i));break;case"l_paren":a.push("(");break;case"r_paren":a.push(")");break;case"function":var o=e.peek();if(o&&"l_paren"===o.name){a.push(this.consumeFunction(e,i));continue}default:}n=a.join("");try{t=Function("return "+n)()}catch(n){throw Error("Error in the formula property")}return t},PMDynaform.extendNamespace("PMDynaform.core.Formula",n)}(),function(){var e=function(t){this.method=null,this.data=null,this.successCallback=null,this.failureCallback=null,this.completeCallback=null,this.restProxy=null,this.keys=null,this.url=null,this.multipart=null,this.dataType="json",this.authorizationType="none",this.authorizationOAuth=!1,e.prototype.init.call(this,t)};e.prototype.type="proxy",e.prototype.init=function(e){var t={url:"",method:"GET",data:{},keys:{accessToken:"",clientId:"x-pm-local-client",clientSecret:"",expiresIn:"",refreshToken:"",scope:"",tokenType:"bearer"},multipart:!1,successCallback:function(){},failureCallback:function(){},completeCallback:function(){}};jQuery.extend(!0,t,e),this.setUrl(t.url).setMethod(t.method).setData(t.data).setKeys(t.keys).setMultipart(t.multipart).setSuccessCallback(t.successCallback).setFailureCallback(t.failureCallback).setCompleteCallback(t.completeCallback).setRestProxy(),this.executeRestProxy()},e.prototype.setUrl=function(e){return this.url=e,this},e.prototype.setEndpoint=function(e){var t;return"string"==typeof e&&(t="/"===e[0]?e.substring(1):e,this.endpoint="/"===e[e.length-1]?e.substring(0,e.length-1):e),this},e.prototype.setMethod=function(e){return this.method=e,this},e.prototype.setServer=function(e){var t;return"string"==typeof e&&(t="/"===e[0]?e.substring(1):e,this.server="/"===e[e.length-1]?e.substring(0,e.length-1):e),this},e.prototype.setData=function(e){return this.data=e,this},e.prototype.setKeys=function(e){return this.keys=e,this.keys.token={access_token:e.token},this},e.prototype.setMultipart=function(e){return this.multipart=e,this},e.prototype.setSuccessCallback=function(e){return"function"==typeof e&&(this.successCallback=e),this
},e.prototype.setFailureCallback=function(e){return"function"==typeof e&&(this.failureCallback=e),this},e.prototype.setCompleteCallback=function(e){return"function"==typeof e&&(this.completeCallback=e),this},e.prototype.getFullProxyPath=function(){return this.server+"/"+this.keys.apiName+"/"+this.keys.apiVersion+"/"+this.keys.workspace+"/"+"project"+"/"+this.keys.processId+"/"+this.endpoint},e.prototype.setRestProxy=function(){var e=this;return this.restProxy=new PMDynaform.proxy.RestProxy({url:this.url,method:e.method,data:e.data,authorizationOAuth:!0,dataType:this.dataType,success:e.successCallback,failure:e.failureCallback,complete:e.completeCallback}),this.restProxy.setAuthorizationType("oauth2",{access_token:this.keys.accessToken}),this},e.prototype.executeRestProxy=function(){var e={POST:"post",UPDATE:"update",GET:"get",DELETE:"remove"};return this.restProxy[e[this.method]](),this},PMDynaform.extendNamespace("PMDynaform.core.Proxy",e)}(),function(){var e=function(t){this.parentMode=null,this.field=null,this.json=null,this.jsonBuilt=null,e.prototype.init.call(this,t)};e.prototype.init=function(t){var n={parentMode:"edit",field:{},json:{text:e.prototype.text,textarea:e.prototype.textArea,checkbox:e.prototype.checkbox,radio:e.prototype.radio,dropdown:e.prototype.dropdown,button:e.prototype.button,submit:e.prototype.submit,datetime:e.prototype.datetime,suggest:e.prototype.suggest,link:e.prototype.link,file:e.prototype.file,grid:e.prototype.grid}};return jQuery.extend(!0,n,t),this.jsonBuilt=n.field,this.setParentMode(n.parentMode).setField(n.field).setJSONFactory(n.json).buildJSON(),this},e.prototype.setParentMode=function(e){return this.parentMode=e,this},e.prototype.text=function(e){return{type:"label",colSpan:e.colSpan,label:e.label,fullOptions:[e.defaultValue||e.value],data:e.data}},e.prototype.textArea=function(e){return{type:"label",colSpan:e.colSpan,label:e.label,fullOptions:[e.defaultValue||e.value],data:e.data}},e.prototype.checkbox=function(e){var t,n=[];for(t=0;e.options.length>t;t+=1)e.options[t].selected&&e.options[t].selected===!0&&n.push(e.options[t].label);return{type:"label",colSpan:e.colSpan,label:e.label,fullOptions:n,data:e.data}},e.prototype.radio=function(e){var t,n=[];for(t=0;e.options.length>t;t+=1)e.defaultValue&&""+e.options[t].value==""+e.defaultValue&&n.push(e.options[t].label);return{type:"label",colSpan:e.colSpan,label:e.label,fullOptions:n,data:e.data}},e.prototype.dropdown=function(e){var t,n=[];for(t=0;e.options.length>t;t+=1)e.defaultValue&&""+e.options[t].value==""+e.defaultValue&&n.push(e.options[t].label);return{type:"label",colSpan:e.colSpan,label:e.label,fullOptions:n,data:e.data}},e.prototype.button=function(e){var t=e;return t},e.prototype.submit=function(e){var t=e;return t},e.prototype.datetime=function(e){return{type:"label",colSpan:e.colSpan,label:e.label,fullOptions:[e.defaultValue||e.value],data:e.data}},e.prototype.suggest=function(e){var t,n=[];for(t=0;e.options.length>t;t+=1)e.defaultValue&&""+e.options[t].value==""+e.defaultValue&&n.push(e.options[t].label);return{type:"label",colSpan:e.colSpan,label:e.label,fullOptions:n,data:e.data}},e.prototype.link=function(e){return{type:"label",colSpan:e.colSpan,label:e.label,options:[e.value]}},e.prototype.file=function(e){var t=e;return t},e.prototype.grid=function(e){var t=e;return t},e.prototype.setField=function(e){return this.field=e,this},e.prototype.setJSONFactory=function(e){return this.json=e,this},e.prototype.discardViewField=function(e){var t=["button","submit","image","label","title","subtitle"];return 0>$.inArray(e,t)?!0:!1},e.prototype.reviewField=function(e){var t,n,i=e,a=["text","suggest","textarea","datetime"];if(this.json[e.type]&&this.discardViewField(e.type))switch(e.mode){case"disabled":i=e,i.disabled=!0;break;case"parent":e.mode=this.parentMode,i=this.reviewField(e);break;case"view":i=this.json[e.type](e);break;default:i=e}if(i.originalType=e.originalType||e.type,i.var_name=e.var_name||"",i.var_uid=e.var_uid||"",i.options||e.var_accepted_values,e.data)if(i.fullOptions=[],-1!==a.indexOf(i.originalType))i.fullOptions="suggest"===i.originalType?[e.data.label||e.defaultValue]:[e.data.value||e.defaultValue];else if("checkbox"===i.originalType){for(t=[],n=0;e.options.length>n;n+=1)-1!==e.data.value.indexOf(e.options[n].value)&&t.push(e.options[n].label);i.fullOptions=t||[e.defaultValue]}else i.fullOptions=[e.data.label||e.defaultValue];return i},e.prototype.buildJSON=function(){return this.jsonBuilt=this.reviewField(this.field),this},e.prototype.getJSON=function(){return this.jsonBuilt},PMDynaform.extendNamespace("PMDynaform.core.TransformJSON",e)}(),function(){function e(e,t){function n(e){for(var t=[],n=e.clipboardData||{},a=n.items||[],r=0;a.length>r;r++){var s=a[r].getAsFile();if(s){var l=RegExp("/(.*)").exec(s.type);if(!s.name&&l){var u=l[1];s.name="clipboard"+r+"."+u}t.push(s)}}t.length&&(o(e,t,i),e.preventDefault(),e.stopPropagation())}var i={};d.enabled&&($.extend(!0,i,d.opts),$.extend(!0,i,t),e.addEventListener("paste",n,!1))}function t(e,t){function n(t){o(t,e.files,a)}function i(e){e.stopPropagation(),e.preventDefault(),o(e,e.dataTransfer.files,a)}var a={};d.enabled&&($.extend(!0,a,d.opts),$.extend(!0,a,t),e.addEventListener("change",n,!1),e.addEventListener("drop",i,!1))}function n(e,t){function n(){m=!1}function i(){m=!0}function a(e){e.dataTransfer.files&&e.dataTransfer.files.length&&(e.stopPropagation(),e.preventDefault())}function r(e){return function(){m||e.apply(this,arguments)}}function u(t){t.stopPropagation(),t.preventDefault(),p&&l(e,p),o(t,t.dataTransfer.files,g)}function c(t){t.stopPropagation(),t.preventDefault(),p&&s(e,p)}function h(){p&&l(e,p)}function f(t){t.stopPropagation(),t.preventDefault(),p&&s(e,p)}var p,m,g={};d.enabled&&($.extend(!0,g,d.opts),$.extend(!0,g,t),g.dnd&&(p=g.dragClass,m=!1,e.addEventListener("dragenter",r(c),!1),e.addEventListener("dragleave",r(h),!1),e.addEventListener("dragover",r(f),!1),e.addEventListener("drop",r(u),!1),document.body.addEventListener("dragstart",i,!0),document.body.addEventListener("dragend",n,!0),document.body.addEventListener("drop",a,!1)))}function i(e,t){for(var n=0;e.length>n;n++){var i=e[n];i.extra={nameNoExtension:i.name.substring(0,i.name.lastIndexOf(".")),extension:i.name.substring(i.name.lastIndexOf(".")+1),fileID:n,uniqueID:v(),groupID:t,prettySize:u(i.size)}}}function a(e,t,n){for(var i in t)if(e.match(RegExp(i)))return"readAs"+t[i];return"readAs"+n}function o(e,t,n){function o(){l.ended=new Date,n.on.groupend(l)}function r(){0===--s&&o()}var s=t.length,l={groupID:g(),files:t,started:new Date};if(d.output.push(l),i(t,l.groupID),n.on.groupstart(l),!t.length)return o(),void 0;var u,v=d.sync&&h;v&&(u=m.getWorker(f,function(e){var t=e.data.file,i=e.data.result;t.extra||(t.extra=e.data.extra),t.extra.ended=new Date,n.on["error"===i?"error":"load"]({target:{result:i}},t),r()})),Array.prototype.forEach.call(t,function(t){if(t.extra.started=new Date,n.accept&&!t.type.match(RegExp(n.accept)))return n.on.skip(t),r(),void 0;if(n.on.beforestart(t)===!1)return n.on.skip(t),r(),void 0;var i=a(t.type,n.readAsMap,n.readAsDefault);if(v&&u)u.postMessage({file:t,extra:t.extra,readAs:i});else{var o=new c;o.originalEvent=e,p.forEach(function(e){o["on"+e]=function(i){("load"==e||"error"==e)&&(t.extra.ended=new Date),n.on[e](i,t),"loadend"==e&&r()}}),o[i](t)}})}function r(e,t){return RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)").test(e.className)}function s(e,t){r(e,t)||(e.className=e.className?[e.className,t].join(" "):t)}function l(e,t){if(r(e,t)){var n=e.className;e.className=n.replace(RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)","g")," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}}function u(e){var t=["bytes","kb","MB","GB","TB","PB"],n=Math.floor(Math.log(e)/Math.log(1024));return(e/Math.pow(1024,Math.floor(n))).toFixed(2)+" "+t[n]}var d,c=window.FileReader,h=!1,f="self.addEventListener('message', function(e) { var data=e.data; try { var reader = new FileReaderSync; postMessage({ result: reader[data.readAs](data.file), extra: data.extra, file: data.file})} catch(e){ postMessage({ result:'error', extra:data.extra, file:data.file}); } }, false);",p=["loadstart","progress","load","abort","error","loadend"],d={enabled:!1,setupInput:t,setupDrop:n,setupClipboard:e,sync:!1,output:[],opts:{dragClass:"drag",accept:!1,readAsDefault:"BinaryString",readAsMap:{"image/*":"DataURL","text/*":"Text"},on:{loadstart:function(){},progress:function(){},load:function(){},abort:function(){},error:function(){},loadend:function(){},skip:function(){},groupstart:function(){},groupend:function(){},beforestart:function(){}}}};if(c){var m=function(){function e(e){if(window.Worker&&i&&n){var t=new i;return t.append(e),n.createObjectURL(t.getBlob())}return null}function t(t,n){var i,a=e(t);return a?(i=new Worker(a),i.onmessage=n,i):null}var n=window.URL||window.webkitURL,i=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder;return{getURL:e,getWorker:t}}(),g=function(e){return function(){return e++}}(0),v=function(e){return function(){return e++}}(0);d.enabled=!0,PMDynaform.extendNamespace("PMDynaform.core.FileStream",d)}}(),function(){var e=function(t){this.element=null,this.onReadyScreen=null,this.onCancelScreen=null,this.isInFullScreen=null,this.supported=null,e.prototype.init.call(this,t)};e.prototype.init=function(e){var t={element:document.documentElement,onReadyScreen:function(){},onCancelScreen:function(){}};jQuery.extend(!0,t,e),this.element=t.element,this.onReadyScreen=t.onReadyScreen,this.onCancelScreen=t.onCancelScreen,this.checkFullScreen()},e.prototype.checkFullScreen=function(){var e=this.element,t=e.requestFullScreen||e.webkitRequestFullScreen||e.mozRequestFullScreen||e.msRequestFullScreen;return this.supported=t?!0:null,this},e.prototype.cancel=function(){var e,t,n,i;if(i=parent.document.documentElement===document.documentElement?document:parent.document,e=i.cancelFullScreen||i.webkitCancelFullScreen||i.mozCancelFullScreen||i.exitFullscreen){e.call(i);try{t=this.onCancelScreen,t(i)}catch(a){throw Error(a)}}else window.ActiveXObject!==void 0&&(n=new ActiveXObject("WScript.Shell"),null!==n&&n.SendKeys("{F11}"))},e.prototype.applyZoom=function(){var e,t,n,i=this.element;if(e=i.requestFullScreen||i.webkitRequestFullScreen||i.mozRequestFullScreen||i.msRequestFullScreen){e.call(i);try{n=this.onReadyScreen,n(i)}catch(a){throw Error(a)}}else window.ActiveXObject!==void 0&&(t=new ActiveXObject("WScript.Shell"),null!==t&&t.SendKeys("{F11}"));return!1},e.prototype.toggle=function(){var e;return e=parent.document.documentElement===document.documentElement?document:parent.document,this.isInFullScreen=e.fullScreenElement&&null!==e.fullScreenElement||e.mozFullScreen||e.webkitIsFullScreen,this.isInFullScreen?this.cancel():this.applyZoom(),!1},PMDynaform.extendNamespace("PMDynaform.core.FullScreen",e)}(),function(){var e=function(t){this.name=null,this.type=null,this.html=null,this.script="",this.renderTo=document.body,e.prototype.init.call(this,t)};e.prototype.init=function(e){var t={type:"text/javascript",script:""};$.extend(!0,t,e),this.setType(t.type).setScript(t.script)},e.prototype.setType=function(e){return this.type=e,this},e.prototype.setScript=function(e){return this.script=e,this},e.prototype.createHTML=function(){var e=document.createElement("script");return e.type=this.type,$(e).text(this.script),this.html=e,e},e.prototype.getHTML=function(){return this.html||this.createHTML(),this.html},e.prototype.render=function(){var e=this.getHTML();return $(this.renderTo).append(e),this},PMDynaform.extendNamespace("PMDynaform.core.Script",e)}(),function(){var e=function(){var e,t,n=[],i=0;return{id:Math.random(),get:function(e){return n[e]},insert:function(e){return n[i]=e,i+=1,this},insertAt:function(e,t){return n.splice(t,0,e),i=n.length,this},remove:function(t){return e=this.indexOf(t),-1===e?!1:(i-=1,n.splice(e,1),!0)},getSize:function(){return i},isEmpty:function(){return 0===i},indexOf:function(e){for(t=0;i>t;t+=1)if(e===n[t])return t;return-1},find:function(e){function t(n,a){if(n>a)return void 0;if(i[n]===e)return n;if(i[a]===e)return a;var o=Math.floor((n+a)/2),r=i[o];return e>r?t(o,a-1):r>e?t(n+1,o):o}var i=n.sort();return t(0,i.length-1)},contains:function(e){return-1!==this.indexOf(e)?!0:!1},sort:function(e){var e=e||function(e,t){return t>e?1:e>t?-1:0},t=function(e,t,n){var i=e[t];e[t]=e[n],e[n]=i},a=function(n,i,a){for(var o=n[Math.floor((a+i)/2)],r=i,s=a;s>=r;){for(;e(n[r],o)>0;)r++;for(;0>e(n[s],o);)s--;s>=r&&(t(n,r,s),r++,s--)}return r},o=function(e,t,n){var i;return e.length>1&&(i=a(e,t,n),i-1>t&&o(e,t,i-1),n>i&&o(e,i,n)),e};return o(n,0,i-1)},asArray:function(){return n.slice(0)},swap:function(e,t){var a;return i>e&&e>=0&&i>t&&t>=0&&(a=n[e],n[e]=n[t],n[t]=a),this},getFirst:function(){return n[0]},getLast:function(){return n[i-1]},popLast:function(){var e;return i-=1,e=n[i],n.splice(i,1),e},getDimensionLimit:function(){var e=[1e5,-1,-1,1e5],a=[void 0,void 0,void 0,void 0];for(t=0;i>t;t+=1)e[0]>n[t].y&&(e[0]=n[t].y,a[0]=n[t]),e[1]<n[t].x+n[t].width&&(e[1]=n[t].x+n[t].width,a[1]=n[t]),e[2]<n[t].y+n[t].height&&(e[2]=n[t].y+n[t].height,a[2]=n[t]),e[3]>n[t].x&&(e[3]=n[t].x,a[3]=n[t]);return e},clear:function(){return 0!==i&&(n=[],i=0),this},set:function(e){if(null!==e&&!jQuery.isArray(e))throw Error("set(): The parameter must be an array or null.");return n=e&&e.slice(0)||[],i=n.length,this}}};PMDynaform.extendNamespace("PMDynaform.util.ArrayList",e)}(),function(){var e=function(t){this.projectFlow=null,this.dataManager=new PMDynaform.core.DataLocalManager,this.formsHandler=null,this.id=null,this.buttonNext=null,this.buttonPrev=null,this.navBar=null,this.model=null,this.view=null,this.data=null,this.dataForm=null,this.formID=null,this.taskID=null,this.caseID=null,this.caseFakeID=null,this.workspace=null,this.tokens=null,this.restClient=null,this.server=null,this.submitRest=!1,this.typeList=null,this.onLine=!1,this.caseTitle=null,this.caseNumber=null,this.proxy=null,this.keys=null,this.message=null,this.userAgent=null,this.currentFormID=null,this.dynaforms=[],this.container=null,this.viewfields=[],this.memoryStack=[],this.isCase=!1,this.delayDataView=null,this.blockButtonSubmit=!0,t.keys={server:t.server,processID:t.processID,taskID:t.taskID,caseID:t.caseID,workspace:t.workspace,formID:t.formID,keyProject:"project",typeList:t.typeList,stepID:""},t.urlFormat="{server}/api/1.0/{workspace}/{endPointPath}",this.urlFormatStreaming="{server}/sys{workspace}/{endPointPath}",t.endPointsPath={dynaformDefinition:"light/project/dynaform/{formID}",jsonDynaforms:"light/project/dynaforms",startCase:"light/process/{processID}/task/{taskID}/start-case",newTokens:"oauth/token",caseTypeList:"case/{caseID}/dynaform/{typeList}",loadDynaform:"case/{caseID}/dynaform/{formID}/data",getFormData:"case/{caseID}/dynaform/{formID}/data",getAllDataCase:"case/{caseID}/variables",submitFormCase:"cases/{caseID}/variable",routeCase:"light/cases/{caseID}/route-case",createVariable:"process-variable",imageInfo:"light/case/{caseID}/download64",fileDownload:"case/{caseID}/file/{fileID}",variableList:"process-variable",getImageGeo:"light/case/{caseID}/download64",imageDownload:"light/case/{caseID}/download64",generateImageGeo:"/light/case/{caseID}/input-document/location",variableInfo:"process-variable/{var_uid}",executeQuery:"process/{processID}/process-variable/{var_name}/execute-query",uploadFile:"",refreshToken:"oauth/token",fileStreaming:"en/neoclassic/cases/casesStreamingFile?actionAjax=streaming&a={caseID}&d={fileId}",executeTrigger:"light/process/{processID}/task/{taskID}/case/{caseID}/step/{stepID}/execute-trigger/{triggerOption}"},e.superclass.call(this,t),e.prototype.init.call(this,t)};PMDynaform.inheritFrom("PMDynaform.core.Project",e),e.prototype.init=function(e){var t=this;defaults={name:"",data:[],onSubmitForm:function(){t.executeSubmit(t.view.getData2())}},this.viewfields=[],$.extend(!0,defaults,e),this.setServer(defaults.server),this.setProcessID(defaults.processID),this.setWorkspace(defaults.workspace),this.setTaskID(defaults.taskID),this.setCaseFakeID(defaults.caseFakeID),this.setCaseID(defaults.caseID),this.setFormID(defaults.formID),this.setData(defaults.data),this.setDataForm(defaults.dataForm),this.setTypeList(defaults.typeList),this.setSubmitRest(defaults.submitRest),this.setOnLine(defaults.onLine),this.setDynaforms(defaults.dynaforms),this.setContainer(defaults.container),this.setLanguage(),this.setOnSubmitForm(defaults.onSubmitForm)},e.prototype.setTokens=function(e){return this.tokens=e,this},e.prototype.setOnSubmitForm=function(e){return this.onSubmitForm=e,this},e.prototype.setIsCase=function(e){return"boolean"==typeof e&&(this.isCase=e),this},e.prototype.setCaseFakeID=function(e){return"string"==typeof e&&(this.caseFakeID=e),this},e.prototype.setKeys=function(e){var t,n,i={};if("object"==typeof e){for(t in e)n="/"===e[t][0]?e[t].substring(1):e[t],i[t]="/"===n[n.length-1]?n.substring(0,n.length-1):n;this.keys=i}return this},e.prototype.setContainer=function(e){return this.container=e,this},e.prototype.setDynaforms=function(e){return this.dynaforms=e,this},e.prototype.checkDependenciesLibraries=function(){return null!=this.data?this.data.items:null,this},e.prototype.setUserAgent=function(){"formslider-android"===navigator.userAgent&&(this.userAgent="android"),"formslider-ios"===navigator.userAgent&&(this.userAgent="ios")},e.prototype.setData=function(e){return"object"==typeof e&&(this.data=e),this},e.prototype.setDataForm=function(e){return"object"==typeof e&&(this.dataForm=e),this},e.prototype.setProcessID=function(e){return this.processID=e,this},e.prototype.setOnLine=function(e){return this.onLine=e,this},e.prototype.setWorkspace=function(e){return this.workspace=e,this},e.prototype.setTaskID=function(e){return this.taskID=e,this},e.prototype.setCaseID=function(e){return e&&(this.caseID=e),this},e.prototype.setTypeList=function(e){return this.typeList=e,this},e.prototype.setServer=function(e){return e&&(this.server=e),this},e.prototype.setSubmitRest=function(e){return e&&"boolean"==typeof e&&(this.submitRest=e),this},e.prototype.setLanguage=function(e){return this.language=e?language[e]:language.en,this},e.prototype.setModel=function(e){return e instanceof Backbone.Model&&(this.model=e),this},e.prototype.setFormID=function(e){return this.formID=e,this.keys.formID=e,this},e.prototype.setKey=function(e,t){return this.keys[e]=t,this},e.prototype.setCaseID=function(e){return this.caseID=e,this.keys.caseID=e,this},e.prototype.setView=function(e){return e instanceof Backbone.View&&(this.view=e),this},e.prototype.setDataViewDelay=function(e){var t=this;fomrData=this.unEscapeData(e),this.delayDataView=setTimeout(function(){t.view.setData2(fomrData)},2e3)},e.prototype.setOptionsToField=function(e,t){var n,i;for(options=e.attributes.options,splitData=t.value.split(","),i=0;options.length>i;i++)options[i].selected=!1;for(n=0;splitData.length>n;n++)for(i=0;options.length>i;i++)options[i].value==splitData[n]&&(options[i].selected=!0)},e.prototype.setProxy=function(e){this.keys=e,this.restClient=new PMDynaform.core.Proxy({method:"POST",keys:{processId:this.processID,workspace:this.workspace,token:this.tokens},server:this.server})},e.prototype.loadNewCase=function(){this.setUserAgent(),this.setIsCase(!1),this.formsHandler=new PMDynaform.core.FormsHandler,this.projectFlow="ios"==this.userAgent?new PMDynaform.core.ProjectFlowIOS:new PMDynaform.core.ProjectFlow,this.formsHandler.init(this,this.dynaforms,null,this.formID),this.projectFlow.setIsCase(!1),this.data&&this.formsHandler.setJsonFormIndexCurrent(this.data),this.dataForm&&(this.dataManager.addData(this.dataForm),this.dataManager.addDataLocal(this.dataForm)),this.projectFlow.setForms(this.dynaforms),this.projectFlow.initFlow(this,!0),this.projectFlow.initLoad({jsonForm:this.data}),adjustHeight(),this.initNavBar(),this.showNavBar()},e.prototype.loadCase=function(){this.setUserAgent(),this.setIsCase(!0),this.formsHandler=new PMDynaform.core.FormsHandler,this.projectFlow="ios"==this.userAgent?new PMDynaform.core.ProjectFlowIOS:new PMDynaform.core.ProjectFlow,this.formsHandler.init(this,this.dynaforms,null,this.formID),this.dataForm&&(this.dataManager.addData(this.dataForm),this.dataManager.addDataLocal(this.dataForm)),this.projectFlow.setIsCase(!0),this.formsHandler.setJsonFormIndexCurrent(this.data),this.projectFlow.setForms(this.dynaforms),this.projectFlow.initFlow(this,!0),this.projectFlow.initLoad({jsonForm:this.data}),this.initNavBar(),this.showNavBar()},e.prototype.getFormDefinition=function(){var e,t,n,i,a=this;return t=this.getFullEndPoint(this.endPointsPath.dynaformDefinition),n=this.getFullURL(t),e=new PMDynaform.core.Proxy({url:n,method:"GET",keys:this.token,successCallback:function(e,t){i={data:t.data.formContent,state:"success"}},failureCallback:function(e,t){a.failureResponse(t)}}),i},e.prototype.getJsonForm=function(e){var t,n,i,a,o=[];return this.setFormID(e),n=this.getFullEndPoint(this.endPointsPath.jsonDynaforms),o.push(e),i=this.getFullURL(n),t=new PMDynaform.core.Proxy({url:i,method:"POST",keys:this.token,data:{formId:o},successCallback:function(e,t){var n=null;0!=t.length&&(n=t[0].formContent),a={data:n,state:"success"}},failureCallback:function(){a={state:"internetFail"}}}),a},e.prototype.executeTrigger=function(e,t){var n,i,a,o;return this.setKey("stepID",e),this.setKey("triggerOption",t),i=this.getFullEndPoint(this.endPointsPath.executeTrigger),a=this.getFullURL(i),n=new PMDynaform.core.Proxy({url:a,method:"POST",keys:this.token,data:null,successCallback:function(){o={state:"success"}},failureCallback:function(){o={state:"internetFail"}}}),o},e.prototype.getFullEndPoint=function(e){var t,n=this.keys,i=e;for(t in n)n.hasOwnProperty(t)&&(i=i.replace(RegExp("{"+t+"}","g"),n[t]));return i},e.prototype.sendSubmitInformationDevice=function(){var e,t,n;t=this.model.attributes,e=this.getEscapeData(),n={json:t,data:e,accessToken:this.token.accessToken,refreshToken:this.token.refreshToken,formID:this.keys.formID},"formslider-android"===navigator.userAgent&&JsInterface.receiveFormData(JSON.stringify(n)),"formslider-ios"===navigator.userAgent&&this.executeFakeIOS("submit-nextform")},e.prototype.getCaseDataIOS=function(){var e,t,n;return t=this.model.attributes,e=this.getEscapeData(),n={json:t,data:e,accessToken:this.token.accessToken,refreshToken:this.token.refreshToken,formID:this.keys.formID},JSON.stringify(n)},e.prototype.sendDataForm=function(e){var t,n,i;n=this.model.attributes,t=e,i={json:n,data:t.fields,accessToken:this.token.accessToken,refreshToken:this.token.refreshToken,formID:this.keys.formID},"formslider-android"===navigator.userAgent&&JsInterface.receiveFormData(JSON.stringify(i))},e.prototype.getCaseInformation=function(){var e={};return e.caseID=this.caseID,e.caseTitle=this.caseTitle,e.ticketNumber=this.caseNumber,JSON.stringify(e)},e.prototype.getCaseData=function(){var e,t,n;t=this.model.attributes,e=this.getEscapeData(),n={json:t,data:e,accessToken:this.token.accessToken,refreshToken:this.token.refreshToken,formID:this.keys.formID},JsInterface.receiveFormData(JSON.stringify(n))},e.prototype.getFormDefinitionTypeList=function(){var e,t,n,i=this;t=this.getFullEndPoint(this.endPointsPath.caseTypeList),n=this.getFullURL(t),e=new PMDynaform.core.Proxy({url:n,method:"GET",keys:this.token,successCallback:function(e,t){return i.formID=t.data[0]._id,{data:t.data.formContent,state:"success"}},failureCallback:function(){}})},e.prototype.loadFormData=function(){var e,t,n,i;return t=this.getFullEndPoint(this.endPointsPath.getFormData),n=this.getFullURL(t),e=new PMDynaform.core.Proxy({url:n,method:"GET",keys:this.token,successCallback:function(e,t){i={state:"success",data:t.data}},failureCallback:function(){i={state:"internetFail"}}}),i},e.prototype.loadAllDataCase=function(){var e,t,n,i;return t=this.getFullEndPoint(this.endPointsPath.getAllDataCase),n=this.getFullURL(t),e=new PMDynaform.core.Proxy({url:n,method:"GET",keys:this.token,successCallback:function(e,t){i={state:"success",data:t}},failureCallback:function(){i={state:"internetFail"}}}),i},e.prototype.loadProject=function(e){var t,n=this;return t=null!=this.container?$("#"+this.container):$("#container"),this.model=new PMDynaform.model.Panel(e),this.view=new PMDynaform.view.Panel({tagName:"div",renderTo:t,model:this.model,project:this}),this.forms=this.view.getPanels(),this.createGlobalPmdynaformClass(this.view),this.createSelectors(),this.checkScript(),n.view.afterRender(),this.hideMaskLoading(),this},e.prototype.getRestClient=function(){return this.restClient},e.prototype.hideMaskLoading=function(){return $(".pmdynaform-mobile-loading").hide(),this},e.prototype.executeSubmit=function(e){this.blockButtonSubmit&&(this.projectFlow.submitStep({dataSubmit:e}),adjustHeight())},e.prototype.startCase=function(){var e,t,n,i,a=this;return t=a.getFullEndPoint(a.endPointsPath.startCase),n=a.getFullURL(t),e=new PMDynaform.core.Proxy({url:n,method:"POST",keys:a.token,data:{},successCallback:function(e,t){i={state:"success",caseID:t.caseId,caseTitle:t.caseNumber,caseNumber:t.caseNumber}},failureCallback:function(){i={state:"internetFail"}}}),this.caseFakeID=void 0,i},e.prototype.submitFormCase=function(e){var t,n,i,a,o=this;return n=o.getFullEndPoint(o.endPointsPath.submitFormCase),i=o.getFullURL(n),t=new PMDynaform.core.Proxy({url:i,method:"UPDATE",keys:o.token,data:e,successCallback:function(){a={state:"success"}},failureCallback:function(){a={state:"internetFail"}}}),a},e.prototype.routeCase=function(){var e,t,n,i,a=this;return t=a.getFullEndPoint(a.endPointsPath.routeCase),n=a.getFullURL(t),e=new PMDynaform.core.Proxy({url:n,method:"UPDATE",keys:a.token,data:{},successCallback:function(e,t){i={state:"success",data:t}},failureCallback:function(){i={state:"internetFail"}}}),i},e.prototype.refreshToken=function(){var e,t={},n=this;return t={grant_type:"refresh_token",refresh_token:this.token.refreshToken,access_token:this.token.accessToken},url=this.getFullURL(this.endPointsPath.refreshToken),e=new PMDynaform.core.Proxy({url:url,method:"POST",keys:this.token,data:t,successCallback:function(e,t){n.token.refreshToken=t.access_token},failureCallback:function(){console.log("Failure response resfres Token")}}),this},e.prototype.failureResponse=function(e){var t=this;return 401==e.error.code&&t.refreshToken(),this},e.prototype.emptyView=function(){return this.view.$el.remove(),this.viewfields=[],this.memoryStack=[],this},e.prototype.getFullURL=function(e){var t,n=this.keys,i=this.urlFormat;i=i.replace(/{endPointPath}/,e);for(t in n)n.hasOwnProperty(t)&&(i=i.replace(RegExp("{"+t+"}","g"),n[t]));return i},e.prototype.getFullURLStreaming=function(e){var t,n=this.keys,i=this.urlFormatStreaming;i=i.replace(/{endPointPath}/,e);for(t in n)n.hasOwnProperty(t)&&(i=i.replace(RegExp("{"+t+"}","g"),n[t]));return i},e.prototype.getToastMessageIOS=function(){return this.projectFlow.message},e.prototype.showNavBar=function(){var e,t,n=!1,i=!1;e=this.formsHandler.indexForms,t=this.dynaforms.length,e>0?(this.buttonPrev.show(),n=!0):(this.buttonPrev.hide(),n=!1),t-1>e?(this.buttonNext.show(),i=!0):(this.buttonNext.hide(),i=!1),i||n?$(this.navBar).show():$(this.navBar).hide()},e.prototype.initNavBar=function(){var e,t,n;return n=document.createElement("div"),n.style.cssText="float:right; margin:1%;",this.navBar=n,e=$("<button>"),e.addClass("btn btn-info"),e.append("Previous Step"),this.buttonPrev=e,this.buttonPrev.click(this.backStep()),t=$("<button>"),t.addClass("btn btn-info"),t.append("Next Step"),this.buttonNext=t,this.buttonNext.click(this.advanceStep()),$(n).append(e),$(n).append(t),$("#container").prepend($(n)),this},e.prototype.advanceStep=function(){var e=this;return function(){var t=(e.formsHandler,e.dataManager),n=e.projectFlow,i=e.getEscapeData();t.addData(i),t.addDataLocal(i),e.emptyView(),n.advanceStep(),e.showNavBar(),adjustHeight()}},e.prototype.backStep=function(){var e=this;return function(){var t=(e.formsHandler,e.dataManager),n=e.projectFlow,i=e.getEscapeData();t.addData(i),t.addDataLocal(i),e.emptyView(),n.backStep(),e.showNavBar(),adjustHeight()}},e.prototype.addViewFields=function(e){return this.viewfields.push(e),this},e.prototype.getData=function(){var e=this.view.getData();return e},e.prototype.getEscapeData=function(){var e=this.view.getData2();for(name in e)e[name]="string"==typeof e[name]?escape(e[name]):e[name];return e},e.prototype.unEscapeData=function(e){var t=e;for(name in t)t[name]="string"==typeof t[name]?unescape(t[name]):t[name];return t},e.prototype.getDataCustom=function(){for(var e,t,n=this.viewfields.length,i=[],a={},o={},r=0;n>r;r++)e=this.viewfields[r],"file"==e.model.get("type")?i.push(e.model.getDataComplete()):"signature"==e.model.get("type")?i.push(e.model.getDataCustom()):"datetime"==e.model.get("type")||"time"==e.model.get("type")||"date"==e.model.get("type")?(o={name:e.model.get("name"),value:e.$el.find("input").val()},i.push(o)):e.model.getData&&(t=e.model.getData(),t.value&&(t.value="string"==typeof t.value?escape(t.value):t.value),i.push(e.model.getData()));for(r=0;i.length>r;r++)i[r].value&&(a[i[r].name]=i[r].value);return a},e.prototype.setFiles=function(e){for(var t,n=JSON.parse(e),i=this.viewfields.length,a=0;i>a;a++)t=this.viewfields[a],t.model.get("name")==n.idField&&t.setFiles(n.files)},e.prototype.setLocation=function(e){for(var t,n=JSON.parse(e),i=this.viewfields.length,a=0;i>a;a++)t=this.viewfields[a],t.model.get("name")==n.idField&&t.setLocation(n)},e.prototype.setScannerCode=function(e){for(var t,n=JSON.parse(e),i=this.viewfields.length,a=0;i>a;a++)t=this.viewfields[a],t.model.get("name")==n.idField&&t.setScannerCode(n)},e.prototype.changeID=function(e){for(var t,n=JSON.parse(e),i=this.viewfields.length,a=0;i>a;a++)t=this.viewfields[a],t.model.get("name")==n.idField&&t.changeID(n.data)},e.prototype.getDataFile=function(){var e=this.memoryStack[0].data;return JSON.stringify(e)},e.prototype.setMemoryStack=function(e){this.memoryStack=[],this.memoryStack.push(e)},e.prototype.blockSubmit=function(e){"boolean"==typeof e&&(this.blockButtonSubmit=e)},PMDynaform.extendNamespace("PMDynaform.core.ProjectMobile",e)}(),function(){var e=function(){this.project=null,this.sendFormData=null,this.forms=null,this.indexForms=0,this.currentFlow=null,this.onLine=!0,this.isCase=!1};e.prototype.getIndexForms=function(){return this.indexForms},e.prototype.setForms=function(e){return this.forms=e,this},e.prototype.initFlow=function(e,t){return this.project=e,this.onLine=t,this},e.prototype.setIsCase=function(e){return this.isCase=e,this},e.prototype.executeTriggerBefore=function(){var e=this.project,t=this.project.formsHandler;return t.forms[t.indexForms].triggers.before&&(response=e.executeTrigger(t.forms[t.indexForms].stepId,"before"),"success"==response.state,"internetFail"==response.state&&this.setToastMessage(e.language.ERROR_NETWORK_TRIGGER)),this},e.prototype.executeTriggerAfter=function(){var e,t=this.project,n=this.project.formsHandler;return n.forms[n.indexForms].triggers.after&&(e=t.executeTrigger(n.forms[n.indexForms].stepId,"after"),"success"==e.state,"internetFail"==e.state&&this.setToastMessage(t.language.ERROR_NETWORK_TRIGGER)),this},e.prototype.initLoad=function(e){var t,n,i,a=this.project,o=this.project.formsHandler;return dataManager=this.project.dataManager,null==a.caseID&&(this.submitNew(),this.sendCaseInformation()),this.executeTriggerBefore(),null==this.project.dataForm&&(i=a.loadAllDataCase(),"success"==i.state?(dataManager.addData(i.data),dataManager.addDataLocal(i.data)):(this.setToastMessage(a.language.ERROR_NETWORK_FORM_DATA),this.internetFailData())),null!=e.jsonForm?(this.project.loadProject(e.jsonForm),o.setJsonFormCurrent(e.jsonForm),n=dataManager.getDataLocal(),null!=n&&this.project.setDataViewDelay(n),void 0):null==e.jsonForm&&(t=o.getJsonFormCurrent(),null!=t)?(this.project.loadProject(t),o.setJsonFormCurrent(t),n=dataManager.getDataLocal(),null!=n&&this.project.setDataViewDelay(n),void 0):void 0
},e.prototype.submitStep=function(e){var t,n=this.project.formsHandler,i=this.project.dataManager,a=this.project;i.addData(e.dataSubmit),i.addDataLocal(e.dataSubmit),e.dataSubmit&&(null==this.project.typeList?(t=n.getIndexForms(),a.caseID?this.submitCase(e):null==a.caseID&&this.submitCase(e)):this.submitCase(e)),a.showNavBar()},e.prototype.submitNew=function(){var e=(this.project.formsHandler,this.project);return infoCase=this.project.startCase(),"success"==infoCase.state?(this.project.setCaseID(infoCase.caseID),this.project.caseTitle=infoCase.caseTitle,this.project.caseNumber=infoCase.caseNumber,void 0):("internetFail"==infoCase.state&&(this.setToastMessage(e.language.ERROR_NETWORK_SUBMIT_NEW),this.internetFailData()),"unautorized"==infoCase.state&&(this.setToastMessage(e.language.ERROR_NETWORK_SUBMIT_NEW),this.internetFailData()),void 0)},e.prototype.submitCase=function(e){var t=this.project;this.project.formsHandler,e.dataSubmit&&(caseID=this.project.submitFormCase(e.dataSubmit),"success"==caseID.state&&(this.executeTriggerAfter(),this.sendFormData=e,this.project.sendSubmitInformationDevice(),this.setToastMessage(t.language.INFO_PMDYNAFORM_SUBMIT),t.emptyView(),this.advanceStep()||this.submitRoute()),"internetFail"==caseID.state&&(this.setToastMessage(t.language.ERROR_NETWORK_SUBMIT_CASE),this.internetFailData()),"unautorized"==caseID.state&&(this.setToastMessage(t.language.ERROR_NETWORK_SUBMIT_CASE),this.internetFailData()))},e.prototype.submitRoute=function(){var e,t,n=this.project;return this.project.formsHandler,e=this.project.routeCase(),"success"==e.state?(e.data.routing.length>0?(t=e.data.routing[0].userName,t=n.language.INFO_PMDYNAFORM_DERIVATED+"\n Next User:"+t):(t=e.data.routing.message,t="Message:"+t),this.setToastMessage(t),this.closeWebView(),void 0):("internetFail"==e.state&&(this.setToastMessage(n.language.ERROR_NETWORK_ROUTE),this.closeWebViewInternetFailed()),"unautorized"==e.state&&(this.setToastMessage(n.language.ERROR_NETWORK_ROUTE),this.closeWebViewInternetFailed()),void 0)},e.prototype.loadFormfromJson=function(){var e,t=this.project;if(responseDevice=this.getFormDefinitionDevice(),"success"==responseDevice.state)return this.project.loadProject(jsonForm.data),this.project.showNavBar(),void 0;switch(e=this.project.getFormDefinition(),e.state){case"success":this.project.loadProject(e.data),this.project.showNavBar();break;case"internetFail":this.setToastMessage(t.language.INFO_PMDYNAFORM_JSON),this.closeWebViewInternetFailed();break;case"unautorized":this.setToastMessage(t.language.INFO_PMDYNAFORM_JSON),this.closeWebViewInternetFailed();break;default:}},e.prototype.closeWebView=function(){switch(this.project.userAgent){case"android":JsInterface.SubmitFinishedCorrectly();break;default:}},e.prototype.closeWebViewInternetFailed=function(){switch(this.project.userAgent){case"android":JsInterface.submitFailedDueNoInternet();break;default:}},e.prototype.closeWebViewDerivated=function(){switch(this.project.userAgent){case"android":JsInterface.SubmitFinishedCorrectly();break;default:}},e.prototype.internetFail=function(){switch(this.project.userAgent){case"android":JsInterface.submitFailedDueNoInternet();break;default:}},e.prototype.internetFailData=function(){var e,t,n,i,a;return t=this.project.model.attributes,a=this.project.dataManager,i=this.project,a.addDataLocal(i.getDataCustom()),e=a.getDataLocal(),n={json:t,data:e,accessToken:this.project.token.accessToken,refreshToken:this.project.token.refreshToken,formID:this.project.keys.formID},"formslider-android"===navigator.userAgent&&(JsInterface.receiveFormData(JSON.stringify(n)),JsInterface.submitFailedDueNoInternet()),this},e.prototype.getFormDefinitionDevice=function(){var e={state:"internetFail"};switch(this.project.userAgent){case"android":-1==JsInterface.getFormId(this.formID)?e.state="failed":(e.state="success",e.data=JSON.parse(JsInterface.getFormId(this.formID)));break;default:}return e},e.prototype.setToastMessage=function(e){switch(navigator.userAgent){case"formslider-android":JsInterface.showToast(e);break;default:}},e.prototype.setCaseInformationDevice=function(){var e,t,n,i,a;if(t=this.project.model.attributes,a=this.project.dataManager,i=this.project,a.addDataLocal(i.getDataCustom()),e=a.getDataLocal(),n={json:t,data:e,accessToken:this.project.token.accessToken,refreshToken:this.project.token.refreshToken,formID:this.project.keys.formID},"formslider-android"===navigator.userAgent){var o={caseID:this.project.caseID,caseTitle:this.project.caseTitle,caseNumber:this.project.caseNumber};JsInterface.receiveFormData(JSON.stringify(n)),JsInterface.receiveCaseInformation(JSON.stringify(o))}return this},e.prototype.sendCaseInformation=function(){if("formslider-android"===navigator.userAgent){var e={caseID:this.project.caseID,caseTitle:this.project.caseTitle,caseNumber:this.project.caseNumber};JsInterface.receiveCaseInformation(JSON.stringify(e))}return this},e.prototype.setFormInformationDeviceRFC=function(){var e,t,n,i;return t=this.project.model.attributes,i=this.project.formsHandler,dataManager=this.project.dataManager,e=dataManager.getDataLocal(),n={json:t,data:e,accessToken:this.project.token.accessToken,refreshToken:this.project.token.refreshToken,formID:this.project.keys.formID},"formslider-android"===navigator.userAgent&&JsInterface.receiveFormData(JSON.stringify(n)),this},e.prototype.getJsonFormFromDevice=function(e){var t,n={state:"internetFail"};switch(navigator.userAgent){case"formslider-android":t=JsInterface.getFormId(e),-1==t?n.state="failed":(n.state="success",n.data=JSON.parse(t));break;default:}return n},e.prototype.advanceStep=function(){var e,t,n,i=this.project.formsHandler,a=this.project.dataManager,o=this.project;return this.executeTriggerAfter(),i.existNextForm()?(i.advanceForm(),e=this.getJsonFormRCF(),null!=e&&(this.executeTriggerBefore(),o.loadProject(e),this.setFormInformationDeviceRFC(),t=o.loadAllDataCase(),"success"==t.state?(a.addData(t.data),a.addDataLocal(t.data)):(this.setToastMessage(o.language.ERROR_NETWORK_FORM_DATA),this.internetFailData()),n=a.getDataLocal(),o.setDataViewDelay(n)),!0):!1},e.prototype.backStep=function(){var e,t,n=this.project.formsHandler,i=this.project.dataManager,a=this.project;return n.existPrevForm()?(n.backForm(),e=this.getJsonFormRCF(),null!=e&&(this.executeTriggerBefore(),a.loadProject(e),t=a.loadAllDataCase(),"success"==t.state?(i.addData(t.data),i.addDataLocal(t.data)):(this.setToastMessage(a.language.ERROR_NETWORK_FORM_DATA),this.internetFailData()),dataForm=i.getDataLocal(),a.setDataViewDelay(dataForm)),void 0):null},e.prototype.getJsonFormRCF=function(){var e,t,n,i,a=this.project.formsHandler;return this.project,e=a.getJsonFormCurrentLocal(),null!=e?i=e:(t=this.getCurrentJsonFormDeviceRCF(),null!=t?(i=t,a.setJsonFormIndexCurrent(t)):(n=this.getJsonFormNetworkRCF(),i=n)),i},e.prototype.getJsonFormNetworkRCF=function(){var e,t,n=this.project.formsHandler,i=this.project;switch(e=this.project.getJsonForm(n.formID),e.state){case"success":t=e.data,n.setJsonFormIndexCurrent(e.data);break;case"internetFail":projectFlow.setToastMessage(i.language.ERROR_NETWORK_JSON_FORM),projectFlow.closeWebViewInternetFailed();break;case"unautorized":projectFlow.setToastMessage(i.language.ERROR_NETWORK_JSON_FORM),projectFlow.closeWebViewInternetFailed();break;default:}return t},e.prototype.getCurrentJsonFormDeviceRCF=function(){var e,t,n=null;switch(t=this.project.formsHandler.formID,navigator.userAgent){case"formslider-android":e=JsInterface.getFormId(t),n=-1==e?null:JSON.parse(e);break;default:}return n},e.prototype.redirectURL=function(){return this},PMDynaform.extendNamespace("PMDynaform.core.ProjectFlow",e)}(),function(){var e=function(){this.project=null,this.nextForm=!1,this.sendFormData=null,this.forms=null,this.indexForms=0,this.currentFlow=null,this.onLine=!0,this.isCase=!1};e.prototype=new PMDynaform.core.ProjectFlow,e.prototype.getIndexForms=function(){return this.indexForms},e.prototype.setIsCase=function(e){return this.isCase=e,this},e.prototype.setForms=function(e){this.forms=e},e.prototype.initFlow=function(e,t){this.project=e,this.onLine=t},e.prototype.initLoad=function(e){var t,n,i,a=this.project,o=this.project.formsHandler;return dataManager=this.project.dataManager,null==a.caseID&&(this.submitNew(),this.executeFakeIOS("start-case")),this.executeTriggerBefore(),(null==this.project.dataForm||this.project.dataForm===void 0)&&(i=a.loadAllDataCase(),"success"==i.state?(dataManager.addData(i.data),dataManager.addDataLocal(i.data)):this.setToastMessage(a.language.ERROR_NETWORK_FORM_DATA)),null!=e.jsonForm?(this.project.loadProject(e.jsonForm),o.setJsonFormCurrent(e.jsonForm),n=dataManager.getDataLocal(),null!=n&&this.project.setDataViewDelay(n),void 0):null==e.jsonForm&&(t=o.getJsonFormCurrentNodevice(),null!=t)?(this.project.loadProject(t),o.setJsonFormCurrent(t),n=dataManager.getDataLocal(),null!=n&&this.project.setDataViewDelay(n),void 0):void 0},e.prototype.submitStep=function(e){var t,n=this.project.formsHandler,i=this.project.dataManager,a=this.project;i.addData(e.dataSubmit),i.addDataLocal(e.dataSubmit),e.dataSubmit&&(null==this.project.typeList?(t=n.getIndexForms(),a.caseID?this.submitCase(e):null==a.caseID&&(this.submitNew(),this.submitCase(e))):this.submitCase(e)),a.showNavBar()},e.prototype.submitNew=function(){return this.project.formsHandler,this.project,infoCase=this.project.startCase(),"success"==infoCase.state?(this.project.setCaseID(infoCase.caseID),this.project.caseTitle=infoCase.caseTitle,this.project.caseNumber=infoCase.caseNumber,void 0):"internetFail"==infoCase.state?(this.setToastMessage("Connection failed in submit new form"),this.internetFailData(),void 0):"unautorized"==infoCase.state?(this.setToastMessage("Connection failed in submit new form"),this.internetFailData(),void 0):void 0},e.prototype.nextStepCaseIOS=function(){},e.prototype.submitCase=function(e){var t,n=this.project,i=this.project.formsHandler,a=this.project.dataManager;if(e.dataSubmit){if(caseID=this.project.submitFormCase(e.dataSubmit),"success"==caseID.state)return this.executeTriggerAfter(),this.sendSubmitInformationDevice(),this.setToastMessage(n.language.INFO_PMDYNAFORM_SUBMIT),i.existNextForm()?(i.advanceForm(),n.emptyView(),jsonForm=i.getJsonFormCurrentLocal(),null==jsonForm?(this.executeFakeIOS("next-form"),void 0):(n.loadProject(jsonForm),t=a.getDataLocal(),null!=t&&n.setDataViewDelay(t),void 0)):(this.submitRoute(),void 0);"internetFail"==caseID.state&&(this.setToastMessage("Error"),this.internetFailData()),"unautorized"==caseID.state&&(this.setToastMessage("Error"),this.internetFailData())}},e.prototype.submitRoute=function(){var e,t="",n=this.project;return this.project.formsHandler,e=this.project.routeCase(),"success"==e.state?(e.data.routing.length>0?(t=e.data.routing[0].userName,t=n.language.INFO_PMDYNAFORM_DERIVATED+"\n Next User:"+t):(t=e.data.routing.message,t="Message:"+t),this.setToastMessage(t),this.closeWebViewDerivated(),void 0):("internetFail"==e.state&&(this.setToastMessage("Error in route"),this.closeWebViewInternetFailed()),"unautorized"==e.state&&(this.setToastMessage("Error in route"),this.closeWebViewInternetFailed()),void 0)},e.prototype.advanceStep=function(){var e,t,n=this.project.formsHandler,i=this.project.dataManager,a=this.project;return this.executeTriggerAfter(),n.existNextForm()?(n.advanceForm(),t=n.getJsonFormCurrentLocal(),null==t?(this.executeFakeIOS("next-form"),void 0):(this.executeTriggerBefore(),a.loadProject(t),allData=a.loadAllDataCase(),"success"==allData.state?(i.addData(allData.data),i.addDataLocal(allData.data)):(this.setToastMessage(a.language.ERROR_NETWORK_FORM_DATA),this.internetFailData()),e=i.getDataLocal(),a.setDataViewDelay(e),void 0)):null},e.prototype.backStep=function(){var e,t,n=this.project.formsHandler,i=this.project.dataManager,a=this.project;if(n.existPrevForm())return n.backForm(),t=n.getJsonFormCurrentLocal(),null==t?(this.executeFakeIOS("prev-form"),void 0):(this.executeTriggerBefore(),a.loadProject(t),allData=a.loadAllDataCase(),"success"==allData.state?(i.addData(allData.data),i.addDataLocal(allData.data)):(this.setToastMessage(a.language.ERROR_NETWORK_FORM_DATA),this.internetFailData()),e=i.getDataLocal(),a.setDataViewDelay(e),void 0)},e.prototype.executePrevOrNextStepIOS=function(e,t){var n,i=(this.indexForms,this.project.formsHandler);return dataManager=this.project.dataManager,project=this.project,null!=t?(n=JSON.parse(t),i.setJsonFormIndexCurrent(n),this.executeTriggerBefore(),project.loadProject(n),this.loadDataProject(),dataForm=dataManager.getDataLocal(),project.setDataViewDelay(dataForm),void 0):(n=i.getJsonFormCurrentNetwork(),null!=n?(this.executeTriggerBefore(),project.loadProject(n),i.setJsonFormCurrent(n),this.loadDataProject(),dataForm=dataManager.getDataLocal(),project.setDataViewDelay(dataForm),void 0):(this.setToastMessage("Error"),this.internetFailData(),this))},e.prototype.loadDataProject=function(){var e=project.loadAllDataCase(),t=this.project.dataManager;"success"==e.state?(t.addData(e.data),t.addDataLocal(e.data)):(this.setToastMessage(project.language.ERROR_NETWORK_FORM_DATA),this.internetFailData())},e.prototype.internetFailData=function(){this.executeFakeIOS("close-webview")},e.prototype.closeWebViewDerivated=function(){this.executeFakeIOS("derivated")},e.prototype.getJsonFormFromDevice=function(){switch(this.project.userAgent){case"ios":this.executeFakeIOS("next-form");break;default:}return null},e.prototype.setToastMessage=function(e){return"formslider-ios"===navigator.userAgent&&(this.message=e),this},e.prototype.setCaseInformationDevice=function(){return this.executeFakeIOS("submit-nextform"),this},e.prototype.sendSubmitInformationDevice=function(){return this.executeFakeIOS("submit-nextform"),this},e.prototype.executeFakeIOS=function(e){var t=document.createElement("IFRAME");t.setAttribute("src","ios:"+e),document.documentElement.appendChild(t),t.parentNode.removeChild(t),t=null},PMDynaform.extendNamespace("PMDynaform.core.ProjectFlowIOS",e)}(),function(){var e=function(){this.project=null,this.forms=!1,this.jsonForms=[],this.indexForms=null,this.data=[],this.dataDevice=[],this.formID=null,this.addRemoteData=!1,this.addRemoteDataFirstTime=!1,this.dataRemote=[]};e.prototype.init=function(e,t,n,i,a){return this.setProject(e),this.setForms(t),this.setData(n),this.setFormID(i),this.setJsonFormCurrent(a),this},e.prototype.setForms=function(e){var t;t=e.length,this.forms=e;for(var n=0;t>n;n++)this.jsonForms[n]=null,this.dataRemote[n]=null;return this},e.prototype.setAddRemoteData=function(e){this.addRemoteData=e},e.prototype.setData=function(e){return this.data=null!=e?e:[],this},e.prototype.setDataDevice=function(e){return this.dataDevice=null!=e?e:[],this},e.prototype.setProject=function(e){return this.project=e,this},e.prototype.setFormID=function(e){this.formID=e,this.indexForms=0;for(var t=0;this.forms.length>t;t++)if(this.forms[t].mongoId==this.project.formID){this.indexForms=t;break}return this},e.prototype.setJsonForm=function(e,t){return this.jsonForms[e]!==void 0&&(this.jsonForms[e]=t),this},e.prototype.setJsonFormCurrent=function(e){return this.jsonForms[this.indexForms]=e,this},e.prototype.setJsonFormIndexCurrent=function(e){return this.jsonForms[this.indexForms]!==void 0&&(this.jsonForms[this.indexForms]=e),null==this.jsonForms[this.indexForms]&&(this.jsonForms[this.indexForms]=e),this},e.prototype.existNextForm=function(){return this.forms[this.indexForms+1]?!0:!1},e.prototype.existPrevForm=function(){return this.forms[this.indexForms-1]?!0:!1},e.prototype.advanceForm=function(){return this.indexForms++,this.formID=this.forms[this.indexForms].formId,this.project.setFormID(this.formID),this},e.prototype.backForm=function(){return this.indexForms--,this.formID=this.forms[this.indexForms].mongoId,this.project.setFormID(this.formID),this},e.prototype.getJsonFormIndex=function(e){return this.jsonForms[e]},e.prototype.getIndexForms=function(){return this.indexForms},e.prototype.getJsonForm=function(e){var t,n,i=this.projectFlow;if(n=this.getFormDefinitionDevice(e),"success"==n.state)return n.data;switch(t=this.project.getJsonForm(e),t.state){case"success":return t.data;case"internetFail":i.setToastMessage("Connection failed - get form definition"),i.closeWebViewInternetFailed();break;case"unautorized":i.setToastMessage("Connection failed - get form definition"),i.closeWebViewInternetFailed();break;default:}return null},e.prototype.getJsonFormCurrent=function(){var e,t,n=this.indexForms,i=this.project.projectFlow;if(null!=this.jsonForms[n])return this.jsonForms[n];if(t=i.getJsonFormFromDevice(this.formID),null==t)return null;if("success"==t.state)return this.setJsonForm(n,t.data),t.data;switch(e=this.project.getJsonForm(this.formID),e.state){case"success":return this.setJsonForm(n,e.data),e.data;case"internetFail":i.setToastMessage("Connection failed - get form definition"),i.closeWebViewInternetFailed();break;case"unautorized":i.setToastMessage("Connection failed - get form definition"),i.closeWebViewInternetFailed();break;default:}return null},e.prototype.getJsonFormCurrentNodevice=function(){var e,t=this.indexForms,n=this.project.projectFlow;if(null!=this.jsonForms[t])return this.jsonForms[t];switch(e=this.project.getJsonForm(this.formID),e.state){case"success":return this.setJsonForm(t,e.data),e.data;case"internetFail":n.setToastMessage("Connection failed - get form definition"),n.closeWebViewInternetFailed();break;case"unautorized":n.setToastMessage("Connection failed - get form definition"),n.closeWebViewInternetFailed();break;default:}return null},e.prototype.getJsonFormCurrentNetwork=function(){var e,t=this.indexForms,n=this.project.projectFlow;switch(e=this.project.getJsonForm(this.formID),e.state){case"success":return this.setJsonForm(t,e.data),e.data;case"internetFail":n.setToastMessage("Connection failed - get form definition"),n.closeWebViewInternetFailed();break;case"unautorized":n.setToastMessage("Connection failed - get form definition"),n.closeWebViewInternetFailed();break;default:}return null},e.prototype.getJsonFormCurrentLocal=function(){return this.jsonForms[this.indexForms]},e.prototype.sendData=function(){return this},PMDynaform.extendNamespace("PMDynaform.core.FormsHandler",e)}(),function(){var e=function(t){this.data=null,this.dataLocal=null,e.prototype.init.call(this,t)};e.prototype.init=function(e){var t={data:{},dataLocal:{}};$.extend(!0,t,e),this.setData(t.data),this.setDataLocal(t.dataDevice)},e.prototype.setData=function(e){return this.data=null!=e?e:{},this},e.prototype.getData=function(){return this.data},e.prototype.getDataLocal=function(){return this.dataLocal},e.prototype.getDataDevice=function(){return this.dataLocal},e.prototype.setDataLocal=function(e){return this.dataLocal=null!=e?e:{},this},e.prototype.addData=function(e){return $.extend(this.data,e),this},e.prototype.addDataLocal=function(e){return $.extend(this.dataLocal,e),this},PMDynaform.extendNamespace("PMDynaform.core.DataLocalManager",e)}(),function(){var e=function(t){this.el=t.el,this.$el=t.el,this.streaming=t.streaming?t.streaming:null,this.type=t.type,"video"==this.type&&e.prototype.initVideo.call(this,this.el),"audio"==this.type&&e.prototype.initAudio.call(this,this.el)};e.prototype.initVideo=function(e){var t=e.find("video");e.find(".pmdynaform-media-control"),t[0].removeAttribute("controls"),e.find(".pmdynaform-media-control").fadeIn(500),e.find(".pmdynaform-media-caption").fadeIn(500),t.on("loadedmetadata",function(){e.find(".current").text(u(0)),e.find(".duration").text(u(t[0].duration)),l(0,.7),setTimeout(n,150),e.on("click",function(){e.find(".btnPlay").find(".glyphicon.glyphicon-play").addClass("glyphicon glyphicon-pause").removeClass("glyphicon glyphicon-play"),$(this).unbind("click"),t[0].play()})});var n=function(){var i=t[0].buffered.end(0),a=t[0].duration,o=100*i/a;e.find(".pmdynaform-media-bufferBar").css("width",o+"%"),a>i&&setTimeout(n,500)};t.on("timeupdate",function(){var n=t[0].currentTime,i=t[0].duration,a=100*n/i;e.find(".pmdynaform-media-timeBar").css("width",a+"%"),e.find(".current").text(u(n))}),t.on("click",function(){i()}),e.find(".btnPlay").on("click",function(){i()});var i=function(){null!=kitKatMode?JsInterface.startVideo(t[0].src,"video/mp4"):t[0].paused||t[0].ended?(e.find(".btnPlay").addClass("paused"),e.find(".btnPlay").find(".glyphicon.glyphicon-play").addClass("glyphicon glyphicon-pause").removeClass("glyphicon glyphicon-play"),t[0].play()):(e.find(".btnPlay").removeClass("paused"),e.find(".btnPlay").find(".glyphicon.glyphicon-pause").removeClass("glyphicon glyphicon-pause").addClass("glyphicon glyphicon-play"),t[0].pause())};e.find(".btnFS").on("click",function(){$.isFunction(t[0].webkitEnterFullscreen)?t[0].webkitEnterFullscreen():$.isFunction(t[0].mozRequestFullScreen)?t[0].mozRequestFullScreen():alert("Your browsers doesn't support fullscreen")}),e.find(".sound").click(function(){t[0].muted=!t[0].muted,$(this).toggleClass("muted"),t[0].muted?e.find(".pmdynaform-media-volumeBar").css("width",0):e.find(".pmdynaform-media-volumeBar").css("width",100*t[0].volume+"%")}),t.on("canplay",function(){e.find(".loading").fadeOut(100)});var a=!1;t.on("canplaythrough",function(){a=!0}),t.on("ended",function(){e.find(".btnPlay").removeClass("paused"),t[0].pause()}),t.on("seeking",function(){a||e.find(".loading").fadeIn(200)}),t.on("seeked",function(){}),t.on("waiting",function(){e.find(".loading").fadeIn(200)});var o=!1;e.find(".pmdynaform-media-progress").on("mousedown",function(e){o=!0,r(e.pageX)}),$(document).on("mouseup",function(e){o&&(o=!1,r(e.pageX))}),$(document).on("mousemove",function(e){o&&r(e.pageX)});var r=function(n){var i=e.find(".pmdynaform-media-progress"),a=t[0].duration,o=n-i.offset().left,r=100*o/i.width();r>100&&(r=100),0>r&&(r=0),e.find(".pmdynaform-media-timeBar").css("width",r+"%"),t[0].currentTime=a*r/100},s=!1;e.find(".pmdynaform-media-volume").on("mousedown",function(n){s=!0,t[0].muted=!1,e.find(".sound").removeClass("muted"),l(n.pageX)}),$(document).on("mouseup",function(e){s&&(s=!1,l(e.pageX))}),$(document).on("mousemove",function(e){s&&l(e.pageX)});var l=function(n,i){var a,o=e.find(".pmdynaform-media-volume");if(i)a=100*i;else{var r=n-o.offset().left;a=100*r/o.width()}a>100&&(a=100),0>a&&(a=0),e.find(".pmdynaform-media-volumeBar").css("width",a+"%"),t[0].volume=a/100,0==t[0].volume?e.find(".sound").removeClass("sound2").addClass("muted"):t[0].volume>.5?e.find(".sound").removeClass("muted").addClass("sound2"):e.find(".sound").removeClass("muted").removeClass("sound2")},u=function(e){var t=10>Math.floor(e/60)?"0"+Math.floor(e/60):Math.floor(e/60),n=10>Math.floor(e-60*t)?"0"+Math.floor(e-60*t):Math.floor(e-60*t);return t+":"+n};this.$el=e},e.prototype.initAudio=function(e){var t=e.find("audio");e.find(".pmdynaform-media-control"),t[0].removeAttribute("controls"),e.find(".pmdynaform-media-control").fadeIn(500),e.find(".pmdynaform-media-caption").fadeIn(500),t.on("loadedmetadata",function(){e.find(".current").text(u(0)),e.find(".duration").text(u(t[0].duration)),l(0,.7),setTimeout(n,150),e.on("click",function(){e.find(".btnPlay").find(".glyphicon.glyphicon-play").addClass("glyphicon glyphicon-pause").removeClass("glyphicon glyphicon-play"),$(this).unbind("click"),t[0].play()})});var n=function(){var i=t[0].buffered.end(0),a=t[0].duration,o=100*i/a;e.find(".pmdynaform-media-bufferBar").css("width",o+"%"),a>i&&setTimeout(n,500)};t.on("timeupdate",function(){var n=t[0].currentTime,i=t[0].duration,a=100*n/i;e.find(".pmdynaform-media-timeBar").css("width",a+"%"),e.find(".current").text(u(n))}),t.on("click",function(){i()}),e.find(".btnPlay").on("click",function(){i()});var i=function(){t[0].paused||t[0].ended?(e.find(".btnPlay").addClass("paused"),e.find(".btnPlay").find(".glyphicon.glyphicon-play").addClass("glyphicon-pause").removeClass("glyphicon-play"),t[0].play()):(e.find(".btnPlay").removeClass("paused"),e.find(".btnPlay").find(".glyphicon.glyphicon-pause").removeClass("glyphicon-pause").addClass("glyphicon-play"),t[0].pause())};e.find(".btnFS").on("click",function(){$.isFunction(t[0].webkitEnterFullscreen)?t[0].webkitEnterFullscreen():$.isFunction(t[0].mozRequestFullScreen)?t[0].mozRequestFullScreen():alert("Your browsers doesn't support fullscreen")}),e.find(".sound").click(function(){t[0].muted=!t[0].muted,$(this).toggleClass("muted"),t[0].muted?e.find(".pmdynaform-media-volumeBar").css("width",0):e.find(".pmdynaform-media-volumeBar").css("width",100*t[0].volume+"%")}),t.on("canplay",function(){e.find(".loading").fadeOut(100)});var a=!1;t.on("canplaythrough",function(){a=!0}),t.on("ended",function(){e.find(".btnPlay").removeClass("paused"),t[0].pause()}),t.on("seeking",function(){a||e.find(".loading").fadeIn(200)}),t.on("seeked",function(){}),t.on("waiting",function(){e.find(".loading").fadeIn(200)});var o=!1;e.find(".pmdynaform-media-progress").on("mousedown",function(e){o=!0,r(e.pageX)}),$(document).on("mouseup",function(e){o&&(o=!1,r(e.pageX))}),$(document).on("mousemove",function(e){o&&r(e.pageX)});var r=function(n){var i=e.find(".pmdynaform-media-progress"),a=t[0].duration,o=n-i.offset().left,r=100*o/i.width();r>100&&(r=100),0>r&&(r=0),e.find(".pmdynaform-media-timeBar").css("width",r+"%"),t[0].currentTime=a*r/100},s=!1;e.find(".pmdynaform-media-volume").on("mousedown",function(n){s=!0,t[0].muted=!1,e.find(".sound").removeClass("muted"),l(n.pageX)}),$(document).on("mouseup",function(e){s&&(s=!1,l(e.pageX))}),$(document).on("mousemove",function(e){s&&l(e.pageX)});var l=function(n,i){var a,o=e.find(".pmdynaform-media-volume");if(i)a=100*i;else{var r=n-o.offset().left;a=100*r/o.width()}a>100&&(a=100),0>a&&(a=0),e.find(".pmdynaform-media-volumeBar").css("width",a+"%"),t[0].volume=a/100,0==t[0].volume?e.find(".sound").removeClass("sound2").addClass("muted"):t[0].volume>.5?e.find(".sound").removeClass("muted").addClass("sound2"):e.find(".sound").removeClass("muted").removeClass("sound2")},u=function(e){var t=10>Math.floor(e/60)?"0"+Math.floor(e/60):Math.floor(e/60),n=10>Math.floor(e-60*t)?"0"+Math.floor(e-60*t):Math.floor(e-60*t);return t+":"+n};this.$el=e},PMDynaform.extendNamespace("PMDynaform.core.MediaElement",e)}(),function(){var e=function(t){this.url=null,this.method=null,this.rc=null,this.data=null,e.prototype.init.call(this,t)};e.prototype.type="RestProxy",e.prototype.init=function(e){var t={url:null,method:"GET",data:{},dataType:"json",authorizationType:"none",authorizationOAuth:!1,success:function(){},failure:function(){},complete:function(){}};jQuery.extend(!0,t,e),this.setRestClient().setUrl(t.url).setAuthorizationOAuth(t.authorizationOAuth).setMethod(t.method).setData(t.data).setDataType(t.dataType).setSuccessAction(t.success).setFailureAction(t.failure).setCompleteAction(t.complete)},e.prototype.setRestClient=function(){return this.rc instanceof RestClient==!1&&(this.rc=new RestClient),this},e.prototype.setUrl=function(e){return this.url=e,this},e.prototype.setAuthorizationOAuth=function(e){return"boolean"==typeof e&&this.rc.setSendBearerAuthorization(e),this},e.prototype.setMethod=function(e){return this.method=e,this},e.prototype.setSuccessAction=function(t){return e.prototype.success=t,this},e.prototype.setFailureAction=function(t){return e.prototype.failure=t,this},e.prototype.setCompleteAction=function(t){return e.prototype.complete=t,this},e.prototype.setData=function(e){return this.data=e,this},e.prototype.getData=function(){return this.data},e.prototype.setDataType=function(e){return this.rc.setDataType(e),this},e.prototype.setCredentials=function(e,t){return this.rc.setBasicCredentials(e,t),this},e.prototype.setContentType=function(){return this.rc.setContentType(),this},e.prototype.send=function(){},e.prototype.receive=function(){},e.prototype.setAuthorizationType=function(e,t){switch(this.rc.setAuthorizationType(e),e){case"none":break;case"basic":this.rc.setBasicCredentials(t.client,t.secret);break;case"oauth2":this.rc.setAccessToken(t)}return this},e.prototype.post=function(e){var t=this;if(void 0!==e&&t.init(e),!this.rc)throw Error("the RestClient was not defined, please verify the property 'rc' for continue.");t.rc.postCall({url:t.url,id:t.uid,data:t.data,success:function(e,n){t.success.call(t,e,n)},failure:function(e,n){t.failure.call(t,e,n)},complete:function(e,n){t.complete.call(t,e,n)}}),t.rc.setSendBearerAuthorization(!1)},e.prototype.update=function(e){var t=this;if(void 0!==e&&t.init(e),!this.rc)throw Error("the RestClient was not defined, please verify the property 'rc' for continue.");this.rc.putCall({url:this.url,id:this.uid,data:this.data,success:function(e,n){t.success.call(this,e,n)},failure:function(e,n){t.failure.call(this,e,n)},complete:function(e,n){t.complete.call(t,e,n)}})},e.prototype.get=function(e){var t=this;if(void 0!==e&&t.init(e),!this.rc)throw Error("the RestClient was not defined, please verify the property 'rc' for continue.");t.rc.getCall({url:t.url,id:t.uid,data:t.data,success:function(e,n){t.success.call(t,e,n)},failure:function(e,n){t.failure.call(t,e,n)},complete:function(e,n){t.complete.call(t,e,n)}}),t.rc.setSendBearerAuthorization(!1)},e.prototype.remove=function(e){var t=this;if(void 0!==e&&t.init(e),!this.rc)throw Error("the RestClient was not defined, please verify the property for continue.");this.rc.deleteCall({url:this.url,id:this.uid,data:this.data,success:function(e,n){t.success.call(this,e,n)},failure:function(e,n){t.failure.call(this,e,n)},complete:function(e,n){t.complete.call(t,e,n)}})},e.prototype.success=function(){},e.prototype.failure=function(){},e.prototype.complete=function(){},PMDynaform.extendNamespace("PMDynaform.proxy.RestProxy",e)}(),function(){var e=Backbone.View.extend({template:_.template($("#tpl-validator").html()),events:{mouseover:"onMouseOver"},initialize:function(){this.render()},onMouseOver:function(){},render:function(){return this.$el.addClass("pmdynaform-message-error"),this.$el.html(this.template(this.model.toJSON())),this}});PMDynaform.extendNamespace("PMDynaform.view.Validator",e)}(),function(){var e=Backbone.View.extend({content:null,colsIndex:null,template:null,collection:null,items:null,views:[],renderTo:document.body,project:null,initialize:function(e){var t;for({factory:{products:{form:{model:PMDynaform.model.FormPanel,view:PMDynaform.view.FormPanel},fieldset:{model:PMDynaform.model.Fieldset,view:PMDynaform.view.Fieldset},panel:{model:PMDynaform.model.FormPanel,view:PMDynaform.view.FormPanel}},defaultProduct:"form"}},e.renderTo&&(this.renderTo=e.renderTo),e.project&&(this.project=e.project),this.views=[],this.makePanels(),this.render(),t=0;this.views.length>t;t+=1)this.views[t].runningFormulator()},getData:function(){var e,t,n,i,a,o,r;for(o=this.model.get("items"),r=this.model.getData(),e=0;o.length>e;e+=1)for(a=this.views[e].items.asArray(),t=0;a.length>t;t+=1)"function"==typeof a[t].model.getData&&"form"===a[t].model.attributes.type?(i=a[t].getData(),$.extend(!0,r.variables,i.variables)):"function"==typeof a[t].model.getData&&(n=a[t].model.getData(),r.variables[n.name]=n.value);return r},getData2:function(){var e,t,n,i,a,o,r={};for(a=this.model.get("items"),e=0;a.length>e;e+=1)for(i=this.views[e].items.asArray(),t=0;i.length>t;t+=1)"function"==typeof i[t].model.getData&&"form"===i[t].model.attributes.type||"function"==typeof i[t].model.getData&&("grid"===i[t].model.get("type")?(o=i[t].model,r[o.get("name")]=i[t].getData2()):(n=i[t].model.getData(),r[n.name]=n.value));return r},setData2:function(e){return this.getPanels()[0].setData2(e),this},makePanels:function(){var e,t,n,i=0;for(this.views=[],e=this.model.get("items"),i=0;e.length>i;i+=1)$.inArray(e[i].type,["panel","form"])>=0&&(t=new PMDynaform.model.FormPanel(e[i]),n=new PMDynaform.view.FormPanel({model:t,project:this.project}),this.views.push(n));return this},getPanels:function(){var e=this.views.length>0?this.views:[];return e},render:function(){var e;for(this.$el=$(this.el),e=0;this.views.length>e;e+=1)this.$el.append(this.views[e].render().el);
return this.$el.addClass("pmdynaform-container"),$(this.renderTo).append(this.el),this},afterRender:function(){var e;for(e=0;this.views.length>e;e+=1)this.views[e].afterRender();return this}});PMDynaform.extendNamespace("PMDynaform.view.Panel",e)}(),function(){var e=Backbone.View.extend({tagName:"form",content:null,template:null,items:new PMDynaform.util.ArrayList,views:[],templateRow:_.template($("#tpl-row").html()),colSpanLabel:3,colSpanControl:9,project:null,preTargetControl:null,events:{submit:"onSubmit"},onChange:function(){},requireVariableByField:[],checkBinding:function(){this.onChangeCallback(this.model.get("name"),this.previusValue,this.model.get("value")),this.keyPressed||this.render()},setOnChange:function(e){return"function"==typeof e&&(this.onChangeCallback=e),this},onChangeHandler:function(){var e=this;return function(t,n,i){"function"==typeof e.onChange&&e.onChange(t,n,i)}},initialize:function(e){var t={factory:{products:{text:{model:PMDynaform.model.Text,view:PMDynaform.view.Text},textarea:{model:PMDynaform.model.TextArea,view:PMDynaform.view.TextArea},checkbox:{model:PMDynaform.model.Checkbox,view:PMDynaform.view.Checkbox},radio:{model:PMDynaform.model.Radio,view:PMDynaform.view.Radio},dropdown:{model:PMDynaform.model.Dropdown,view:PMDynaform.view.Dropdown},button:{model:PMDynaform.model.Button,view:PMDynaform.view.Button},submit:{model:PMDynaform.model.Submit,view:PMDynaform.view.Submit},datetime:{model:PMDynaform.model.Datetime,view:PMDynaform.view.Datetime},fieldset:{model:PMDynaform.model.Fieldset,view:PMDynaform.view.Fieldset},suggest:{model:PMDynaform.model.Suggest,view:PMDynaform.view.Suggest},link:{model:PMDynaform.model.Link,view:PMDynaform.view.Link},hidden:{model:PMDynaform.model.Hidden,view:PMDynaform.view.Hidden},title:{model:PMDynaform.model.Title,view:PMDynaform.view.Title},subtitle:{model:PMDynaform.model.Title,view:PMDynaform.view.Title},label:{model:PMDynaform.model.Label,view:PMDynaform.view.Label},empty:{model:PMDynaform.model.Empty,view:PMDynaform.view.Empty},file:{model:PMDynaform.model.File,view:PMDynaform.view.File},image:{model:PMDynaform.model.Image,view:PMDynaform.view.Image},geomap:{model:PMDynaform.model.GeoMap,view:PMDynaform.view.GeoMap},grid:{model:PMDynaform.model.GridPanel,view:PMDynaform.view.GridPanel},form:{model:PMDynaform.model.SubForm,view:PMDynaform.view.SubForm},annotation:{model:PMDynaform.model.Annotation,view:PMDynaform.view.Annotation},geomap_mobile:{model:PMDynaform.model.Geomap_mobile,view:PMDynaform.view.Geomap_mobile},qrcode_mobile:{model:PMDynaform.model.Qrcode_mobile,view:PMDynaform.view.Qrcode_mobile},signature_mobile:{model:PMDynaform.model.Signature_mobile,view:PMDynaform.view.Signature_mobile},image_mobile:{model:PMDynaform.model.Image_mobile,view:PMDynaform.view.Image_mobile},audio_mobile:{model:PMDynaform.model.Audio_mobile,view:PMDynaform.view.Audio_mobile},video_mobile:{model:PMDynaform.model.Video_mobile,view:PMDynaform.view.Video_mobile},panel:{model:PMDynaform.model.PanelField,view:PMDynaform.view.PanelField}},defaultProduct:"empty"}};this.items=new PMDynaform.util.ArrayList,e.project&&(this.project=e.project),this.setFactory(t.factory),this.makeItems()},setAction:function(){return this.$el.attr("action",this.model.get("action")),this},setMethod:function(){return this.$el.attr("method",this.model.get("method")),this},setFactory:function(e){return this.factory=e,this},getData:function(){return this.model.getData()},setData:function(e){var t,n,i=e,a=this.items.asArray();if("object"==typeof e)for(t=0;a.length>t;t+=1){for(n in i)a[t].model.attributes.variable&&a[t].model.attributes.variable.var_name===n&&a[t].model.set("value",i[n]);a[t]instanceof PMDynaform.view.SubForm&&a[t].setData(e),a[t]instanceof PMDynaform.view.GridPanel&&a[t].setData(e)}return this},setData2:function(e){var t,n,i,a,o,r,s,l,u,d;for(l=["text","textarea","datetime","radio","link","dropdown"],n=this.items.asArray(),t=0;n.length>t;t+=1){if(void 0!==e[n[t].model.get("name")]){if(r=n[t].model.get("mode"),a=n[t].model.get("type"),"edit"===r||"disabled"===r){if(-1!==l.indexOf(a)&&(n[t].model.set("value",e[n[t].model.get("name")]),n[t].clicked&&n[t].render()),"suggest"===a){for(u=0;n[t].model.get("localOptions").length>u;u+=1)if(d=n[t].model.get("localOptions")[u].value,d===e[n[t].model.get("name")]){s=n[t].model.get("localOptions")[u].label;break}if(s&&!s.length)for(u=0;n[t].model.get("options").length>u;u+=1)if(d=n[t].model.get("options")[u].value,d===e[n[t].model.get("name")]){s=n[t].model.get("options")[u].label;break}$(n[t].el).find(":input").val(s),n[t].model.attributes.value=e[n[t].model.get("name")]}if("scannerCode"==a&&n[t].setCodes(e[n[t].model.get("name")]),"signature"==a&&n[t].setSignature(e[n[t].model.get("name")]),"location"==a&&n[t].setLocation(e[n[t].model.get("name")]),("imageMobile"==a||"audioMobile"==a||"videoMobile"==a)&&n[t].setFilesRFC(e[n[t].model.get("name")]),"checkbox"===a){if(o=n[t].model.get("options"),"boolean"===n[t].model.get("dataType"))e[n[t].model.get("name")]===o[0].value?(o[1].selected=!1,o[0].selected=!0):(delete o[0].selected,o[1].selected=!0,o[0].selected=!1);else for(i=0;o.length>i;i+=1)delete o[i].selected,-1!==e[n[t].model.get("name")].indexOf(o[i].value)&&(o[i].selected=!0);n[t].model.set("options",o),n[t].render(),n[t].model.attributes.value=[e[n[t].model.get("name")]]}"grid"===a&&n[t].setData2(e[n[t].model.get("name")])}if("view"===r)if("checkbox"===n[t].model.get("originalType"))n[t].model.set("options",e[n[t].model.get("name")]);else if("grid"===n[t].model.get("originalType"))n[t].setData2(e[n[t].model.get("name")]);else if("dropdown"===n[t].model.get("originalType")||"suggest"===n[t].model.get("originalType")){for(s=[],u=0;n[t].model.get("localOptions").length>u;u+=1)if(d=n[t].model.get("localOptions")[u].value,d===e[n[t].model.get("name")]){s.push(n[t].model.get("localOptions")[u].label),n[t].model.set("fullOptions",s);break}if(!s.length)for(u=0;n[t].model.get("options").length>u;u+=1)if(d=n[t].model.get("options")[u].value,d===e[n[t].model.get("name")]){s.push(n[t].model.get("options")[u].label),n[t].model.set("fullOptions",s);break}}else s=[],s.push(e[n[t].model.get("name")]),n[t].model.set("fullOptions",s)}n[t].model.get("data")&&1===n[t].$el.find("input[type='hidden']").length}},validateVariableField:function(e){var t=!1;return $.inArray(e.type,this.requireVariableByField)>=0?e.var_uid&&(t=!0):t="NOT",t},makeItems:function(){var e,t,n,i,a,o,r,s,l,u,d=this.factory;for(u=this.model.get("items"),this.viewsBuilt=[],this.items.clear(),e=0;u.length>e;e+=1){for(o=[],t=0;u[e].length>t;t+=1)i=this.validateVariableField(u[e][t]),null===u[e][t]||i!==!0&&"NOT"!==i?console.error("The field must have the variable property and must to be an object: ",u[e][t]):(u[e][t].type?("checkbox"===u[e][t].type&&"boolean"===u[e][t].dataType&&u[e][t].data&&("boolean"==typeof u[e][t].data.value?u[e][t].data.value?(u[e][t].data.value=["1"],u[e][t].data.label=JSON.stringify(["1"])):(u[e][t].data.value=["0"],u[e][t].data.label=JSON.stringify(["0"])):1==u[e][t].data.value?(u[e][t].data.value=["1"],u[e][t].data.label=JSON.stringify(["1"])):(u[e][t].data.value=["0"],u[e][t].data.label=JSON.stringify(["0"]))),s=new PMDynaform.core.TransformJSON({parentMode:this.model.get("mode"),field:u[e][t]}),n=d.products[s.getJSON().type.toLowerCase()]?d.products[s.getJSON().type.toLowerCase()]:d.products[d.defaultProduct]):(s=new PMDynaform.core.TransformJSON({parentMode:this.model.get("mode"),field:u[e][t]}),n=d.products[d.defaultProduct]),l={colSpanLabel:this.createColspan(u[e][t].colSpan,"label"),colSpanControl:this.createColspan(u[e][t].colSpan,"control"),project:this.project,parentMode:this.model.get("mode"),namespace:this.model.get("namespace"),variable:"NOT"!==i?this.getVariable(u[e][t].var_uid):null,fieldsRelated:[],name:u[e][t].name,options:u[e][t].options,form:this},("form"===u[e][t].type||"grid"===u[e][t].type)&&(l.variables=this.model.get("variables")||[],l.data=this.model.get("data")||[]),$.extend(!0,l,s.getJSON()),"form"===l.type&&"parent"===l.mode&&(l.mode=this.model.get("mode")),r=new n.model(l),a=new n.view({model:r,project:this.project,parent:this}),a.parent=this,a.project=this.project,this.project.addViewFields(a),o.push(a),this.items.insert(a),a.model.set("view",a));o.length&&this.viewsBuilt.push(o)}return this},createColspan:function(e,t){var n;switch(parseInt(e)){case 12:n="label"===t?2:10;break;case 11:n="label"===t?2:10;break;case 10:n="label"===t?2:10;break;case 9:n="label"===t?2:10;break;case 8:n="label"===t?2:10;break;case 7:n="label"===t?2:10;break;case 6:n="label"===t?4:8;break;case 5:n="label"===t?5:7;break;case 4:n="label"===t?4:8;break;case 3:n="label"===t?5:7;break;case 2:n="label"===t?5:7;break;case 1:n="label"===t?4:8}return n},runningFormulator:function(){var e,t,n,i,a;for(e=this.viewsBuilt,n=0;e.length>n;n+=1)for(i=0;e[n].length>i;i+=1)t=e[n][i],"form"===t.model.get("type")?t.runningFormulator():t.model.get("formula")&&t.model.get("formula").trim().length&&(a=e.filter(function(e){return t.fieldValid.indexOf(e[0].model.get("id"))>-1?(e[0].onFieldAssociatedHandler(),e):void 0}));return this},setFieldRelated:function(){var e,t,n,i,a,o,r,s,l,u,d=this.items.asArray();for(e=0;d.length>e;e+=1){if(a=d[e].model.get("variable"))for(t=0;d.length>t;t+=1)e!==t&&(o=d[t].model.get("variable"),o&&a.var_uid===o.var_uid&&(r=d[e].model.get("fieldsRelated"),r.push(d[t]),d[e].model.set("fieldsRelated",r)));if("form"===d[e].model.get("type"))for(u=d[e].getItems(),n=0;d.length>n;n+=1)if(a=d[n].model.get("variable"))for(i=0;u.length>i;i+=1)o=u[i].model.get("variable"),o&&a.var_uid===o.var_uid&&(s=d[n].model.get("fieldsRelated"),s.push(u[i]),d[n].model.set("fieldsRelated",s),l=u[i].model.get("fieldsRelated"),l.push(d[n]),u[i].model.set("fieldsRelated",l))}return this},getVariable:function(e){var t,n,i=this.model.attributes.variables;e:for(t=0;i.length>t;t+=1)if(i[t]&&i[t].var_uid===e){n=i[t];break e}return n},getFields:function(){return this.items.getSize()>0?this.items.asArray():[]},beforeRender:function(){return this},disableContextMenu:function(){return this.$el.on("contextmenu",function(e){e.preventDefault(),e.stopPropagation()}),this},onSubmit:function(e){var t,n,i;if(this.isValid(e)){for(i=this.items.asArray(),n=0;i.length>n;n+=1)i[n].applyStyleSuccess&&i[n].applyStyleSuccess();t=!0}else t=!1;return this.project.submitRest&&(e.preventDefault(),t&&this.project.onSubmitForm()),t},isValid:function(e){var t,n=!0,i=this.items.asArray();if(i.length>0)for(t=0;i.length>t;t+=1)if(i[t].validate)if(e)i[t].validate(e),i[t].model.get("valid")||(n=i[t].model.get("valid"));else if(i[t].validate(),n=i[t].model.get("valid"),!n)return!1;if(n)for(t=0;i.length>t;t+=1)void 0!==i[t].model.get("var_name")&&0===i[t].model.get("var_name").trim().length&&"radio"===i[t].model.get("type")&&i[t].$el.find("input").attr("name","");return n},render:function(){var e,t,n;for(e=0;this.viewsBuilt.length>e;e+=1){for(n=$(this.templateRow()),t=0;this.viewsBuilt[e].length>t;t+=1)n.append(this.viewsBuilt[e][t].render().el);this.$el.append(n)}return this.$el.attr("role","form"),this.$el.addClass("form-horizontal pmdynaform-form"),this.el.style.height="99%",this.setAction(),this.setMethod(),this.$el.attr("id",this.model.get("id")),this.model.get("target")&&this.$el.attr("target",this.model.get("target")),this.disableContextMenu(),this},afterRender:function(){var e,t=this.items.asArray();for(e=0;t.length>e;e+=1)t[e].afterRender&&t[e].afterRender();return this.model.attributes.data&&this.setData(this.model.get("data")),this}});PMDynaform.extendNamespace("PMDynaform.view.FormPanel",e)}(),function(){var e=Backbone.View.extend({tagName:"div",events:{"click .form-control":"onclickField"},initialize:function(e){e.project&&(this.project=e.project),this.setClassName().render()},setClassName:function(){return this},getData:function(){return this.updateValueControl&&this.updateValueControl(),this.model.getData()},enableTooltip:function(){return this.$el.find("[data-toggle=tooltip]").tooltip().click(function(){$(this).tooltip("toggle")}),this},applyStyleError:function(){return this.$el.addClass("has-error has-feedback"),this},applyStyleSuccess:function(){return this.$el.removeClass("has-error"),this.model.get("disabled")||this.$el.addClass("has-success"),this},changeValuesFieldsRelated:function(){return this.model.changeValuesFieldsRelated(),this},setValueToDomain:function(){var e=this.getHTMLControl();return e.length&&!this.model.attributes.disabled&&(this.validator&&(this.validator.$el.remove(),this.$el.removeClass("has-error")),this.model.isValid()||(this.validator=new PMDynaform.view.Validator({model:this.model.get("validator")}),e.parent().append(this.validator.el),this.applyStyleError())),this},on:function(e,t){var n=this,i=this.$el.find("input");if(!i)throw Error("Is not possible find the HTMLElement associated to field");return i.on(e,function(e){t(e,n),e.stopPropagation()}),this},getHTMLControl:function(){return this},render:function(){return this.$el.html(this.template(this.model.toJSON())),this.model.get("hint")&&this.enableTooltip(),this.setValueToDomain(),this},onclickField:function(){return console.log("click en field"),this},setLabel:function(e){if(void 0===this.model.attributes.label)throw Error("is not supported label property in "+this.model.get("type")+" field");return this.model.attributes.label=e,(this.el||this.$el.length)&&(this.$el.find("label").find("span[class='textlabel']").text(e),this.$el.find("h4").find("span[class='textlabel']").text(e),this.$el.find("h5").find("span[class='textlabel']").text(e)),this},getLabel:function(){if(void 0!==this.model.get("label"))return this.model.get("label");throw Error("is not supported label property in "+this.model.get("type")+" field")},setValue:function(e){return void 0!==this.model.attributes.value&&(this.model.set("clickedControl",!1),this.model.set("value",e),this.render(!0),this.model.get("validator")&&this.validate()),this},getInfo:function(){return this.model.toJSON()},getValue:function(){if(void 0!==this.model.get("value"))return this.model.get("value");throw Error("is not supported label property in "+this.model.get("type")+" field")},setHref:function(e){return this.model.set("href",e),this},getDataType:function(){return this.model.get("dataType")||null},getControlType:function(){},setNameHiddenControl:function(){var e;return this.el&&("grid"===this.model.get("group")?(e=this.$el.find("input[type = 'hidden']")[0],name=this.model.get("name"),name=name.substring(0,name.length-1).concat("_label]"),e.name=e.id="form"+name):this.$el.find("input[type='suggest']")[0].name="form["+this.model.get("name")+"_label]"),this},verifyData:function(){}});PMDynaform.extendNamespace("PMDynaform.view.Field",e)}(),function(){var e=PMDynaform.view.Field.extend({block:!0,template:_.template($("#tpl-grid").html()),templatePager:_.template($("#tpl-grid-pagination").html()),templateTotal:_.template($("#tpl-grid-totalcolumn").html()),colSpanLabel:3,colSpanControl:9,gridtable:[],flagRow:0,dom:[],row:[],cols:[],showPage:1,items:[],numberRest:0,rest:0,priority:{file:1,image:2,radio:3,checkbox:4,textarea:5,datetime:6,dropdown:7,text:8,button:9,link:10,defect:0},titleHeader:[],indexResponsive:"3%",removeResponsive:"3%",thereArePriority:0,onRemoveRowCallback:function(){},onAddRowCallback:function(){},onClickPageCallback:function(){},events:{"click .pmdynaform-grid-newitem":"onClickNew","click .pagination li":"onClickPage"},requireVariableByField:["text","textarea","checkbox","radio","dropdown","datetime","suggest","link","hidden","label"],factory:{},initialize:function(){var e,t={products:{text:{model:PMDynaform.model.Text,view:PMDynaform.view.Text},textarea:{model:PMDynaform.model.TextArea,view:PMDynaform.view.TextArea},checkbox:{model:PMDynaform.model.Checkbox,view:PMDynaform.view.Checkbox},radio:{model:PMDynaform.model.Radio,view:PMDynaform.view.Radio},dropdown:{model:PMDynaform.model.Dropdown,view:PMDynaform.view.Dropdown},button:{model:PMDynaform.model.Button,view:PMDynaform.view.Button},datetime:{model:PMDynaform.model.Datetime,view:PMDynaform.view.Datetime},suggest:{model:PMDynaform.model.Suggest,view:PMDynaform.view.Suggest},link:{model:PMDynaform.model.Link,view:PMDynaform.view.Link},file:{model:PMDynaform.model.File,view:PMDynaform.view.File},label:{model:PMDynaform.model.Label,view:PMDynaform.view.Label},hidden:{model:PMDynaform.model.Hidden,view:PMDynaform.view.Hidden}},defaultProduct:"text"},n=parseInt(this.model.get("rows"),10);for(this.items=[],this.row=[],this.dom=[],this.cols=[],this.showPage=1,this.gridtable=[],this.titleHeader=[],this.checkColSpanResponsive(),this.setFactory(t),this.buildColumns({executeInit:!0}),e=0;n>e;e+=1)this.addRow();this.model.attributes.titleHeader=this.titleHeader},buildColumns:function(){var e;return e=this.makeColumns({executeInit:!0}),this.model.attributes.dataColumns=e.model,this.model.attributes.totalRow=e.data,this.items=[],this.model.attributes.gridFunctions=[],this},onClickNew:function(){var e,t=this.model.get("rows");return this.block=!0,this.model.attributes.rows=parseInt(t+1,10),e=this.addRow(),this.renderGridTable(!0),this.onAddRowCallback(e,this),this},makeTitleHeader:function(e){var t,n="Nro";for(this.titleHeader.push(n),t=0;e.length>t;t+=1)this.titleHeader.push(e[t].title);return this},setTitleHeader:function(e){var t;for(t=0;e.length>t;t+=1)this.titleHeader.push(e[t]);return this},verifyPageNumber:function(){var e,t,n=this.model.get("rows"),i=this.model.get("pageSize"),a=this.showPage,o=this.$el.find(".pmdynaform-grid-tbody").children();if(o.length>0)for(e=0;o.length>e;e+=1)if(o[e].className.indexOf("active")>0){a=e+1;break}return t=Math.ceil(n/i)?Math.ceil(n/i):1,a>t&&(a-=1),this.showPage=a,this},addRow:function(){var e,t;return this.gridtable.length,t=this.model.get("data"),t&&this.gridtable.length<this.model.get("rows")?(t=t[this.gridtable.length+1],e=this.makeColumns({executeInit:!1},t)):e=this.makeColumns({executeInit:!1}),this.model.attributes.gridFunctions.push(e.data),this.gridtable.push(e.view),e},removeRow:function(e){var t,n=this.model.get("rows");return t=this.gridtable.splice(e,1),this.dom.splice(e,1),this.model.attributes.rows=parseInt(n-1,10),t},validateVariableField:function(e){var t=!1;return $.inArray(e.type,this.requireVariableByField)>=0?e.var_uid&&(t=!0):t="NOT",t},makeColumns:function(e,t){var n,i,a,o,r,s,l,u,d,c,h,f,p=this,m=this.model.get("columns"),t=(this.model.get("data"),t||[]),g=this.factory,v=(this.gridtable.length,[]),y=[],b=(this.gridtable.length,new PMDynaform.util.ArrayList);for(f=0;m.length>f;f+=1)r="",h=m[f],h.data=t[f],h.name=h.name,h.formula=h.formula,h.dependentFields=h.dependentFields,h.mode&&"parent"===h.mode&&(h.mode=this.model.get("mode")),"checkbox"!==h.originalType&&"checkbox"!==h.type||"view"!==h.mode||(h.mode="disabled"),h.executeInit=e.executeInit,c=new PMDynaform.core.TransformJSON({parentMode:this.model.get("parentMode"),field:h}),o=c.getJSON().type?g.products[c.getJSON().type.toLowerCase()]?g.products[c.getJSON().type.toLowerCase()]:g.products[g.defaultProduct]:g.products[g.defaultProduct],a=this.colSpanControlField(m,c.getJSON().type,f),u=this.validateVariableField(h),n={colSpanLabel:4,colSpanControl:"form"===this.model.get("layout")?8:a,colSpan:a,label:h.title,title:h.title,layout:this.model.get("layout"),width:"200px",project:this.model.get("project"),namespace:this.model.get("namespace"),mode:this.model.get("mode"),variable:"NOT"!==u?this.getVariable(h.var_uid):null,_extended:{name:h.name||PMDynaform.core.Utils.generateName("radio"),id:h.id||PMDynaform.core.Utils.generateID(),dependentFields:h.dependentFields,formula:h.formula||null},group:"grid",columnName:h.name||PMDynaform.core.Utils.generateName("radio"),originalType:h.type},jQuery.extend(!0,n,c.getJSON()),n.row=this.gridtable.length,n.col=f,("dropdown"==h.type||"suggest"==h.type)&&(n.options=h.options),l=new o.model(n),r=this.changeNameField(this.model.get("name"),this.gridtable.length+1,l.get("_extended").name),s=this.changeIdField(this.model.get("name"),this.gridtable.length+1,l.get("_extended").name),l.attributes.name=r,l.attributes.id=s,y.push(l),d=new o.view({model:l,project:this.project,parent:this}),d.model.get("operation")&&d.on("changeValues",function(){p.setValuesGridFunctions({row:this.model.attributes.row,col:this.model.attributes.col,data:this.model.attributes.value}),p.createHTMLTotal()}),b.insert(d),v.push(d),e.executeInit||(this.items.push(d),t.push(0));for(i=0;v.length>i;i+=1)v[i].parent={items:b,parent:this};return this.updateNameFields(v),{model:y,view:v,data:t}},setValuesGridFunctions:function(e){return this.model.attributes.functions&&(this.model.attributes.gridFunctions[e.row][e.col]=isNaN(parseFloat(e.data))?0:parseFloat(e.data),this.model.applyFunction()),this},getVariable:function(e){var t,n,i=this.model.attributes.variables;e:for(t=0;i.length>t;t+=1)if(i[t]&&i[t].var_uid===e){n=i[t];break e}return n},checkColSpanResponsive:function(){var e,t=this.model.get("columns"),n=0,i=this.model.get("layout");if("responsive"===i||"form"===i){if(this.numberRest=10%t.length,this.numberRest>0)for(e=0;t.length>e;e+=1)6>=this.priority[t[e].type]&&(n+=1);this.thereArePriority=n}return this},colSpanControlField:function(e,t,n){var i=e.length,a=(this.model.get("layout"),8);return this.numberRest>0?6>=this.priority[t]&&this.thereArePriority>0?(a=parseInt(10/i)+1,this.numberRest-=1,this.thereArePriority-=1):this.numberRest>=parseInt(i-n)?(a=parseInt(10/i)+1,this.numberRest-=1):a=parseInt(10/i):a=parseInt(10/i),a},colSpanControlFieldResponsive:function(e){var t,n=100;return t=parseInt(this.indexResponsive)+parseInt(this.removeResponsive),n=parseInt((n-t)/(e.length-this.model.get("countHiddenControl")))},changeIdField:function(e,t,n){return"["+e+"]["+t+"]["+n+"]"},changeNameField:function(e,t,n){return"["+e+"]["+t+"]["+n+"]"},updateNameFields:function(e){var t,n,i,a,o,r,s="",l=[];for(t=0;e.length>t;t+=1){if(l=[],r=e[t].model.get("dependentFields")){for(n=0;r.length>n;n+=1)for(o=r[n],i=0;e.length>i;i+=1)o===e[i].model.get("_extended").name&&0>$.inArray(o,l)&&l.push(e[i].model.get("name"));e[t].model.attributes.dependentFields=l}if(s=e[t].model.get("_extended").formula,"string"==typeof s)for(a=0;e.length>a;a+=1)t!==a&&(s=s.replace(RegExp(e[a].model.get("_extended").name,"g"),e[a].model.get("name")),e[t].model.attributes.formula=s,e[t].model.attributes.formulator.data=s)}return l},setFactory:function(e){return this.factory=e,this},validate:function(e){var t,n,i,a=[],o=!0,i=this.gridtable;for(t=0;i.length>t;t+=1)for(a=[],n=0;i[t].length>n;n+=1)i[t][n].validate&&(i[t][n].validate(e),i[t][n].model.get("valid")||(o=i[t][n].model.get("valid"),this.model.set("valid",o),o=!1));return this.model.set("valid",o),o},onRemoveRow:function(e){var t,n;return e&&(this.block=!0,t=$(e.target).data("row"),jQuery(this.dom[t]).remove(),n=this.removeRow(t),this.refreshButtonsGrid(),this.renderGridTable(),this.onRemoveRowCallback(n,this)),this},onClickPage:function(e){var t=($(e.currentTarget.children).data(),$(e.currentTarget).parent());return t.children().removeClass("active"),$(e.currentTarget).addClass("active"),this.onClickPageCallback(e,this),this},refreshButtonsGrid:function(){var e,t,n,i=this.dom;for(e=0;i.length>e;e+=1)$(i[e]).html(),t=this.createRowNumber(e+1),n=this.createRemoveButton(e),$(i[e].firstChild).replaceWith(t),$(i[e].lastChild).replaceWith(n);return this},createRowNumber:function(e){var t,n=document.createElement("div"),i=document.createElement("div"),a=document.createElement("div"),o=document.createElement("span"),r=document.createElement("label"),s=document.createElement("span"),l=document.createElement("div"),u=this.model.get("layout");return n.className="responsive"===u?"col-xs-1 col-sm-1 col-md-1 col-lg-1":"col-xs-12 col-sm-1 col-md-1 col-lg-1","responsive"===u&&(n.width=this.indexResponsive),r.className="hidden-lg hidden-md hidden-sm visible-xs control-label col-xs-4",s.innerHTML="Nro",r.appendChild(s),a.className="col-xs-4 col-sm-12 col-md-12 col-lg-12 pmdynaform-grid-label rowIndex",o.innerHTML=e,a.appendChild(o),"form"===u&&(l.appendChild(r),t=this.createRemoveButton(e-1),t.className="col-xs-1 visible-xs hidden-sm hidden-md hidden-lg remove-row-form",t.style.cssText="float: right; margin-right: 15%",l.appendChild(t)),l.appendChild(a),i.className="row form-group",i.appendChild(l),n.appendChild(i),n},createRemoveButton:function(e){var t,n,i=this,a=this.model.get("layout");return t=document.createElement("div"),t.className="form"===a?"pmdynaform-grid-removerow hidden-xs col-xs-1 col-sm-1 col-md-1 col-lg-1":"static"===a?"pmdynaform-grid-removerow-static":"col-xs-1 col-sm-1 col-md-1 col-lg-1",n=document.createElement("button"),n.className="glyphicon glyphicon-trash btn btn-danger btn-sm",n.setAttribute("data-row",e),$(n).data("row",e),$(n).on("click",function(e){i.onRemoveRow(e)}),t.appendChild(n),t},createHTMLTitle:function(){var e,t,n,i,a,o,r,s=this.model.get("layout");for(t=this.$el.find(".pmdynaform-grid-thead"),i=document.createElement("div"),o=document.createElement("span"),"static"===s?(t.addClass("pmdynaform-grid-thead-static"),i.className="pmdynaform-grid-field-static wildcard",i.style.minWidth="inherit"):i.className="col-xs-1 col-sm-1 col-md-1 col-lg-1 text-center wildcard","form"!==s&&(i.style.width=this.indexResponsive),i.appendChild(o),t.append(i),e=0;this.gridtable[0].length>e;e+=1)"hidden"!==this.gridtable[0][e].model.get("type")&&(a=this.gridtable[0][e].model.get("colSpan"),n=this.gridtable[0][e].model.get("title"),i=document.createElement("div"),o=document.createElement("span"),this.checkColSpanResponsive(),a=this.colSpanControlField(this.gridtable[0],this.gridtable[0][e].model.get("type"),e),i.className="form"===s?"hidden-xs col-xs-"+a+" col-sm-"+a+" col-md-"+a+" col-lg-"+a+" text-center":"static"===s?"pmdynaform-grid-field-static":"col-xs-"+a+" col-sm-"+a+" col-md-"+a+" col-lg-"+a+" text-center",o.innerHTML=n,o.style.fontWeight="bold",o.style.maginLeft="2px",$(o).css({"text-overflow":"ellipsis","white-space":"nowrap",overflow:"hidden",display:"inline-block",width:"80%","text-align":"center"}),"responsive"===s&&($(o).css({width:"70%"}),$(i).css({width:this.colSpanControlFieldResponsive(this.gridtable[0])+"%"})),this.gridtable[0][e].model.get("required")&&i.appendChild($("<span class='pmdynaform-field-required'>*</span>")[0]),r=document.createElement("span"),i.appendChild(o),this.gridtable[0][e].model.get("hint")&&this.gridtable[0][e].model.get("hint").trim().length&&(r=document.createElement("span"),r.className="glyphicon glyphicon-info-sign",r.setAttribute("data-toggle","tooltip"),r.setAttribute("data-container","body"),r.setAttribute("data-placement","bottom"),r.setAttribute("data-original-title",this.gridtable[0][e].model.get("hint")),r.style.float="right",6>this.model.get("columns").length&&("responsive"==s||"form"==s)?i.appendChild(r):"static"===s?i.appendChild(r):(o.setAttribute("data-toggle","tooltip"),o.setAttribute("data-container","body"),o.setAttribute("data-placement","bottom"),o.setAttribute("data-original-title",this.gridtable[0][e].model.get("hint")))),t.append(i));return this},createHTMLPager:function(){var e=this.templatePager({id:this.model.get("id"),paginationItems:this.model.get("paginationItems")}),t=this.$el.find(".pmdynaform-grid-pagination");return t.children().remove(),t.append(e),this},createHTMLTotal:function(){var e,t,n,i,a,o,r,s,l,u=this.model.get("totalrow"),d=this.model.get("layout"),c={sum:"&#8721;",avg:"&#935;",other:"&#989;"};if(u.length)for(t=this.$el.find(".pmdynaform-grid-functions"),t.children().remove(),i=document.createElement("div"),r=document.createElement("span"),"static"===d?t.addClass("pmdynaform-grid-thead-static"):i.className="col-xs-1 col-sm-1 col-md-1 col-lg-1 text-center",i.appendChild(r),t.append(i),"form"!==d&&(i.style.width=this.indexResponsive),e=0;this.gridtable[0].length>e;e+=1)o=this.gridtable[0][e].model.get("colSpan"),n=u[e]?u[e]:"",i=document.createElement("div"),r=document.createElement("span"),s=document.createElement("input"),s.style.width="100%",s.disabled=!0,"form"===d?(this.checkColSpanResponsive(),o=this.colSpanControlField(this.gridtable[0],this.gridtable[0][e].model.get("type"),e),i.className="col-xs-12 col-sm-"+o+" col-md-"+o+" col-lg-"+o):"static"===d?i.className="pmdynaform-grid-field-static":(i.style.width=this.colSpanControlFieldResponsive(this.gridtable[0])+"%",i.style.display="inline-block"),a=this.gridtable[0][e].model.attributes.operation,a?($(i).addClass("total"),l=c[a]?c[a]:c.other,r.innerHTML=l+": ",s.value=n,s.id=(a+"-"+this.model.get("name")+"-"+this.gridtable[0][e].model.get("columnName")).toLowerCase(),i.appendChild(r),i.appendChild(s)):(r.innerHTML="",s.value=""),t.append(i);return this},createHTMLContainer:function(){var e,t,n=this.$el.find(".pmdynaform-grid-tbody"),i=this.model.get("pageSize"),a=0,o=1;for(this.verifyPageNumber(),n.children().remove(),"static"===this.model.get("layout")&&n.addClass("pmdynaform-static"),e=0;this.dom.length>e;e+=1)a+=1,this.model.get("pager")?(this.block===!0?(t=document.createElement("div"),t.className="pmdynaform-grid-section_"+o,"static"===this.model.get("layout")&&(t.className+=" pmdynaform-static"),t=$(t)):t=this.$el.find(".pmdynaform-grid-section_"+o),o===this.showPage?t.addClass("item active"):t.addClass("item"),a===i?(this.block=!0,o+=1,a=0):this.block=!1,t.append(this.dom[e]),n.append(t)):n.append(this.dom[e]);return this},createHTMLFields:function(e){var t,n,i,a,o,r,s;for(t=document.createElement("div"),t.className="pmdynaform-grid-row row form-group show-grid","static"===this.model.get("layout")&&(t.className+=" pmdynaform-grid-static"),o=this.createRowNumber(e+1),$(o).addClass("index-row"),t.appendChild(o),i=0;this.gridtable[e].length>i;i+=1)s=this.gridtable[e][i].model.get("colSpan"),n=document.createElement("div"),"form"===this.model.get("layout")?"hidden"!==this.gridtable[e][i].model.get("type")?(this.checkColSpanResponsive(),s=this.colSpanControlField(this.gridtable[e],this.gridtable[e][i].model.get("type"),i),n.className="col-xs-12 col-sm-"+s+" col-md-"+s+" col-lg-"+s):jQuery(n).css({width:"0%",display:"inline-block"}):"static"===this.model.get("layout")?"hidden"!==this.gridtable[e][i].model.get("type")&&(n.className="pmdynaform-grid-field-static"):"hidden"!==this.gridtable[e][i].model.get("type")?(n.className="col-xs-"+s+" col-sm-"+s+" col-md-"+s+" col-lg-"+s,jQuery(n).css({width:this.colSpanControlFieldResponsive(this.gridtable[e])+"%",display:"inline-block"})):jQuery(n).css({width:"0%",display:"inline-block"}),r=this.gridtable[e][i].el.children.length?this.gridtable[e][i].el:this.gridtable[e][i].render().el,$(r).addClass("row form-group"),n.appendChild(r),t.appendChild(n);return"view"!==this.model.get("mode")&&"disabled"!==this.model.get("mode")&&this.model.get("deleteRow")&&(a=this.createRemoveButton(e),$(a).addClass("remove-row"),t.appendChild(a)),"responsive"===this.model.get("layout")&&(jQuery(o).css({width:this.indexResponsive}),jQuery(a).css({width:this.removeResponsive})),this.dom.push(t),t},setData:function(e){var t,n,i,a=e,o=this.gridtable;if("object"==typeof e)for(i in a)if(a.hasOwnProperty(i))for(t=0;o[0].length>t;t+=1)if(!_.isEmpty(o[0][t].model.attributes.variable)&&o[0][t].model.attributes.variable.var_name===i&&a[i]instanceof Array)for(n=0;o.length>n;n+=1)this.gridtable[n][t].model.get("formulator")||(o[n][t].model.set("value",a[i][n]),this.gridtable[n][t].onFieldAssociatedHandler&&this.gridtable[n][t].onFieldAssociatedHandler());return this},getData:function(){var e,t,n,i=[],a=[],o={name:this.model.get("name"),gridtable:[]};for(this.model.getData(),n=this.gridtable,e=0;n.length>e;e+=1){for(i=[],t=0;n[e].length>t;t+=1)"function"==typeof n[e][t].getData&&n[e][t]instanceof PMDynaform.view.Field&&i.push(n[e][t].getData());a.push(i)}return o.gridtable=a,o},renderGridTable:function(){var e;for(this.$el.find(".pmdynaform-grid-tbody"),this.dom=[],e=0;this.gridtable.length>e;e+=1)this.createHTMLFields(e);
return this.createHTMLContainer(),this.model.setPaginationItems(),this.createHTMLPager(),this.createHTMLTotal(),this},on:function(e,t){var n={remove:"setOnRemoveRowCallback",add:"setOnAddRowCallback",pager:"setOnClickPageCallback"};if(!n[e])throw Error("The event must be a valid event.\n The events available are remove, add and pager");return this[n[e]](t),this},setOnRemoveRowCallback:function(e){if("function"!=typeof e)throw Error("The callback must be a function");return this.onRemoveRowCallback=e,this},setOnAddRowCallback:function(e){if("function"!=typeof e)throw Error("The callback must be a function");return this.onAddRowCallback=e,this},setOnClickPageCallback:function(e){if("function"!=typeof e)throw Error("The callback must be a function");return this.onClickPageCallback=e,this},render:function(){var e,t;return this.$el.html(this.template(this.model.toJSON())),this.createHTMLTitle(),this.renderGridTable(),this.enableTooltip(),"static"===this.model.get("layout")&&(e=this.$el.find(".pmdynaform-grid-thead"),t=this.$el.find(".pmdynaform-grid-tbody"),t.css("overflow","auto"),t.scroll(function(n){e.scrollLeft(t.scrollLeft()),n.stopPropagation()})),this.model.get("addRow")||this.$el.find(".pmdynaform-grid-new").hide(),"responsive"===this.model.get("layout")&&$(window).resize(function(){{$(window).width()}}),this},afterRender:function(){},getData2:function(){var e,t,n,i,a,o;for(e={},t=this.gridtable,n=0;t.length>n;n+=1){for(e[n+1]={},a={},i=0;t[n].length>i;i+=1)"function"==typeof t[n][i].getData&&t[n][i]instanceof PMDynaform.view.Field&&(o=t[n][i].model.getData(),a[o.name]=o.value);e[n+1]=a}return e},setData2:function(e){var t,n,i,a,o,r,s,l,u,d,c,h,f,p;n=this.gridtable;for(t in e)for(parseInt(t,10)>this.gridtable.length&&(u=this.addRow(),this.renderGridTable(),this.onAddRowCallback(u,this)),i=n[parseInt(t,10)-1].length,a=0;i>a;a+=1){r=n[parseInt(t,10)-1][a],o=n[parseInt(t,10)-1][a].model,s=o.get("mode");for(l in e[t])if(o.get("columnName")===l){if("edit"===s||"disabled"===s)if("suggest"===o.get("type")){for(c=0;o.get("localOptions").length>c;c+=1)if(h=o.get("localOptions")[c].value,h===e[t][l]){d=o.get("localOptions")[c].label;break}if(d&&!d.length)for(c=0;o.get("options").length>c;c+=1)if(h=o.get("options")[c].value,h===e[t][l]){d=o.get("options")[c].label;break}$(r.el).find(":input").val(d),o.attributes.value=e[t][l]}else if("checkbox"===o.get("type")){if(f=o.get("options"),"boolean"===o.get("dataType"))e[o.get("name")]===f[0].value?(f[1].selected=!1,f[0].selected=!0):(delete f[0].selected,f[1].selected=!0,f[0].selected=!1);else for(p=0;f.length>p;p+=1)delete f[p].selected,e[t][l].indexOf(f[p])>-1&&(f[p].selected=!0);o.set("options",f),o.initControl(),o.set("value",[e[t][l]])}else o.set("value",e[t][l]);if("view"===s)if("checkbox"===o.get("originalType"))o.set("fullOptions",e[t][l]);else if("dropdown"===o.get("originalType")){for(d=[],c=0;o.get("localOptions").length>c;c+=1)if(h=o.get("localOptions")[c].value,h===e[t][l]){d.push(o.get("localOptions")[c].label),o.set("fullOptions",d);break}if(!d.length)for(c=0;o.get("options").length>c;c+=1)if(h=o.get("options")[c].value,h===e[t][l]){d.push(o.get("options")[c].label),o.set("fullOptions",d);break}}else d=[],d.push(e[t][l]),o.set("fullOptions",d)}}return this}});PMDynaform.extendNamespace("PMDynaform.view.GridPanel",e)}(),function(){var e=Backbone.View.extend({template:_.template($("#tpl-button").html()),events:{keydown:"preventEvents"},initialize:function(){this.model.on("change",this.render,this)},preventEvents:function(e){return 13===e.which&&(e.preventDefault(),e.stopPropagation()),this},on:function(e,t){var n=this;return $(this.$el.find("button")[0]).on(e,function(e){t(e,n),e.stopPropagation()}),this},render:function(){return this.$el.html(this.template(this.model.toJSON())),this}});PMDynaform.extendNamespace("PMDynaform.view.Button",e)}(),function(){var e=PMDynaform.view.Field.extend({events:{"change select":"continueDependentFields","blur select":"validate","keydown select":"preventEvents"},clicked:!1,firstLoad:!0,dirty:!1,previousValue:null,triggerCallback:!1,template:_.template($("#tpl-dropdown").html()),onChangeCallback:function(){},setOnChange:function(e){return"function"==typeof e&&(this.onChangeCallback=e),this},initialize:function(){this.model.on("change",this.checkBinding,this,{chage:!0})},checkBinding:function(e){var t=this.model.get("form");return this.model.get("options"),"function"==typeof this.onChangeCallback&&this.onChangeCallback(this.getValue(),this.previousValue),t&&t.onChangeCallback&&t.onChangeCallback(this.model.get("name"),this.model.get("value"),this.previousValue),this.clicked?this.$el.find("select").val(this.model.get("value")):this.render(),this.firstLoad&&(this.firstLoad=!1),this.onChange(e),this},preventEvents:function(e){return 13===e.which&&(e.preventDefault(),e.stopPropagation()),this},setValueDefault:function(){var e=$(this.el).find(":selected").val();void 0!=e?this.model.set("value",e):this.model.set("value","")},onChange:function(e){var t,n,i,a,o,r,s,l;if(!this.firstLoad){if(l=this.$el.find("input[type='hidden']"),s=this.$el.find("select"),l.length&&s.length&&this.model.get("value"))if($(s).find("option[value="+this.model.get("value")+"]")[0])r=$(s).find("option[value="+this.model.get("value")+"]")[0].textContent.trim(),l[0].value=r||"",this.model.set("data",{value:this.model.get("value"),label:r});else for(l.val(""),t=0;this.model.get("options").length>t;t+=1)if(this.model.get("value")===this.model.get("options")[t].value){l.val(this.model.get("options")[t].label);break}if(a=this.model.get("dependentFields")?this.model.get("dependentFields"):[],o=this.parent.items.asArray(),a.length>0)for(t=0;o.length>t;t+=1)for(n=0;a.length>n;n+=1)i=o[t].model.get("name"),a[n]===i&&e&&o[t].onDependentHandler&&(o[t].onDependentHandler(),o[t].render(),o[t].setValueDefault&&o[t].setValueDefault());this.clicked=!1}return this},createDependencies:function(){var e,t,n,i,a;if(i=this.model.get("dependentFields")?this.model.get("dependentFields"):[],a=this.parent.items.asArray(),i.length>0)for(e=0;a.length>e;e+=1)for(t=0;i.length>t;t+=1)n=a[e].model.get("name"),i[t]===n&&a[e].model.setDependencies&&a[e].model.setDependencies(this);return this},continueDependentFields:function(){var e,t;return this.previousValue=this.model.get("value"),this.clicked=!0,t=$(this.el).find(":selected").val(),e=void 0===t?"":t,this.model.set("value",e),this.changeValuesFieldsRelated(),this},onDependentHandler:function(){var e,t;return t=this.generateDataDependenField(),e=this.executeQuery(t),this.mergeOptions(e),this.firstLoad=!1,this},validate:function(){var e;return this.model.get("disabled")||(e=this.model.get("options").length>0?this.$el.find("select").val():"",this.model.set({value:e},{validate:!0}),this.validator&&(this.validator.$el.remove(),this.$el.removeClass("has-error")),this.model.isValid()||(this.validator=new PMDynaform.view.Validator({model:this.model.get("validator"),domain:!1}),this.$el.find("select").parent().append(this.validator.el),this.applyStyleError())),this},updateValueControl:function(){var e,t=this.$el.find("select").find("option");e:for(e=0;t.length>e;e+=1)if(t[e].selected){this.model.set("value",t[e].value);break e}return this},on:function(e,t){var n=this,i=this.$el.find("select");return i&&i.on(e,function(e){t(e,n),e.stopPropagation()}),this},getHTMLControl:function(){return this.$el.find("select")},render:function(){var e,t,n=this,i=this.model.get("dependenciesField");return this.createDependencies(),this.$el.html(this.template(this.model.toJSON())),"grid"===this.model.get("group")&&(e=this.$el.find("input[type = 'hidden']")[0],t=this.model.get("name"),t=t.substring(0,t.length-1).concat("_label]"),e.name=e.id="form"+t),this.model.get("hint")&&this.enableTooltip(),this.firstLoad&&(this.firstLoad&&this.model.attributes.dependenciesField.length?this.model.set("options",this.model.get("localOptions").concat([this.model.get("data")])):this.model.set("options",this.model.get("localOptions"))),this.setValueToDomain(),this.$el.find("select").mousedown(function(){var e,t,a,o,r,s={};if(i.length){if(n.firstLoad){if(!n.dirty){for(r=this.value,$(this).empty(),s=n.generateDataDependenField(),e=n.executeQuery(s),t=n.mergeOptions(e),o=0;t.length>o;o+=1)a=$("<option value="+t[o].value+">"+t[o].label+"</option>")[0],this.appendChild(a);""!==r&&(this.value=r),n.dirty=!0}n.firstLoad=!1}}else n.firstLoad=!1}),0===this.model.get("name").trim().length&&(this.$el.find("select").attr("name",""),this.$el.find("input[type='hidden']").attr("name","")),this},afterRender:function(){return this.continueDependentFields(),this},executeQuery:function(e){var t,n,i,a,o;return e.field_id=this.model.get("id"),e.dyn_uid=this.model.get("form").model.get("id"),i=this.model.get("project"),a=this.model.getEndpointVariable({type:"executeQuery",keys:{"{var_name}":this.model.get("var_name")||""}}),o=i.getFullURL(a),n=[],t=new PMDynaform.core.Proxy({url:o,method:"POST",data:e,keys:i.token,successCallback:function(e,t){n=t}}),n},mergeOptions:function(e){var t,n,i=[],a=[];for(t=0;e.length>t;t+=1)i.push({value:e[t].value,label:e[t].text});return a=this.model.get("localOptions"),this.model.set("remoteOptions",i),n=a.concat(i),n.length?(this.model.set("value",n[0].value),this.dirty?this.model.set("data",{value:"",label:""}):(this.model.set("data",{value:n[0].value,label:n[0].label}),this.model.get("validator")&&this.model.get("validator").set("valid",!0))):this.model.set("value",""),this.model.set("options",n),n},generateDataDependenField:function(){var e,t,n,i,a;for(t=this.model.get("dependenciesField"),e={},a=0;t.length>a;a+=1)n=t[a].model.get("name"),i="text"===t[a].model.get("type")?t[a].model.get("keyValue"):t[a].model.get("value"),e[n]=i;return e}});PMDynaform.extendNamespace("PMDynaform.view.Dropdown",e)}(),function(){var e=PMDynaform.view.Field.extend({clicked:!1,previousValue:null,template:_.template($("#tpl-radio").html()),events:{"click input":"onChange","blur input":"validate","keydown input":"preventEvents"},initialize:function(){this.model.on("change",this.checkBinding,this)},preventEvents:function(e){return 13===e.which&&(e.preventDefault(),e.stopPropagation()),this},onChangeCallback:function(){},setOnChange:function(e){return"function"==typeof e&&(this.onChangeCallback=e),this},checkBinding:function(){var e=this.model.get("form");return"function"==typeof this.onChangeCallback&&this.onChangeCallback(this.getValue(),this.previousValue),e&&e.onChangeCallback&&e.onChangeCallback(this.model.get("name"),this.model.get("value"),this.previousValue),this.clicked||this.render(),this},render:function(){return this.$el.html(this.template(this.model.toJSON())),this.model.get("hint")&&this.enableTooltip(),this.setValueToDomain(),this.previousValue=this.model.get("value"),0===this.model.get("name").trim().length&&(this.$el.find("input[type='radio']").attr("name",""),this.$el.find("input[type='hidden']").attr("name","")),this},validate:function(){return this.model.get("disabled")||(this.previousValue=this.model.get("value"),this.model.set({},{validate:!0}),this.validator&&(this.validator.$el.remove(),this.$el.removeClass("has-error has-feedback")),this.model.isValid()||(this.validator=new PMDynaform.view.Validator({model:this.model.get("validator")}),this.$el.find(".pmdynaform-control-radio-list").parent().append(this.validator.el),this.applyStyleError())),this.clicked=!1,this},updateValueControl:function(){var e,t=this.$el.find("input");for(e=0;t.length>e;e+=1)t[e].checked&&this.model.setItemClicked({value:t[e].value,checked:!0});return this},onChange:function(e){var t,n,i;if(this.clicked=!0,this.model.setItemClicked({value:e.target.value,checked:e.target.checked}),this.validate(),this.changeValuesFieldsRelated(),t=this.$el.find("input[type='hidden']"),n=this.$el.find("input[type='radio']"),t.length&&n.length&&this.model.get("value"))for(i=0;this.model.get("options").length>i;i+=1)if(this.model.get("options")[i].value===this.model.get("value")){t.val(this.model.get("options")[i].label);break}},getHTMLControl:function(){return this.$el.find(".pmdynaform-control-radio-list")}});PMDynaform.extendNamespace("PMDynaform.view.Radio",e)}(),function(){var e=Backbone.View.extend({template:_.template($("#tpl-submit").html()),events:{keydown:"preventEvents"},initialize:function(){this.model.on("change",this.render,this)},preventEvents:function(e){return 13===e.which&&(e.preventDefault(),e.stopPropagation()),this},on:function(e,t){var n=this,i=this.$el.find("button");return i&&i.on(e,function(e){t(e,n),e.stopPropagation()}),this},render:function(){return this.$el.html(this.template(this.model.toJSON())),this}});PMDynaform.extendNamespace("PMDynaform.view.Submit",e)}(),function(){var e=PMDynaform.view.Field.extend({template:_.template($("#tpl-textarea").html()),validator:null,keyPressed:!1,previousValue:"",events:{"blur textarea":"validate","keydown textarea":"refreshBinding"},onChangeCallback:function(){},setOnChange:function(e){return"function"==typeof e&&(this.onChangeCallback=e),this},initialize:function(){this.model.on("change",this.checkBinding,this)},refreshBinding:function(){return this.keyPressed=!0,this},checkBinding:function(){var e=this.model.get("form");this.model.get("operation")&&this.onChangeCallbackOperation(this),"function"==typeof this.onChangeCallback&&this.onChangeCallback(this.getValue(),this.previousValue),e&&e.onChangeCallback&&e.onChangeCallback(this.model.get("name"),this.model.get("value"),this.previousValue),this.keyPressed||this.render()},render:function(){var e,t;return this.$el.html(this.template(this.model.toJSON())),""!==this.model.get("hint")&&this.enableTooltip(),"grid"===this.model.get("group")&&(e=this.$el.find("input[type = 'hidden']")[0],t=this.model.get("name"),t=t.substring(0,t.length-1).concat("_label]"),e.name=e.id="form"+t),this.previousValue=this.model.get("value"),0===this.model.get("name").trim().length&&(this.$el.find("input[type='textarea']").attr("name",""),this.$el.find("input[type='hidden']").attr("name","")),this},validate:function(e){return e&&9===e.which&&0!==e.which&&(this.keyPressed=!0),this.model.get("disabled")||(this.model.set({value:this.$el.find("textarea").val()},{validate:!0}),this.$el.find("input").val(this.model.get("value")),this.validator&&(this.validator.$el.remove(),this.$el.removeClass("has-error")),this.model.isValid()||(this.validator=new PMDynaform.view.Validator({model:this.model.get("validator")}),this.$el.find("textarea").parent().append(this.validator.el),this.applyStyleError())),this.changeValuesFieldsRelated(),this.keyPressed=!1,this.previousValue=this.model.get("value"),this},updateValueControl:function(){var e=this.$el.find("textarea").val();return this.model.set("value",e),this},on:function(e,t){var n=this,i=this.$el.find("textarea");return i&&i.on(e,function(e){t(e,n),e.stopPropagation()}),this},getHTMLControl:function(){return this.$el.find("textarea")}});PMDynaform.extendNamespace("PMDynaform.view.TextArea",e)}(),function(){var e=PMDynaform.view.Field.extend({template:_.template($("#tpl-text").html()),validator:null,keyPressed:!1,fieldValid:[],previousValue:null,formulaFieldsAssociated:[],events:{"blur input":"validate","keydown input":"refreshBinding"},onChangeCallback:function(){},setOnChange:function(e){return"function"==typeof e&&(this.onChangeCallback=e),this},setOnChangeCallbackOperation:function(e){return"function"==typeof e&&(this.onChangeCallbackOperation=e),this},initialize:function(){this.formulaFieldsAssociated=[],this.model.on("change",this.checkBinding,this)},on:function(e,t){var n,i=this,a={changeValues:"setOnChangeCallbackOperation"};if(a[e])this[a[e]](t);else{if(n=this.$el.find("input"),!n)throw Error("Is not possible find the HTMLElement associated to field");n.on(e,function(e){t(e,i),e.stopPropagation()})}return this},checkBinding:function(e){var t,n=this.model.get("form");this.model.get("operation")&&this.onChangeCallbackOperation(this),"function"==typeof this.onChangeCallback&&this.onChangeCallback(this.getValue(),this.previousValue),n&&n.onChangeCallback&&n.onChangeCallback(this.model.get("name"),this.model.get("value"),this.previousValue),this.keyPressed?(t=this.findKeyValue(this.model.get("value"))||"",this.model.set("keyValue",t),this.onChange(e)):(this.render(),this.onChange(e))},findKeyValue:function(e){var t,n=this.model.get("options");for(t=0;n.length>t;t+=1)if(n[t].label===e)return n[t].value;return null},refreshBinding:function(e){return 13===e.which&&(e.preventDefault(),e.stopPropagation()),this.keyPressed=!0,this},onChange:function(){var e,t,n,i,a,o,r;if(this.previousValue=this.model.get("value"),!this.firstLoad){if(r=this.$el.find("input[type='hidden']"),r.length&&this.model.get("value")&&(o=this.model.get("value"),r.val(o||"")),i=this.model.get("dependentFields")?this.model.get("dependentFields"):[],a=this.parent.items.asArray(),i.length>0)for(e=0;a.length>e;e+=1)for(t=0;i.length>t;t+=1)n=a[e].model.get("name"),i[t]===n&&event&&a[e].onDependentHandler&&(a[e].onDependentHandler(),a[e].render());this.clicked=!1}return this},createDependencies:function(){var e,t,n,i,a;if(i=this.model.get("dependentFields")?this.model.get("dependentFields"):[],a=this.parent.items.asArray(),i.length>0)for(e=0;a.length>e;e+=1)for(t=0;i.length>t;t+=1)n=a[e].model.get("name"),i[t]===n&&a[e].model.setDependencies&&a[e].model.setDependencies(this);return this},continueDependentFields:function(e){var t;return this.model.set("clickedControl",!0),this.clicked=!0,this.keyPressed=!1,t=$(e.currentTarget).text(),$(this.el).find(":input[type='suggest']").val(t),this.model.set("value",$(e.currentTarget).find("span").data().value),this.containerList.remove(),this.stackRow=0,this.clicked=!1,this},onDependentHandler:function(){var e,t;return t=this.generateDataDependenField(),e=this.executeQuery(t),this.mergeOptions(e),this.firstLoad=!1,this},executeQuery:function(e){var t,n,i,a,o;return e.field_id=this.model.get("id"),e.dyn_uid=this.model.get("form").model.get("id"),i=this.model.get("project"),a=this.model.getEndpointVariable({type:"executeQuery",keys:{"{var_name}":this.model.get("var_name")||""}}),o=i.getFullURL(a),n=[],t=new PMDynaform.core.Proxy({url:o,method:"POST",data:e,keys:i.token,successCallback:function(e,t){n=t}}),n},mergeOptions:function(e){var t,n,i=[],a=[];for(t=0;e.length>t;t+=1)i.push({value:e[t].value,label:e[t].text});return a=this.model.get("localOptions"),this.model.set("remoteOptions",i),n=a.concat(i),this.model.attributes.options=n,n.length?this.model.set({keyValue:n[0].value,value:n[0].label}):this.model.set({keyValue:"",value:""}),n},generateDataDependenField:function(){var e,t,n,i,a;for(t=this.model.get("dependenciesField"),e={},a=0;t.length>a;a+=1)n=t[a].model.get("name"),i="text"===t[a].model.get("type")?t[a].model.get("keyValue"):t[a].model.get("value"),e[n]=i;return e},validate:function(e){var t,n,i,a;return this.keyPressed=!0,e&&9===e.which&&0!==e.which,this.model.get("disabled")||(t=this.$el.find("input"),this.model.get("mask")?(a=t.val(),n=t.cleanVal(),i=this.model.get("mask").length,a.length>i&&t.val(a.substring(0,i))):n=t.val(),this.onTextTransform(n),this.model.set({value:n},{validate:!0}),this.validator&&(this.validator.$el.remove(),this.$el.removeClass("has-error has-feedback")),this.model.isValid()||(this.validator=new PMDynaform.view.Validator({model:this.model.get("validator")}),t.parent().append(this.validator.el),this.applyStyleError())),this.onFieldAssociatedHandler(),this.changeValuesFieldsRelated(),this.keyPressed=!1,this.previousValue=this.model.get("value"),this},updateValueControl:function(){var e=this.$el.find("input").val();return this.model.set("value",e),this},onFieldAssociatedHandler:function(){var e,t=this.formulaFieldsAssociated;if(t.length>0)for(e=0;t.length>e;e+=1)t[e].model.get("formulator")instanceof PMDynaform.core.Formula&&(this.model.addFormulaTokenAssociated(t[e].model.get("formulator")),this.model.updateFormulaValueAssociated(t[e]));return this},onTextTransform:function(e){var t,n=this.model.get("textTransform"),i={upper:function(){return e.toUpperCase()},lower:function(){return e.toLowerCase()},none:function(){return e},capitalizePhrase:function(){return e.capitalize()},titleCase:function(){return e.charAt(0).toUpperCase()+e.slice(1)}};return n&&(t=i[n]?i[n]():i.none(),this.$el.find("input").val(t)),this},onFormula:function(){var e,t,n,i,a,o,r,s=this.parent.items,l=this,u={},d=[];for(e=s instanceof Array?s:s.asArray(),t=0;e.length>t;t+=1)e[t]instanceof PMDynaform.view.Text&&(u[e[t].model.get("id")]=e[t]);for(a={},n=this.model.get("formula"),i=n.split(/[\-(,|+*/\)]+/),r=0;i.length>r;r+=1)i[r]=i[r].trim();this.fieldValid=i.filter(function(e){var t=!1;return void 0!==u[e]&&-1===$.inArray(e,d)&&(d.push(e),t=!0),t});for(var o=0;this.fieldValid.length>o;o+=1)this.model.addFormulaFieldName(this.fieldValid[o]),u[this.fieldValid[o]].formulaFieldsAssociated.push(l);return this},getHTMLControl:function(){return this.$el.find("input")},render:function(){var e,t;return this.createDependencies(),this.$el.html(this.template(this.model.toJSON())),""!==this.model.get("hint")&&this.enableTooltip(),this.previousValue=this.model.get("value"),"grid"===this.model.get("group")&&(e=this.$el.find("input[type = 'hidden']")[0],t=this.model.get("name"),t=t.substring(0,t.length-1).concat("_label]"),e.name=e.id="form"+t,e.value=this.model.get("value")),this.model.get("formula")&&this.onFormula(),0===this.model.get("name").trim().length&&(this.$el.find("input[type='text']").attr("name",""),this.$el.find("input[type='hidden']").attr("name","")),this}});PMDynaform.extendNamespace("PMDynaform.view.Text",e)}(),function(){var e=PMDynaform.view.Field.extend({item:null,firstLoad:!0,isIE:!1,template:_.template($("#tpl-file").html()),events:{"click .pmdynaform-file-container .form-control":"onClickButton","click div[name='button-all'] .pmdynaform-file-buttonup":"onUploadAll","click div[name='button-all'] .pmdynaform-file-buttoncancel":"onCancelAll","click div[name='button-all'] .pmdynaform-file-buttonremove":"onRemoveAll"},initialize:function(){this.model.on("change",this.render,this)},onClickButton:function(e){return this.$el.find("input").trigger("click"),e.preventDefault(),e.stopPropagation(),this},onUploadAll:function(e){var t,n=this.model.get("items").length;for(this.$el.find("div[name='button-all'] .pmdynaform-file-buttonup").hide(),this.$el.find("div[name='button-all'] .pmdynaform-file-buttonremove").hide(),this.$el.find("div[name='button-all'] .pmdynaform-file-buttoncancel").show(),t=0;n>t;t+=1)this.model.uploadFile(t);return e.preventDefault(),e.stopPropagation(),this},onCancelAll:function(e){var t,n=this.model.get("items").length;for(this.$el.find("div[name='button-all'] .pmdynaform-file-buttonup").show(),this.$el.find("div[name='button-all'] .pmdynaform-file-buttonremove").show(),this.$el.find("div[name='button-all'] .pmdynaform-file-buttoncancel").hide(),t=0;n>t;t+=1)this.model.stopUploadFile(t);return e.preventDefault(),e.stopPropagation(),this},onRemoveAll:function(e){return this.model.set("items",[]),this.render(),e.preventDefault(),e.stopPropagation(),this},removeItem:function(e){var t=this.model.get("items"),n=$(e.target).data("index");return t.splice(n,1),this.model.set("items",t),this.render(),this},addNewItem:function(e,t){if(this.validate(e,t)){var n=this.model.get("items");n.push({event:e,file:t}),this.model.set("items",n),this.render(),n.length>0?this.$el.find(".pmdynaform-file-container div[name='button-all']").show():this.$el.find(".pmdynaform-file-container div[name='button-all']").hide()}return this},onUploadItem:function(e){var t=$(e.target).data("index");return this.model.uploadFile(t),this},onCancelUploadItem:function(){var e=$(event.target).data("index");return this.model.stopUploadFile(e),this},onToggleButtonUpload:function(e,t){var n,i,a=$(e.target).parent().parent(),o={up:{show:[".pmdynaform-file-buttonstop",".pmdynaform-file-buttoncancel"],hide:[".pmdynaform-file-buttonup",".pmdynaform-file-buttonremove"]},cancel:{show:[".pmdynaform-file-buttonup",".pmdynaform-file-buttonremove"],hide:[".pmdynaform-file-buttonstop",".pmdynaform-file-buttoncancel"]}};for(n=0;o[t].hide.length>n;n+=1)a.find(o[t].hide[n]).hide();for(i=0;o[t].show.length>i;i+=1)a.find(o[t].show[i]).show();return this},onClosePreview:function(){return this},onPreviewItem:function(e){var t,n,i,a,o,r,s=this,l=document.createElement("div"),u=document.createElement("div"),d=document.createElement("img"),c=$(e.target).data("index"),h=document.createElement("span");return h.className="glyphicon glyphicon-remove",h.title="Close",h.setAttribute("data-placement","bottom"),$(h).tooltip().click(function(){$(this).tooltip("toggle"),e.preventDefault(),e.stopPropagation()}),r=$(document.documentElement).height(),l.className="pmdynaform-file-shadow",l.style.height=r+"px",u.className="pmdynaform-file-preview-background",u.style.height=r+"px",u.setAttribute("contenteditable","true"),u.appendChild(h),t=this.model.get("items")[c].file,t.type.match(/image.*/)?(n=new FileReader,n.onloadend=function(){d.src=n.result},n.readAsDataURL(t)):t.type.match(/audio.*/)?(a=_.template($("#tpl-audio").html()),d=a({path:URL.createObjectURL(t),top:document.body.scrollTop+"px"})):t.type.match(/video.*/)&&(a=_.template($("#tpl-video").html()),d=a({path:URL.createObjectURL(t),top:document.body.scrollTop+"px"})),i=document.createElement("div"),o=document.createElement("p"),o.name="desc",o.appendChild(document.createTextNode(t.extra.nameNoExtension)),i.className="pmdynaform-file-preview-image",$(i).append(d),$(i).append(o),$(h).on("click",function(e){document.body.removeChild(l),document.body.removeChild(u),s.$el.parents(".pmdynaform-container").css("position",""),e.preventDefault(),e.stopPropagation()}),$(u).keyup(function(e){27===e.which&&(document.body.removeChild(l),document.body.removeChild(u),s.$el.parents(".pmdynaform-container").css("position",""),e.preventDefault(),e.stopPropagation())}),$(u).append(i),document.body.appendChild(l),document.body.appendChild(u),this.$el.parents(".pmdynaform-container").css("position","fixed"),this},renderFiles:function(){var e,t=this,n=this.model.get("items");for(e=0;n.length>e;e+=1)t.model.get("preview")?t.createBox(e,n[e].event,n[e].file):t.createListBox(e,n[e].event,n[e].file);return this},createButtonsHTML:function(e,t){var n=this,i=document.createElement("div"),a=document.createElement("div"),o=document.createElement("div"),r=document.createElement("div"),s=document.createElement("div"),l=document.createElement("button"),u=document.createElement("button"),d=document.createElement("button"),c=document.createElement("button");return i.className="btn-group btn-group-justified",a.className="pmdynaform-file-buttonup btn-group",o.className="pmdynaform-file-buttoncancel btn-group",o.style.display="none",r.className="pmdynaform-file-buttonremove btn-group",s.className="pmdynaform-file-buttonview btn-group",l.className="glyphicon glyphicon-upload btn btn-success btn-sm",u.className="glyphicon glyphicon-remove btn btn-danger btn-sm",d.className="glyphicon glyphicon-trash btn btn-danger btn-sm",c.className="glyphicon glyphicon-zoom-in btn btn-primary btn-sm",$(l).data("index",e),$(u).data("index",e),$(d).data("index",e),$(c).data("index",e),$(l).on("click",function(e){n.onToggleButtonUpload(e,"up"),n.onUploadItem(e),e.stopPropagation(),e.preventDefault()}),$(u).on("click",function(e){n.onToggleButtonUpload(e,"cancel"),n.onCancelUploadItem(e),e.stopPropagation(),e.preventDefault()}),$(d).on("click",function(e){n.removeItem(e),e.stopPropagation(),e.preventDefault()}),$(c).on("click",function(e){n.onPreviewItem(e),e.stopPropagation(),e.preventDefault()}),a.appendChild(l),o.appendChild(u),r.appendChild(d),s.appendChild(c),t.upload&&i.appendChild(a),t.cancel&&i.appendChild(o),t.preview&&i.appendChild(s),t.remove&&i.appendChild(r),i},createBox:function(e,t,n){var i,a=!0,o=Math.floor(1e5*Math.random()+3),r=(n.name,t.target.result),s=document.createElement("div"),l=document.createElement("div"),u=document.createElement("span"),d=document.createElement("div"),c=document.createElement("img"),h=document.createElement("span"),f=document.createElement("span"),p={video:{className:"pmdynaform-file-boxpreview-video",icon:"glyphicon glyphicon-facetime-video"},audio:{className:"pmdynaform-file-boxpreview-audio",icon:"glyphicon glyphicon-music"},file:{className:"pmdynaform-file-boxpreview-file",icon:"glyphicon glyphicon-book"}},m=n.extra.extension.toUpperCase();return s.id=o,s.className="pmdynaform-file-containerimage",l.className="pmdynaform-file-resizeimage",n.type.match(/image.*/)?(c.src=r,l.appendChild(c)):n.type.match(/audio.*/)?l.innerHTML='<div class="'+p.audio.className+" thumbnail "+p.audio.icon+'"><div>'+m+"</div></div>":n.type.match(/video.*/)?l.innerHTML='<div class="'+p.video.className+" thumbnail "+p.video.icon+'"><div>'+m+"</div></div>":(a=!1,l.innerHTML='<div class="'+p.file.className+" thumbnail "+p.file.icon+'"><div>'+m+"</div></div>"),h.className="pmdynaform-file-overlay",f.className="pmdynaform-file-updone",h.appendChild(f),l.appendChild(h),u.id=o,u.className="pmdynaform-file-preview",u.appendChild(l),d.id=o,d.className="pmdynaform-file-progress",d.innerHTML="<span></span>",s.appendChild(u),i=this.createButtonsHTML(e,{upload:!0,preview:a,cancel:!0,remove:!0}),s.appendChild(i),s.appendChild(d),this.$el.find(".pmdynaform-file-droparea").append(s),this},createListBox:function(e,t,n){var i,a=!0,o=(Math.floor(1e5*Math.random()+3),document.createElement("div")),r=document.createElement("div");return o.className="pmdynaform-file-listitem",n.type.match(/image.*/)||n.type.match(/audio.*/)||n.type.match(/video.*/)||(a=!1),i=this.createButtonsHTML(e,{upload:!0,preview:a,cancel:!0,remove:!0}),i.style.width="50%",r.className="pmdynaform-label-nowrap",r.innerHTML=n.name,o.appendChild(r),o.appendChild(i),this.$el.find(".pmdynaform-file-list").append(o),this},toggleButtonsAll:function(){return this},render:function(){var e,t,n,i,a,t,o=this;return this.$el.html(this.template(this.model.toJSON())),t=this.$el.find("input[type='file']"),a=o.$el.find("button[type='button']"),n=this.$el.find("input[type='hidden']"),e=this.$el.find(".pmdynaform-file-control")[0],this.model.get("hint")&&this.enableTooltip(),(-1!=navigator.userAgent.indexOf("MSIE")||-1!=navigator.userAgent.indexOf("Trident"))&&(t.css({visibility:"inherit",width:"100%"}),a.css({display:"none"}),this.isIE=!0),"grid"===this.model.get("group")?(i=this.model.get("name"),i=i.substring(0,i.length-1).concat("_label]"),n[0].name=n[0].id="form"+i):n[0].name=n[0].id="form["+this.model.get("name")+"_label]",n.val(JSON.stringify(this.model.get("data").label)),t.change(function(e){var t,i=e.target;i.value&&o.isValid(i)&&(t=i.files?i.files[0].name:i.value.split("\\")[2],o.$el.find("button[type='button']").text(t),o.model.get("data").label.length?-1===o.model.get("data").label.indexOf(t)&&(o.firstLoad?o.model.get("data").label.push(t):(o.model.get("data").label.splice(o.model.get("data").label.length-1),o.model.get("data").label.push(t))):o.model.get("data").label.push(t),n.val(JSON.stringify(o.model.get("data").label)),o.firstLoad=!1)}),this},isValid:function(e){var t,n,i,a,o=!1;return t=this.model.get("extensions"),e.files?e.files[0]&&(i=e.files[0].name.substring(e.files[0].name.lastIndexOf(".")+1),a=e.files[0].name):e.value.trim().length&&(i=e.value.split("\\")[2].substring(e.value.split("\\")[2].lastIndexOf(".")+1),a=e.value),n="kb"!==this.model.get("sizeUnity").toLowerCase()?1024*parseInt(this.model.get("size"),10):parseInt(this.model.get("size"),10),"*"===t?o=!0:this.model.get("extensions").indexOf(i)>-1?o=!0:(alert("The extension of the file is not supported for the field..."),o=!1),o&&e.files&&(e.files[0]&&n>=e.files[0].size/1024?o=!0:(alert('File "'+e.name+'" is too big. \n Max allowed size is '+n+" Kb."),o=!1)),o&&(this.model.set("value",a),this.validator&&(this.validator.$el.remove(),this.$el.removeClass("has-error has-feedback"))),o},validate:function(){var e=this.$el.find("input[type='file']")[0],t=!0;
return this.validator&&(this.validator.$el.remove(),this.$el.removeClass("has-error has-feedback")),this.model.isValid()?(t=!0,console.log("valido")):(this.validator=new PMDynaform.view.Validator({model:this.model.get("validator")}),$(e).parent().append(this.validator.el),this.isIE||(this.validator.el.style.top="-23px"),this.applyStyleError()),t}});PMDynaform.extendNamespace("PMDynaform.view.File",e)}(),function(){var e=PMDynaform.view.Field.extend({item:null,template:_.template($("#tpl-checkbox").html()),previousValue:null,events:{"click input":"onChange","blur input":"validate","keydown input":"preventEvents"},onChangeCallback:function(){},setOnChange:function(e){return"function"==typeof e&&(this.onChangeCallback=e),this},initialize:function(){this.model.on("change",this.checkBinding,this)},checkBinding:function(){var e=this.model.get("form");return"function"==typeof this.onChangeCallback&&this.onChangeCallback(JSON.stringify(this.getValue()),JSON.stringify(this.previousValue)),e&&e.onChangeCallback&&e.onChangeCallback(this.model.get("name"),JSON.stringify(this.model.get("value")),JSON.stringify(this.previousValue)),this.render(),this},preventEvents:function(e){return 13===e.which&&(e.preventDefault(),e.stopPropagation()),this},render:function(){var e,t;return this.$el.html(this.template(this.model.toJSON())),""!==this.model.get("hint")&&this.enableTooltip(),this.setValueToDomain(),"grid"===this.model.get("group")?(e=this.$el.find("input[type = 'hidden']")[0],t=this.model.get("name"),t=t.substring(0,t.length-1).concat("_label]"),e.name=e.id="form"+t):this.$el.find("input[type='hidden']")[0].name="form["+this.model.get("name")+"_label]",this.setValueHideControl(),this.previousValue=this.model.get("value"),0===this.model.get("name").trim().length&&(this.$el.find("input[type='checkbox']").attr("name",""),this.$el.find("input[type='hidden']").attr("name","")),this},validate:function(){return this.model.get("disabled")||(this.model.set({},{validate:!0}),this.validator&&(this.validator.$el.remove(),this.$el.removeClass("has-error has-feedback")),this.model.isValid()||(this.validator=new PMDynaform.view.Validator({model:this.model.get("validator")}),this.$el.find(".pmdynaform-control-checkbox-list").parent().append(this.validator.el),this.applyStyleError())),this},updateValueControl:function(){var e,t=this.$el.find("input");for(e=0;t.length>e;e+=1)t[e].checked&&this.model.setItemChecked({value:t[e].value,checked:!0});return this},onChange:function(e){var t,n={};this.previousValue=this.model.get("value"),$(e.target).val(),t=e.target.checked,this.$el.find("input[type='hidden']").val(JSON.stringify([])),"boolean"===this.model.get("dataType")?(t?(this.$el.find("input[type='checkbox']")[0].checked=!0,this.$el.find("input[type='checkbox']")[1].checked=!1,this.$el.find("input[type='hidden']").val(JSON.stringify([this.model.get("options")[0].value])),n.value=[this.model.get("options")[0].value],n.label=[this.model.get("options")[0].label]):(this.$el.find("input[type='checkbox']")[0].checked=!1,this.$el.find("input[type='checkbox']")[1].checked=!0,this.$el.find("input[type='hidden']").val(JSON.stringify([this.model.get("options")[1].label])),n.value=[this.model.get("options")[1].value],n.label=[this.model.get("options")[1].label]),this.model.attributes.data=n,this.model.setItemChecked({value:e.target.value,checked:t})):(this.model.setItemChecked({value:e.target.value,checked:t}),this.$el.find("input[type='hidden']").val(JSON.stringify(this.model.get("value"))),this.validate())},getHTMLControl:function(){return this.$el.find(".pmdynaform-control-checkbox-list")},setValueHideControl:function(){var e;return e=this.$el.find("input[type='hidden']"),"boolean"===this.model.get("dataType")?jQuery.isArray(this.model.get("data").value)?$(e).val(JSON.stringify(this.model.get("data").value)):$(e).val(this.model.get("data").value):$(e).val(JSON.stringify(this.model.get("data").value)),this}});PMDynaform.extendNamespace("PMDynaform.view.Checkbox",e)}(),function(){var e=PMDynaform.view.Field.extend({template:_.template($("#tpl-text").html()),templateList:_.template($("#tpl-suggest-list").html()),validator:null,elements:[],input:null,containerList:null,makeFlag:!1,keyPressed:!1,pointerItem:0,orientation:"under",stackItems:[],stackRow:0,clicked:!1,firstLoad:!0,dirty:!1,previousValue:"",events:{"click li":"continueDependentFields","keyup input":"validate","keydown input":"refreshBinding"},onChangeCallback:function(){},setOnChange:function(e){return"function"==typeof e&&(this.onChangeCallback=e),this},initialize:function(){this.model.on("change",this.checkBinding,this),this.containerList=$(this.templateList()),this.enableKeyUpEvent()},refreshBinding:function(e){return 13===e.which&&(e.preventDefault(),e.stopPropagation()),this.keyPressed=!0,this},checkBinding:function(e){var t=this.model.get("form");"function"==typeof this.onChangeCallback&&this.onChangeCallback(this.getValue(),this.previousValue),t&&t.onChangeCallback&&t.onChangeCallback(this.model.get("name"),this.model.get("value"),this.previousValue),this.keyPressed===!1&&this.clicked===!1&&(this.render(),this.updateValueInput()),this.clicked&&this.onChange(e)},updateValueInput:function(){var e;return e=this.$el.find("input[type='suggest']"),this.model.get("data")&&e.val(this.model.get("data").label),this},setValueDefault:function(){this.model.set("value",$(this.el).find(":input").val())},hideSuggest:function(){this.containerList.hide(),this.stackRow=0},showSuggest:function(){this.containerList.show()},_attachSuggestGlobalEvents:function(){this.containerList&&$(document).on("click."+this.$el,$.proxy(this.hideSuggest,this))},_detachSuggestGlobalEvents:function(){this.containerList||$(document).off("click."+this.$el)},onChange:function(e){var t,n,i,a,o,r,s;if(this.previousValue=this.model.get("value"),!this.firstLoad){if(s=this.$el.find("input[type='hidden']"),s.length&&this.model.get("value")&&(r=this.model.get("value"),s.val(r||"")),a=this.model.get("dependentFields")?this.model.get("dependentFields"):[],o=this.parent.items.asArray(),a.length>0)for(t=0;o.length>t;t+=1)for(n=0;a.length>n;n+=1)i=o[t].model.get("name"),a[n]===i&&e&&o[t].onDependentHandler&&(o[t].onDependentHandler(),o[t].render(),o[t].setValueDefault&&o[t].setValueDefault());this.clicked=!1}return this},createDependencies:function(){var e,t,n,i,a;if(i=this.model.get("dependentFields")?this.model.get("dependentFields"):[],a=this.parent.items.asArray(),i.length>0)for(e=0;a.length>e;e+=1)for(t=0;i.length>t;t+=1)n=a[e].model.get("name"),i[t]===n&&a[e].model.setDependencies&&a[e].model.setDependencies(this);return this},makeElements:function(e){var t,n,i=this,a=!1,o=0;this.input=this.$el.find("input[type='suggest']"),n=this.input.val(),this.elements=[],this.elements=this.model.get("options"),this._detachSuggestGlobalEvents(),this.showSuggest(),this.stackItems=[],null!==this.containerList&&this.containerList.empty(),""!==n?($.grep(i.elements,function(r){t=r.label,-1!==t.toLowerCase().indexOf(n.toLowerCase())&&e>o&&(i.updatingItemsList(r),a=!0,$(i.stackItems[i.stackRow]).addClass("pmdynaform-suggest-list-keyboard"),o+=1)}),a||i.hideSuggest()):this.hideSuggest()},updatingItemsList:function(e){var t=document.createElement("li"),n=document.createElement("span");return n.innerHTML=e.label,n.setAttribute("data-value",e.value),n.setAttribute("selected",!1),t.appendChild(n),t.className="list-group-item",this.stackItems.push(t),this.containerList.append(t),this.input.after(this.containerList),this.containerList.css("position","absolute"),this.containerList.css("zIndex",3),this.containerList.css("border-radius","5px"),this.stackItems.length>4?this.containerList.css("height","200px"):this.containerList.css("height","auto"),this._attachSuggestGlobalEvents(),this},continueDependentFields:function(e){var t;return this.model.set("clickedControl",!0),this.clicked=!0,this.keyPressed=!1,t=$(e.currentTarget).text(),$(this.el).find(":input[type='suggest']").val(t),this.model.set("value",$(e.currentTarget).find("span").data().value),this.containerList.remove(),this.stackRow=0,this.clicked=!1,this},validate:function(e){return e&&9===e.which&&0!==e.which&&(this.keyPressed=!0),this.model.get("disabled")||(e&&"submit"===e.type?(this.keyPressed=!0,this.model.set({value:this.$el.find("input[type='suggest']").val()},{validate:!0})):(this.model.attributes.value=this.$el.find("input[type='suggest']").val(),this.model.attributes.validator.set("valid",!0),this.model.validate(this.model.toJSON())),this.validator&&(this.validator.$el.remove(),this.$el.removeClass("has-error has-feedback")),this.model.isValid()||(this.validator=new PMDynaform.view.Validator({model:this.model.get("validator")}),this.$el.find("input[type='suggest']").parent().append(this.validator.el),this.applyStyleError())),this.keyPressed=!1,e&&"submit"!==e.type&&this.makeElements(10),this},getData:function(){return this.model.getData()},render:function(){var e,t,n=this;return this.createDependencies(),this.$el.html(this.template(this.model.toJSON())),""!==this.model.get("hint")&&this.enableTooltip(),e=this.model.get("data"),this.firstLoad?this.model.get("value")&&e?this.$el.find("input[type='suggest']").val(e.label?e.label:""):this.model.emptyValue():this.$el.find("input[type='suggest']").val(this.model.get("value")||""),this.setNameHiddenControl(),t=this.model.get("dependenciesField"),this.$el.find("input[type='suggest']").focusin(function(){var e,i={};n.clicked=!0,t.length?n.firstLoad&&(n.dirty||(i=n.generateDataDependenField(),e=n.executeQuery(i),n.mergeOptions(e),n.dirty=!0),n.firstLoad=!1):n.firstLoad=!1}),this.$el.find("input[type='suggest']").focus(),this.setValueToDomain(),0===this.model.get("name").trim().length&&(this.$el.find("input[type='suggest']").attr("name",""),this.$el.find("input[type='hidden']").attr("name","")),this},onDependentHandler:function(){var e,t;return t=this.generateDataDependenField(),e=this.executeQuery(t),this.mergeOptions(e),this.firstLoad=!1,this},executeQuery:function(e){var t,n,i,a,o;return e.field_id=this.model.get("id"),e.dyn_uid=this.model.get("form").model.get("id"),i=this.model.get("project"),a=this.model.getEndpointVariable({type:"executeQuery",keys:{"{var_name}":this.model.get("var_name")||""}}),o=i.getFullURL(a),n=[],t=new PMDynaform.core.Proxy({url:o,method:"POST",data:e,keys:i.token,successCallback:function(e,t){n=t}}),n},mergeOptions:function(e){var t,n,i=[],a=[];for(t=0;e.length>t;t+=1)i.push({value:e[t].value,label:e[t].text});return a=this.model.get("localOptions"),this.model.set("remoteOptions",i),n=a.concat(i),this.model.set("options",n),n},generateDataDependenField:function(){var e,t,n,i,a;for(t=this.model.get("dependenciesField"),e={},a=0;t.length>a;a+=1)n=t[a].model.get("name"),i="text"===t[a].model.get("type")?t[a].model.get("keyValue"):t[a].model.get("value"),e[n]=i;return e},toggleItemSelected:function(){return $(this.stackItems).removeClass("pmdynaform-suggest-list-keyboard"),$(this.stackItems[this.stackRow]).addClass("pmdynaform-suggest-list-keyboard"),this},enableKeyUpEvent:function(){var e,t=this;this.$el.keyup(function(n){t.stackItems.length>0&&(e=n.which,38===e&&(t.stackRow>0&&(t.stackRow-=1,t.toggleItemSelected()),t.containerList.scrollTop(-10*parseInt(t.stackRow+1))),40===e&&(t.stackRow<t.stackItems.length-1&&(t.stackRow+=1,t.toggleItemSelected()),t.containerList.scrollTop(10*parseInt(t.stackRow+1))),13===e&&t.continueDependentFields({currentTarget:$(n.currentTarget).find(".pmdynaform-suggest-list-keyboard")[0]}))})},updateValueControl:function(){var e=this.$el.find("input[type='suggest']").val();return this.model.set("value",e),this},getHTMLControl:function(){return this.$el.find("input[type='suggest']")},afterRender:function(){return this}});PMDynaform.extendNamespace("PMDynaform.view.Suggest",e)}(),function(){var e=PMDynaform.view.Field.extend({template:_.template($("#tpl-link").html()),validator:null,initialize:function(){this.model.on("change",this.render,this)}});PMDynaform.extendNamespace("PMDynaform.view.Link",e)}(),function(){var e=PMDynaform.view.Field.extend({template:_.template($("#tpl-label").html()),validator:null,initialize:function(){this.model.on("change",this.render,this)},render:function(){var e,t;return this.$el.html(this.template(this.model.toJSON())),"checkbox"===this.model.get("originalType")&&(this.$el.find("input[type='hidden']")[0].value=this.model.get("data").value,this.$el.find("input[type='hidden']")[1].value=JSON.stringify(JSON.parse(this.model.get("data").label))),"grid"===this.model.get("group")&&(e=this.$el.find("input[type = 'hidden']")[0],t=this.model.get("name"),t=t.substring(0,t.length-1).concat("]"),e.name=e.id="form"+t,e.name=e.id="form"+t,e=this.$el.find("input[type = 'hidden']")[1],t=this.model.get("name"),t=t.substring(0,t.length-1).concat("_label]"),e.name=e.id="form"+t),this}});PMDynaform.extendNamespace("PMDynaform.view.Label",e)}(),function(){var e=PMDynaform.view.Field.extend({template:null,validator:null,etiquete:{title:_.template($("#tpl-label-title").html()),subtitle:_.template($("#tpl-label-subtitle").html())},initialize:function(){var e=this.model.get("type");this.template=this.etiquete[e],this.model.on("change",this.render,this)},render:function(){return this.$el.html(this.template(this.model.toJSON())),this}});PMDynaform.extendNamespace("PMDynaform.view.Title",e)}(),function(){var e=Backbone.View.extend({item:null,template:_.template($("#tpl-empty").html()),render:function(){return this.$el.html(this.template(this.model.toJSON())),this}});PMDynaform.extendNamespace("PMDynaform.view.Empty",e)}(),function(){var e=PMDynaform.view.Field.extend({template:_.template($("#tpl-hidden").html()),render:function(e){var t,n={};return e&&(n.value=this.model.get("value"),n.label=this.model.get("value"),this.model.attributes.data=n),this.$el.html(this.template(this.model.toJSON())),"grid"===this.model.get("group")&&(t=this.$el.find("input[type = 'hidden']")[1],name=this.model.get("name"),name=name.substring(0,name.length-1).concat("_label]"),t.name=t.id="form"+name,t.value=this.model.get("value")),0===this.model.get("name").trim().length&&this.$el.find("input[type='hidden']").attr("name",""),this}});PMDynaform.extendNamespace("PMDynaform.view.Hidden",e)}(),function(){var e=PMDynaform.view.Field.extend({template:_.template($("#tpl-image").html()),events:{keydown:"preventEvents"},initialize:function(){this.model.on("change",this.render,this)},preventEvents:function(e){return 13===e.which&&(e.preventDefault(),e.stopPropagation()),this},render:function(){return this.$el.html(this.template(this.model.toJSON())),""!==this.model.get("hint")&&this.enableTooltip(),this}});PMDynaform.extendNamespace("PMDynaform.view.Image",e)}(),function(){var e=Backbone.View.extend({template:_.template($("#tpl-form").html()),formView:null,availableElements:null,parent:null,initialize:function(e){var t=["text","textarea","checkbox","radio","dropdown","button","datetime","fieldset","suggest","link","hidden","title","subtitle","label","empty","file","image","grid"];this.availableElements=t,e.project&&(this.project=e.project),this.checkItems(),this.makeSubForm()},checkItems:function(){var e,t,n=[],i=[],a=this.model.toJSON();if(a.items)for(e=0;a.items.length>e;e+=1){for(i=[],t=0;a.items[e].length>t;t+=1)$.inArray(a.items[e][t].type,this.availableElements)>=0&&i.push(a.items[e][t]);i.length>0&&n.push(i)}return a.items=n,this.model.set("modelForm",a),this},makeSubForm:function(){var e=new PMDynaform.model.FormPanel(this.model.get("modelForm"));return this.formView=new PMDynaform.view.FormPanel({model:e,project:this.project}),this},validate:function(){this.isValid()},getItems:function(){return this.formView.items.asArray()},isValid:function(){var e,t=!0,n=this.formView.items.asArray();if(n.length>0)for(e=0;n.length>e;e+=1)n[e].validate&&(n[e].validate(event),n[e].model.get("valid")||(t=n[e].model.get("valid")));return this.model.set("valid",t),t},setData:function(e){return this.formView.setData(e),this},getData:function(){var e,t,n,i;for(i=this.model.getData(),n=this.formView.items.asArray(),e=0;n.length>e;e+=1)"function"==typeof n[e].getData&&n[e]instanceof PMDynaform.view.Field&&(t=n[e].getData(),i.variables[t.name]=t.value);return i},render:function(){return this.$el.html(this.template(this.model.toJSON())),this.$el.find(".pmdynaform-field-form").append(this.formView.render().el),this}});PMDynaform.extendNamespace("PMDynaform.view.SubForm",e)}(),function(){var e=PMDynaform.view.Field.extend({template:_.template($("#tpl-map").html()),validator:null,events:{"click .pmdynaform-map-fullscreen button":"applyFullScreen"},initialize:function(){},onLoadGeoLocation:function(){return this.model.get("currentLocation")&&this.model.get("supportNavigator")?this.geoLocation():this.onLoadLocation(),this},geoLocation:function(){var e=this;return navigator.geolocation.getCurrentPosition(function(t){e.model.set("latitude",t.coords.latitude),e.model.set("longitude",t.coords.longitude),e.onLoadLocation()}),this},onLoadLocation:function(){var e,t,n,i,a=this,o=a.$el.find(".pmdynaform-map-canvas")[0];return e=new google.maps.LatLng(this.model.get("latitude"),this.model.get("longitude")),t={zoom:this.model.get("zoom"),center:e,panControl:this.model.get("panControl"),zoomControl:this.model.get("zoomControl"),scaleControl:this.model.get("scaleControl"),streetViewControl:this.model.get("streetViewControl"),overviewMapControl:this.model.get("overviewMapControl"),mapTypeControl:this.model.get("mapTypeControl"),navigationControlOptions:{style:google.maps.NavigationControlStyle.SMALL},mapTypeId:google.maps.MapTypeId.ROADMAP},n=new google.maps.Map(o,t),this.model.set("googlemap",n),i=new google.maps.Marker({position:e,map:n,draggable:this.model.get("dragMarker"),title:""}),google.maps.event.addListener(i,"dragend",function(e){a.model.set("latitude",e.latLng.lat().toFixed(a.model.get("decimals"))),a.model.set("longitude",e.latLng.lng().toFixed(a.model.get("decimals")))}),this.model.set("marker",i),this},applyFullScreen:function(){return this.fullscreen.supported?this.fullscreen.toggle():this.$el(".pmdynaform-map-fullscreen").hide(),this},render:function(){var e,t=this;return t.$el.html(t.template(t.model.toJSON())),e=t.$el.find(".pmdynaform-map-canvas"),this.onLoadGeoLocation(),this.model.get("fullscreen")&&(this.fullscreen=new PMDynaform.core.FullScreen({element:this.$el.find(".pmdynaform-map-canvas")[0],onReadyScreen:function(){setTimeout(function(){t.$el.find(".pmdynaform-map-canvas").css("height",$(window).height()+"px")},500)},onCancelScreen:function(){setTimeout(function(){t.$el.find(".pmdynaform-map-canvas").css("height","")},500)}})),this}});PMDynaform.extendNamespace("PMDynaform.view.GeoMap",e)}(),function(){var e=PMDynaform.view.Field.extend({validator:null,template:_.template($("#tpl-annotation").html()),initialize:function(){this.model.on("change",this.render,this)},render:function(){return this.$el.html(this.template(this.model.toJSON())),this}});PMDynaform.extendNamespace("PMDynaform.view.Annotation",e)}(),function(){var e=PMDynaform.view.Field.extend({template:_.template($("#tpl-datetime2").html()),validator:null,keyPressed:!1,previousValue:null,triggerCallback:!1,events:{"blur input":"validate","keydown input":"refreshBinding"},outFocus:!1,initialize:function(){this.model.on("change",this.checkBinding,this)},checkBinding:function(){var e=this.model.get("form");"function"==typeof this.onChangeCallback&&this.onChangeCallback(this.getValue(),this.previousValue),e&&e.onChangeCallback&&this.triggerCallback?(e.onChangeCallback(this.model.get("name"),this.model.get("value"),this.previousValue),this.triggerCallback=!1):this.triggerCallback=!0,this.keyPressed||this.render()},onChangeCallback:function(){},setOnChange:function(e){return"function"==typeof e&&(this.onChangeCallback=e),this},validate:function(e){return this.outFocus=e&&"focusout"==e.type?!0:!1,this.previousValue=this.model.get("value"),e&&9===e.which&&0!==e.which&&(this.keyPressed=!0),this.model.get("disabled")?itemsField[i].model.isValid():(this.model.set({value:this.$el.find("input").val()},{validate:!0}),this.validator&&(this.validator.$el.remove(),this.$el.removeClass("has-error")),this.model.isValid()||(this.validator=new PMDynaform.view.Validator({model:this.model.get("validator")}),this.$el.find(".datetime-container").append(this.validator.el),this.applyStyleError())),this},refreshBinding:function(e){return 13===e.which&&(e.preventDefault(),e.stopPropagation()),this.keyPressed=!0,this},render:function(e){var t={};if(!e){if(this.$el.html(this.template(this.model.toJSON())),""!==this.model.get("hint")&&this.enableTooltip(),this.outFocus)try{this.$el.find("#datetime-container-control").datetimepicker({format:this.model.get("format"),stepping:this.model.get("stepping"),minDate:this.model.get("minDate"),maxDate:this.model.get("maxDate"),useCurrent:this.model.get("useCurrent"),collapse:this.model.get("collapse"),defaultDate:this.model.get("defaultDate"),disabledDates:this.model.get("disabledDates"),sideBySide:this.model.get("sideBySide"),daysOfWeekDisabled:this.model.get("daysOfWeekDisabled"),calendarWeeks:this.model.get("calendarWeeks"),viewMode:this.model.get("viewMode"),toolbarPlacement:this.model.get("toolbarPlacement"),showClear:this.model.get("showClear"),widgetPositioning:this.model.get("widgetPositioning"),showTodayButton:!0})}catch(n){this.$el.find("#datetime-container-control").datetimepicker({format:this.model.get("format"),stepping:this.model.get("stepping"),useCurrent:this.model.get("useCurrent"),collapse:this.model.get("collapse"),defaultDate:this.model.get("defaultDate"),disabledDates:this.model.get("disabledDates"),sideBySide:this.model.get("sideBySide"),daysOfWeekDisabled:this.model.get("daysOfWeekDisabled"),calendarWeeks:this.model.get("calendarWeeks"),viewMode:this.model.get("viewMode"),toolbarPlacement:this.model.get("toolbarPlacement"),showClear:this.model.get("showClear"),widgetPositioning:this.model.get("widgetPositioning"),showTodayButton:!0})}else try{this.$el.find("#datetime-container-control").datetimepicker({format:this.model.get("format"),stepping:this.model.get("stepping"),minDate:this.model.get("minDate"),maxDate:this.model.get("maxDate"),useCurrent:this.model.get("useCurrent"),collapse:this.model.get("collapse"),defaultDate:!1,disabledDates:this.model.get("disabledDates"),sideBySide:this.model.get("sideBySide"),daysOfWeekDisabled:this.model.get("daysOfWeekDisabled"),calendarWeeks:this.model.get("calendarWeeks"),viewMode:this.model.get("viewMode"),toolbarPlacement:this.model.get("toolbarPlacement"),showClear:this.model.get("showClear"),widgetPositioning:this.model.get("widgetPositioning"),date:this.model.get("value"),showTodayButton:!0})}catch(n){this.$el.find("#datetime-container-control").datetimepicker({format:this.model.get("format"),stepping:this.model.get("stepping"),useCurrent:this.model.get("useCurrent"),collapse:this.model.get("collapse"),defaultDate:this.model.get("defaultDate"),disabledDates:this.model.get("disabledDates"),sideBySide:this.model.get("sideBySide"),daysOfWeekDisabled:this.model.get("daysOfWeekDisabled"),calendarWeeks:this.model.get("calendarWeeks"),viewMode:this.model.get("viewMode"),toolbarPlacement:this.model.get("toolbarPlacement"),showClear:this.model.get("showClear"),widgetPositioning:this.model.get("widgetPositioning"),date:this.model.get("value"),showTodayButton:!0})}this.model.attributes.value=this.$el.find("input[type='text']").val(),this.model.get("value").trim().length&&(t.value=this.formatData(this.model.get("value")),t.label=this.formatData(this.model.get("value")),this.model.attributes.data=t),this.model.get("value").trim().length&&this.$el.find("input[type='hidden']").val(this.model.get("data").value)}return 0===this.model.get("name").trim().length&&(this.$el.find("input[type='text']").attr("name",""),this.$el.find("input[type='hidden']").attr("name","")),this},formatData:function(e){e=e.replace(/-/g,"/");var t,n,i,a,o,r,s;return t=new Date(e),n=""+t.getFullYear(),i=""+(t.getMonth()+1),1==i.length&&(i="0"+i),a=""+t.getDate(),1==a.length&&(a="0"+a),o=""+t.getHours(),1==o.length&&(o="0"+o),r=""+t.getMinutes(),1==r.length&&(r="0"+r),s=""+t.getSeconds(),1==s.length&&(s="0"+s),n+"-"+i+"-"+a+" "+o+":"+r+":"+s}});PMDynaform.extendNamespace("PMDynaform.view.Datetime",e)}(),function(){var e=PMDynaform.view.Field.extend({item:null,template:_.template($("#tpl-ext-scannercode").html()),templatePlus:_.template($("#tpl-extfile-plus").html()),boxPlus:null,boxModal:null,boxBackground:null,viewsImages:[],imageOffLine:"geoMap.jpg",events:{"click button":"onClickButton"},initialize:function(){},onClickButton:function(e){var t;return t={idField:this.model.get("name")},"formslider-android"==navigator.userAgent&&JsInterface.getScannerCode(JSON.stringify(t)),"formslider-ios"==navigator.userAgent&&(this.model.attributes.project.setMemoryStack({data:t}),this.model.attributes.project.projectFlow.executeFakeIOS("scannercode")),e.preventDefault(),e.stopPropagation(),this},hideButton:function(){var e;e=this.$el.find("button"),e.hide()},showLabel:function(e){var t,n;n=this.$el.find("scanner").find(".pmdynaform-label-options"),t="<span>"+e+"</span>",n.append(t)},render:function(){return this.$el.html(this.template(this.model.toJSON())),this},setScannerCode:function(e){var t;t=this.model,t.addCode(e.data),this.showLabel(e.data)},setCodes:function(e){var t;t=this.model;for(var n=0;e.length>n;n++)this.showLabel(e[n]);t.set("codes",e)}});PMDynaform.extendNamespace("PMDynaform.view.Qrcode_mobile",e)}(),function(){var e=PMDynaform.view.Field.extend({item:null,template:_.template($("#tpl-ext-signature").html()),templatePlus:_.template($("#tpl-extfile-plus").html()),viewsImages:[],imageOffLine:"geoMap.jpg",events:{"click button":"onClickButton"},initialize:function(){},onClickButton:function(e){var t;return this.model.set("interactive",!0),t={idField:this.model.get("name")},"formslider-android"==navigator.userAgent&&JsInterface.getSignature(JSON.stringify(t)),"formslider-ios"==navigator.userAgent&&(this.model.attributes.project.setMemoryStack({data:t,source:"IOS"}),this.model.attributes.project.projectFlow.executeFakeIOS("signature")),e.preventDefault(),e.stopPropagation(),this},makeBase64Image:function(e){return"data:image/png;base64,"+e},createBox:function(e){var t,n,i,a,o,r;return n=e.filePath?e.filePath:this.makeBase64Image(e.base64),t=Math.floor(1e5*Math.random()+3),i=document.createElement("div"),a=document.createElement("div"),o=document.createElement("span"),r=document.createElement("div"),i.id=t,i.className="pmdynaform-file-containergeo",a.className="pmdynaform-file-resizeimage",a.innerHTML='<img src="'+n+'">',o.id=t,o.className="pmdynaform-file-preview",o.appendChild(a),i.appendChild(o),this.$el.find(".pmdynaform-ext-geo").prepend(i),this.hideButton(),this},hideButton:function(){var e;e=this.$el.find("button"),e.hide()},render:function(){var e,t;return this.$el.html(this.template(this.model.toJSON())),this.model.get("hint")&&this.enableTooltip(),e=this.$el.find(".pmdynaform-file-droparea-ext")[0],t=this.$el.find("input")[0],this},setFiles:function(e){for(var t=0;e.length>t;t++)this.createBox(e[t]),this.model.attributes.files.push(e[t])},setSignature:function(e){var t,n,i=[];for(t=0;e.length>t;t++)"string"==typeof e[t]?(n=this.model.remoteProxyData(e[t]),this.createBox(n),i.push(n)):(this.createBox(e[t]),i.push(e[t]));this.model.set("files",i)},changeID:function(e){for(var t,n,i=this.model.attributes.files,a=0;e.length>a;a++){t=e[a];for(var o=0;i.length>o;o++)n=i[o],"string"==typeof n&&t.idOld===n&&(n=t.idNew),"object"==typeof n&&t.idOld===n.id&&(n.id=t.idNew)}}});PMDynaform.extendNamespace("PMDynaform.view.Signature_mobile",e)}(),function(){var e=PMDynaform.view.Field.extend({item:null,template:_.template($("#tpl-extgeo").html()),templatePlus:_.template($("#tpl-extfile-plus").html()),boxPlus:null,boxModal:null,boxBackground:null,viewsImages:[],imageOffLine:"geoMap.jpg",events:{"click button":"onClickButton"},initialize:function(){},onClickButton:function(e){var t;return this.model.set("interactive",!0),t={idField:this.model.get("name"),interactive:!0},"formslider-android"==navigator.userAgent&&JsInterface.getGeoTag(JSON.stringify(t)),"formslider-ios"==navigator.userAgent&&(this.model.attributes.project.setMemoryStack({data:t,source:"IOS"}),this.model.attributes.project.projectFlow.executeFakeIOS("show-map")),e.preventDefault(),e.stopPropagation(),this},makeBase64Image:function(e){return"data:image/png;base64,"+e},createBox:function(e){var t,n,i,a,o,r;return e.base64&&(n=this.makeBase64Image(e.base64)),e.filePath&&(n=e.filePath),t=Math.floor(1e5*Math.random()+3),i=document.createElement("div"),a=document.createElement("div"),o=document.createElement("span"),r=document.createElement("div"),i.id=t,i.className="pmdynaform-file-containergeo",a.className="pmdynaform-file-resizeimage",a.innerHTML='<img src="'+n+'">',o.id=t,o.className="pmdynaform-file-preview",o.appendChild(a),i.appendChild(o),this.$el.find(".pmdynaform-ext-geo").prepend(i),this.hideButton(),this},hideButton:function(){var e;e=this.$el.find("button"),e.hide()},render:function(){var e,t;return this.$el.html(this.template(this.model.toJSON())),this.model.get("hint")&&this.enableTooltip(),e=this.$el.find(".pmdynaform-file-droparea-ext")[0],t=this.$el.find("input")[0],this},setLocation:function(e){var t,n,i={};t=this.model,t.set("geoData",e),this.model.get("interactive")&&null!=e&&(""==e.id||null==e.id?(i={location:{altitude:e.altitude,latitude:e.latitude,longitude:e.longitude}},n=t.remoteGenerateLocation(i),n?1==n.success&&(i.imageId=n.imageId,n=t.remoteProxyData(n),i.data=n.data,this.createBox(n),t.set("geoData",i)):this.createImageOffLine(e)):e.base64?this.createBox(e):(n=t.remoteProxyData(e.id),n.altitude=e.altitude,n.latitude=e.latitude,n.longitude=e.longitude,t.set("geoData",n),this.createBox(n)))},setLocationRFC:function(e){var t,n;t=this.model,t.set("geoData",e),e.data?this.createBox(n):(n=t.getImagesNetwork(e),this.createBox(n))},setLocationRFC:function(e){var t,n;t=this.model,t.set("geoData",e),e.data?this.createBox(n):(n=t.getImagesNetwork(e),this.createBox(n))},createImageOffLine:function(e){e.filePath=this.imageOffLine,this.createBox({filePath:this.imageOffLine})}});PMDynaform.extendNamespace("PMDynaform.view.GeoMobile",e)}(),function(){var e=PMDynaform.view.Field.extend({template:_.template($("#tpl-extfile").html()),templateAudio:_.template($("#tpl-extaudio").html()),templateVideo:_.template($("#tpl-extvideo").html()),templateMediaVideo:_.template($("#tpl-media-video").html()),templateMediaAudio:_.template($("#tpl-media-audio").html()),templateImage:_.template($("#tpl-extfile").html()),templatePlusImage:_.template($("#tpl-extfile-plus-image").html()),templatePlusAudio:_.template($("#tpl-extfile-plus-audio").html()),templatePlusVideo:_.template($("#tpl-extfile-plus-video").html()),boxPlus:null,viewsFiles:[],mediaVideos:[],events:{"click buttonImage":"onClickButtonMobile","click .pmdynaform-file-container .form-control":"onClickButton","click div[name='button-all'] .pmdynaform-file-buttonup":"onUploadAll","click div[name='button-all'] .pmdynaform-file-buttoncancel":"onCancelAll","click div[name='button-all'] .pmdynaform-file-buttonremove":"onRemoveAll"},initialize:function(){this.model.on("change",this.render,this)},onClickButtonMobile:function(e){var t;switch(t=this.model,t.get("type")){case"imageMobile":this.onClickButtonImage(e);break;case"audioMobile":this.onClickButtonAudio(e);break;case"videoMobile":this.onClickButtonVideo(e);break;default:this.$el.find("input").trigger("click")}return e.preventDefault(),e.stopPropagation(),this},onClickButtonImage:function(){var e;return e={idField:this.model.get("name"),type:"image"},"formslider-android"==navigator.userAgent&&JsInterface.getPicture(JSON.stringify(e)),"formslider-ios"==navigator.userAgent&&(this.model.attributes.project.setMemoryStack({data:e}),this.model.attributes.project.projectFlow.executeFakeIOS("upload-file")),this
},onClickButtonAudio:function(){var e;return e={idField:this.model.get("name"),type:"audio"},"formslider-android"==navigator.userAgent&&JsInterface.getAudio(JSON.stringify(e)),"formslider-ios"==navigator.userAgent&&(this.model.attributes.project.setMemoryStack({data:e}),this.model.attributes.project.projectFlow.executeFakeIOS("upload-file")),this},onClickButtonVideo:function(){var e;return e={idField:this.model.get("name"),type:"video"},"formslider-android"==navigator.userAgent&&JsInterface.getVideo(JSON.stringify(e)),"formslider-ios"==navigator.userAgent&&(this.model.attributes.project.setMemoryStack({data:e}),this.model.attributes.project.projectFlow.executeFakeIOS("upload-file")),this},validate:function(){var e=!0;return e},removeItem:function(e){var t=this.model.get("items"),n=$(e.target).data("index");return t.splice(n,1),this.model.set("items",t),this.render(),this},onClosePreview:function(){return this},onPreviewItem:function(e){var t,n,i=document.createElement("div"),a=document.createElement("div"),o=document.createElement("img"),r=$(e.target).data("index"),s=document.createElement("span");return s.className="glyphicon glyphicon-remove",s.title="close",$(s).tooltip().click(function(){$(this).tooltip("toggle")}),heightContainer=document.documentElement.clientHeight,i.className="pmdynaform-file-shadow",i.style.height=heightContainer+"px",a.className="pmdynaform-file-preview-image",a.style.height=heightContainer+"px",a.appendChild(s),$(a).on("click",function(){document.body.removeChild(i),document.body.removeChild(a)}),t=this.model.get("items")[r].file,n=new FileReader,n.onloadend=function(){o.src=n.result},t?n.readAsDataURL(t):o.src="",a.appendChild(o),document.body.appendChild(i),document.body.appendChild(a),this},renderFiles:function(){var e,t=this,n=this.model.get("items");for(e=0;n.length>e;e+=1)t.model.get("preview")?t.createBox(e,n[e].event,n[e].file):t.createListBox(e,n[e].event,n[e].file);return this},createButtonsHTML:function(e){var t=this,n=document.createElement("div"),i=document.createElement("div"),a=document.createElement("div"),o=document.createElement("div"),r=document.createElement("div");return buttonUp=document.createElement("button"),buttonCancel=document.createElement("button"),buttonRemove=document.createElement("button"),buttonView=document.createElement("button"),n.className="btn-group btn-group-justified",i.className="pmdynaform-file-buttonup btn-group",a.className="pmdynaform-file-buttoncancel btn-group",a.style.display="none",o.className="pmdynaform-file-buttonremove btn-group",r.className="pmdynaform-file-buttonview btn-group",buttonUp.className="glyphicon glyphicon-upload btn btn-success btn-sm",buttonCancel.className="glyphicon glyphicon-remove btn btn-danger btn-sm",buttonRemove.className="glyphicon glyphicon-trash btn btn-danger btn-sm",buttonView.className="glyphicon glyphicon-zoom-in btn btn-primary btn-sm",$(buttonUp).data("index",e),$(buttonCancel).data("index",e),$(buttonRemove).data("index",e),$(buttonView).data("index",e),$(buttonUp).on("click",function(e){t.onToggleButtonUpload(e,"up"),t.onUploadItem(e),e.stopPropagation(),e.preventDefault()}),$(buttonCancel).on("click",function(e){t.onToggleButtonUpload(e,"cancel"),t.onCancelUploadItem(e),e.stopPropagation(),e.preventDefault()}),$(buttonRemove).on("click",function(e){t.removeItem(e),e.stopPropagation(),e.preventDefault()}),$(buttonView).on("click",function(e){t.onPreviewItem(e),e.stopPropagation(),e.preventDefault()}),i.appendChild(buttonUp),a.appendChild(buttonCancel),o.appendChild(buttonRemove),r.appendChild(buttonView),n.appendChild(i),n.appendChild(a),n.appendChild(r),n.appendChild(o),n},createBox:function(e,t,n){var i,a=Math.floor(1e5*Math.random()+3),o=(n.name,t.target.result),r=document.createElement("div"),s=document.createElement("div"),l=document.createElement("span"),u=document.createElement("div"),d=document.createElement("img"),c=document.createElement("span"),h=document.createElement("span"),f={video:{"class":"pmdynaform-file-boxpreview-video",icon:"glyphicon glyphicon-facetime-video"},audio:{"class":"pmdynaform-file-boxpreview-audio",icon:"glyphicon glyphicon-music"},file:{"class":"pmdynaform-file-boxpreview-file",icon:"glyphicon glyphicon-book"}},p=n.name.split(/\./)[1].toUpperCase();return r.id=a,r.className="pmdynaform-file-containerimage",s.className="pmdynaform-file-resizeimage",n.type.match(/image.*/)?(d.src=o,s.appendChild(d)):s.innerHTML=n.type.match(/audio.*/)?'<div class="'+f.audio.class+" thumbnail "+f.audio.icon+'"><div>'+p+"</div></div>":n.type.match(/video.*/)?'<div class="'+f.video.class+" thumbnail "+f.video.icon+'"><div>'+p+"</div></div>":'<div class="'+f.file.class+" thumbnail "+f.file.icon+'"><div>'+p+"</div></div>",c.className="pmdynaform-file-overlay",h.className="pmdynaform-file-updone",c.appendChild(h),s.appendChild(c),l.id=a,l.className="pmdynaform-file-preview",l.appendChild(s),u.id=a,u.className="pmdynaform-file-progress",u.innerHTML="<span></span>",r.appendChild(l),i=this.createButtonsHTML(e),r.appendChild(i),r.appendChild(u),this.$el.find(".pmdynaform-file-droparea").append(r),this},toggleButtonsAll:function(){return this},render:function(){var e,t=this;return this.createBoxPlus(),this.$el.html(this.template(this.model.toJSON())),this.model.get("hint")&&this.enableTooltip(),this.renderFiles(),this.toggleButtonsAll(),e={dragClass:"pmdynaform-file-active",dnd:this.model.get("dnd"),on:{load:function(e,n){t.addNewItem(e,n)}}},this.$el.find(".pmdynaform-file-droparea-ext")[0],this.$el.find(".pmdynaform-file-droparea-ext").append(this.boxPlus),this.$el.find("input")[0],this.model.get("dnd")||this.model.get("preview"),this},renderFile:function(){var e;switch(e=this.model,e.get("type")){case"imageMobile":this.renderImage();break;case"audioMobile":this.renderAudio();break;case"videoMobile":this.renderVideo();break;default:this.renderDefault()}},renderImage:function(){},createBoxImage:function(e){var t,n,i=Math.floor(1e5*Math.random()+3);return e.filePath&&(t=e.filePath,n=t),e.base64&&(t=e.base64,n=this.model.makeBase64Image(t)),template=document.createElement("div"),resizeImage=document.createElement("div"),preview=document.createElement("span"),progress=document.createElement("div"),template.id=i,template.className="pmdynaform-file-containerimage",resizeImage.className="pmdynaform-file-resizeimage",resizeImage.innerHTML='<img class="pmdynaform-image-ext" src="'+n+'"><span class="pmdynaform-file-overlay"><span class="pmdynaform-file-updone"></span></span>',preview.id=i,preview.className="pmdynaform-file-preview",preview.appendChild(resizeImage),progress.id=i,progress.className="pmdynaform-file-progress",progress.innerHTML="<span></span>",template.appendChild(preview),template.setAttribute("data-toggle","modal"),template.setAttribute("data-target","#myModal"),this.viewsFiles.push({id:e.id,data:template}),this.$el.find(".pmdynaform-file-droparea-ext").prepend(template),this},renderAudio:function(){},createBoxAudio:function(e){var t,n,i,a;return t={id:Math.floor(1e5*Math.random()+3),src:e.filePath?e.filePath:e,extension:e.extension?e.extension:null,name:e.name},i=this.templateMediaAudio(t),a=new PMDynaform.core.MediaElement({el:$(i),type:"audio"}),n=$(this.templateAudio(t)),n.find(".pmdynaform-file-resizevideo").append(a.$el),this.$el.find(".pmdynaform-file-droparea-ext").prepend(n),this.viewsFiles.push({id:e.id,data:n}),this},renderVideo:function(){},createBoxVideo:function(e){var t,n,i,a;return t={id:Math.floor(1e5*Math.random()+3),src:e.filePath?e.filePath:e,name:e.name},i=this.templateMediaVideo(t),a=new PMDynaform.core.MediaElement({el:$(i),type:"video",streaming:e.filePath?!1:!0}),n=$(this.templateVideo(t)),n.find(".pmdynaform-file-resizevideo").append(a.$el),this.$el.find(".pmdynaform-file-droparea-ext").prepend(n),this.viewsFiles.push({id:e.id,data:n}),this},renderDefault:function(){},setFilesRFC:function(e){var t;switch(t=this.model,t.get("type")){case"imageMobile":this.loadMixingSourceImages(e);break;case"audioMobile":this.loadMixingSourceMedia(e);break;case"videoMobile":this.loadMixingSourceMedia(e);break;default:}},loadMixingSourceImages:function(e){for(var t,n=[],i=0;e.length>i;i++)item=e[i],item.filePath?(this.validateFiles(item),this.model.attributes.files.push(item)):n.push(item);if(0!=n.length&&(t=this.model.remoteProxyData(n)))for(var i=0;t.length>i;i++)this.validateFiles(t[i]),this.model.attributes.files.push(t[i])},loadMixingSourceMedia:function(e){for(var t,n=0;e.length>n;n++)item=e[n],"string"==typeof item&&(t=this.model.urlFileStreaming(item),this.validateFiles(t),this.model.attributes.files.push(t)),item.filePath&&(this.validateFiles(item),this.model.attributes.files.push(item))},setFiles:function(e){for(var t=0;e.length>t;t++)this.validateFiles(e[t]),this.model.attributes.files.push(e[t])},validateFiles:function(e){return this.createBoxFile(e),this},createBoxFile:function(e){var t;switch(t=this.model,t.get("type")){case"imageMobile":this.createBoxImage(e);break;case"audioMobile":this.createBoxAudio(e);break;case"videoMobile":this.createBoxVideo(e);break;default:}},createBoxPlus:function(){var e;switch(e=this.model,e.get("type")){case"imageMobile":this.boxPlus=$(this.templatePlusImage());break;case"audioMobile":this.boxPlus=$(this.templatePlusAudio());break;case"videoMobile":this.boxPlus=$(this.templatePlusVideo());break;default:}return this},changeID:function(e){for(var t,n,i=this.model.attributes.files,a=0;e.length>a;a++){t=e[a];for(var o=0;i.length>o;o++)n=i[o],"string"==typeof n&&t.idOld===n&&(n=t.idNew),"object"==typeof n&&t.idOld===n.id&&(n.id=t.idNew)}}});PMDynaform.extendNamespace("PMDynaform.view.FileMobile",e)}(),function(){var e=Backbone.Model.extend({defaults:{message:{},title:"",type:"",dataType:"",value:"",valid:!0,maxLength:null,required:!1,domain:!1,options:[],factory:{},valueDomain:null,regExp:null,haveOptions:["suggest","checkbox","radio","dropdown"]},initialize:function(){var e={text:"requiredText",checkbox:"requiredCheckBox",radio:"requiredRadioGroup",dropdown:"requiredDropDown",textarea:"requiredText",datetime:"requiredText",suggest:"requiredText",file:"requiredFile"};this.setFactory(e),this.checkDomainProperty()},setFactory:function(e){return this.set("factory",e),this},checkDomainProperty:function(){return this.attributes.domain=$.inArray(this.get("type"),this.get("haveOptions"))>=0?!0:!1,this},verifyValue:function(){var e,t=this.get("value"),n=(this.get("valueDomain"),this.get("options"),this.attributes.factory[this.get("type").toLowerCase()]);return this.set("valid",!0),delete this.get("message")[n],this.get("required")&&PMDynaform.core.Validators[n].fn(t)===!1?(this.set("valid",!1),this.set("message",{validator:PMDynaform.core.Validators[n].message}),this):""!==this.get("dataType")&&""!==t&&PMDynaform.core.Validators[this.get("dataType")]&&PMDynaform.core.Validators[this.get("dataType")].fn(t)===!1?(this.set("valid",!1),this.set("message",{validator:PMDynaform.core.Validators[this.get("dataType")].message}),this):(this.get("maxLength")&&PMDynaform.core.Validators.maxLength.fn(t,parseInt(this.get("maxLength")))===!1&&(this.set("valid",!1),this.set("message",{validator:PMDynaform.core.Validators.maxLength.message+" "+this.get("maxLength")+" characters"})),this.get("regExp")&&"any"!==this.get("regExp").validate&&(e=RegExp(this.get("regExp").validate),!e.test(t))?(this.set("valid",!1),this.set("message",{validator:this.get("regExp").message}),this):void 0)}});PMDynaform.extendNamespace("PMDynaform.model.Validator",e)}(),function(){var e=Backbone.Model.extend({defaults:{items:[],mode:"edit",namespace:"pmdynaform",id:PMDynaform.core.Utils.generateID(),name:PMDynaform.core.Utils.generateName("form"),type:"form"},getData:function(){return{type:this.get("type"),name:this.get("name"),variables:{}}}});PMDynaform.extendNamespace("PMDynaform.model.Panel",e)}(),function(){var e=Backbone.Model.extend({defaults:{action:"",autocomplete:"on",script:{},data:[],items:[],name:"PMDynaform-form",method:"get",namespace:"pmdynaform",target:null,type:"panel"},getData:function(){return{type:this.get("type"),action:this.get("action"),method:this.get("method")}}});PMDynaform.extendNamespace("PMDynaform.model.FormPanel",e)}(),function(){var e=Backbone.Model.extend({defaults:{colSpan:12,id:PMDynaform.core.Utils.generateID(),label:"Untitled",name:PMDynaform.core.Utils.generateName(),value:"",nameGridColum:null},initialize:function(){this.set("label",this.checkHTMLtags(this.get("label"))),this.set("defaultValue",this.checkHTMLtags(this.get("defaultValue")))},getData:function(){return{name:this.get("name")?this.get("name"):"",value:this.get("value")}},parseLabel:function(){var e,t,n=this.get("label"),i=this.get("maxLengthLabel"),a=!1;for(e=n.split(/\s/g),t=0;e.length>t;t+=1)e[t].length>i&&(a=!0);return a&&(this.set("tooltipLabel",n),this.set("label",n.substr(0,i-4)+"...")),this},checkHTMLtags:function(e){var t=e;return"string"==typeof e&&(null!==e.match(/([\<])([^\>]{1,})*([\>])/i)&&(e=e.replace(/</g,"&lt;"),t=e.replace(/>/g,"&gt;")),/\"|\'/g.test(t)&&(t=t.replace(/"/g,"&quot;"),t=t.replace(/'/g,"&#39;"))),t},validate:function(e){return this.set("value",this.checkHTMLtags(e.value)),this.set("label",this.checkHTMLtags(e.label)),this},getEndpointVariable:function(e){var t,n,i,a=this.get("project");if(a.endPointsPath[e.type]){i=a.endPointsPath[e.type];for(n in e.keys)e.keys.hasOwnProperty(n)&&(t=i.replace(RegExp(n,"g"),e.keys[n]))}return t},onChangeLabel:function(e){return this.attributes.label=this.checkHTMLtags(e.attributes.label),this},onChangeValue:function(e){var t={};return this.attributes.value=this.checkHTMLtags(e.attributes.value),this.attributes.options&&(this.get("validator").set({valueDomain:this.get("value"),options:this.get("options")||[]}),this.get("validator").verifyValue()),this.get("data")&&(t.value=this.get("value"),t.label=this.get("value"),this.attributes.data=t),this},onChangeOptions:function(){var e,t=[],n=this.get("options");for(e=0;n.length>e;e+=1)t.push(this.checkHTMLtags(n[e]));return this.attributes.options=t,this},changeValuesFieldsRelated:function(){var e,t=this.get("value"),n=this.get("fieldsRelated")||[];for(e=0;n.length>e;e+=1)n[e].model.attributes.value=t,n[e].model.get("validator").set({valueDomain:this.get("value"),options:n[e].model.attributes.options||[],domain:!0}),n[e].model.get("validator").verifyValue(),n[e].render();return this}});PMDynaform.extendNamespace("PMDynaform.model.Field",e)}(),function(){var e=PMDynaform.model.Field.extend({defaults:{title:"Grid",colSpan:12,colSpanLabel:3,colSpanControl:9,namespace:"pmdynaform",columns:[],data:[],disabled:!1,id:PMDynaform.core.Utils.generateID(),name:PMDynaform.core.Utils.generateName("grid"),gridtable:[],layoutOpt:["responsive","static","form"],layout:"responsive",pager:!0,paginationItems:1,pageSize:5,mode:"edit",rows:1,type:"grid",functions:!1,totalrow:[],functionOptions:{sum:"sumValues",avg:"avgValues"},dataColumns:[],gridFunctions:[],titleHeader:[],valid:!0,countHiddenControl:0,newRow:!0,deleteRow:!0},initialize:function(e){var t;void 0===e.addRow&&this.set("addRow",!0),void 0===e.deleteRow&&this.set("deleteRow",!0),jQuery.isNumeric(this.get("pageSize"))?(t=parseInt(this.get("pageSize"),10),1>t&&(t=1,this.set("pager",!1))):this.set("pager",!1),this.set("pageSize",t),this.set("label",this.checkHTMLtags(this.get("label"))),this.on("change:label",this.onChangeLabel,this),e.project&&(this.project=e.project),this.fixCoutFieldsHidden(),this.setLayoutGrid(),this.setPaginationItems(),this.checkTotalRow()},setLayoutGrid:function(){return 0>$.inArray(this.get("layout"),this.get("layoutOpt"))&&this.set("layout","responsive"),this},setPaginationItems:function(){var e,t=this.get("rows"),n=this.get("pageSize");return e=Math.ceil(t/n)?Math.ceil(t/n):1,this.set("paginationItems",e),this},checkTotalRow:function(){var e;e:for(e=0;this.attributes.columns.length>e;e+=1)if(this.attributes.columns[e].operation&&this.attributes.functionOptions[this.attributes.columns[e].operation.toLowerCase()]){this.attributes.functions=!0;break e}return this},applyFunction:function(){var e;for(e=0;this.attributes.columns.length>e;e+=1)this.attributes.columns[e].operation&&this.attributes.functionOptions[this.attributes.columns[e].operation.toLowerCase()]&&(this.attributes.totalrow[e]=this[this.attributes.functionOptions[this.attributes.columns[e].operation.toLowerCase()]](e));return this},sumValues:function(e){var t,n=0,i=this.attributes.gridFunctions;for(t=0;i.length>t;t+=1)n+=i[t][e];return n},avgValues:function(e){var t,n=0,i=this.attributes.gridFunctions;for(t=0;i.length>t;t+=1)n+=i[t][e];return Math.round(100*(n/i.length))/100},getData:function(){return{type:this.get("type"),name:this.get("name"),gridtable:null}},fixCoutFieldsHidden:function(){var e,t=0;for(e=0;this.get("columns").length>e;e+=1)"hidden"===this.get("columns")[e].type&&(t+=1);return this.set("countHiddenControl",t),this}});PMDynaform.extendNamespace("PMDynaform.model.GridPanel",e)}(),function(){var e=Backbone.Model.extend({defaults:{colSpan:12,disabled:!1,namespace:"pmdynaform",id:PMDynaform.core.Utils.generateID(),name:PMDynaform.core.Utils.generateName("button"),label:"untitled label",type:"button"}});PMDynaform.extendNamespace("PMDynaform.model.Button",e)}(),function(){var e=PMDynaform.model.Field.extend({defaults:{colSpan:12,colSpanLabel:3,colSpanControl:9,namespace:"pmdynaform",dataType:"string",defaultValue:"",dependenciesField:[],disabled:!1,executeInit:!0,group:"form",hint:"",id:PMDynaform.core.Utils.generateID(),name:PMDynaform.core.Utils.generateName("dropdown"),label:"untitled label",localOptions:[],mode:"edit",options:[{label:"Empty",value:"empty"}],remoteOptions:[],required:!1,type:"text",valid:!0,validator:null,variable:null,var_uid:null,var_name:null,variableInfo:{},value:"",columnName:null,originalType:null,data:null,itemClicked:!1},initialize:function(){var e;this.set("label",this.checkHTMLtags(this.get("label"))),this.on("change:label",this.onChangeLabel,this),this.on("change:value",this.onChangeValue,this),this.on("change:options",this.onChangeOptions,this),this.set("validator",new PMDynaform.model.Validator({domain:!0})),this.set("dependenciesField",[]),this.setLocalOptions(),this.setDefaultValue(),e=this.get("data"),e?this.set("value",e.value):this.get("options").length?(this.set("value",this.get("options")[0].value),this.set("data",{value:this.get("options")[0].value,label:this.get("options")[0].label})):(this.set("data",{value:"",label:""}),this.set("value","")),0===this.get("var_name").trim().length&&(this.attributes.name="form"===this.get("group")?"":this.get("id"))},getData:function(){return"grid"==this.get("group")?{name:this.get("columnName")?this.get("columnName"):"",value:this.get("value")}:{name:this.get("name")?this.get("name"):"",value:this.get("value")}},setDefaultValue:function(){var e=this.get("options"),t=this.get("defaultValue");return $.inArray(t.trim(),["",null,void 0])>0&&(this.set("defaultValue",e[0].value),this.set("value",e[0].value)),this},setLocalOptions:function(){return this.set("localOptions",this.get("options")),this},setDependencies:function(e){var t;t=this.get("dependenciesField"),-1===t.indexOf(e)&&t.push(e),this.set("dependenciesField",t)},isValid:function(){return this.set("valid",this.get("validator").get("valid")),this.get("valid")},validate:function(e){var t=e.value.trim();return this.attributes.value=t,this.get("validator").set("type",e.type),this.get("validator").set("required",e.required),this.get("validator").set("value",t),this.get("validator").set("dataType",e.dataType),this.get("validator").verifyValue(),this.isValid(),this.get("valid")},onChangeValue:function(e){var t,n,i={};if(this.attributes.value=this.checkHTMLtags(e.attributes.value),this.attributes.options&&(this.get("validator").set({valueDomain:this.get("value"),options:this.get("options")||[]}),this.get("validator").verifyValue()),!this.itemClicked){for(n=this.get("options"),t=0;n.length>t;t+=1)if(n[t].value===this.get("value")){i.value=n[t].value,i.label=n[t].label;break}this.attributes.data=i}return this.itemClicked=!1,this}});PMDynaform.extendNamespace("PMDynaform.model.Dropdown",e)}(),function(){var e=PMDynaform.model.Field.extend({defaults:{colSpan:12,colSpanLabel:3,colSpanControl:9,namespace:"pmdynaform",id:PMDynaform.core.Utils.generateID(),name:PMDynaform.core.Utils.generateName("radio"),dataType:"string",dependenciesField:[],disabled:!1,defaultValue:"",label:"",localOptions:[],group:"form",hint:"",options:[{label:"empty",value:"empty"}],mode:"edit",type:"radio",readonly:!1,remoteOptions:[],required:!1,validator:null,valid:!0,variable:null,var_uid:null,var_name:null,variableInfo:{},value:"",columnName:null,originalType:null,data:null,itemClicked:!1},initialize:function(){var e;this.set("label",this.checkHTMLtags(this.get("label"))),this.on("change:label",this.onChangeLabel,this),this.on("change:value",this.onChangeValue,this),this.on("change:options",this.onChangeOptions,this),this.set("validator",new PMDynaform.model.Validator({domain:!0})),this.set("dependenciesField",[]),this.verifyControl(),this.initControl(),this.setLocalOptions(),e=this.get("data"),e?this.set("value",e.value):this.get("options").length?(this.set("value",this.get("options")[0].value),this.set("data",{value:this.get("options")[0].value,label:this.get("options")[0].label})):(this.set("data",{value:"",label:""}),this.set("value","")),"form"===this.get("group")?0===this.get("var_name").trim().length&&(this.attributes.name=this.get("id")):this.attributes.name=this.get("id")},initControl:function(){var e,t=this.get("options"),n=[],i=[];for(this.get("defaultValue")&&this.set("value",this.get("defaultValue")),e=0;t.length>e;e+=1){if(!t[e].label)throw Error("The label parameter is necessary for the field");t[e].value||(t[e].value=t[e].label),t[e].selected&&i.push(""+t[e].value),n.push({label:this.checkHTMLtags(t[e].label),value:this.checkHTMLtags(t[e].value),selected:t[e]?t[e]:!1})}this.set("options",n),this.set("selected",i)},setLocalOptions:function(){return this.set("localOptions",this.get("options")),this},isValid:function(){return this.set("valid",this.get("validator").get("valid")),this.get("valid")},verifyControl:function(){var e,t=this.get("options");for(e=0;t.length>e;e+=1){if(!t[e].label)throw Error("The label parameter is necessary for the field");t[e].value=t[e].value||"number"==typeof t[e].value?""+t[e].value:t[e].label}this.set("value",""+this.get("value"))},validate:function(e){return this.get("validator").set("type",e.type),this.get("validator").set("value",e.value.length),this.get("validator").set("valueDomain",e.value),this.get("validator").set("required",e.required),this.get("validator").set("dataType",e.dataType),this.get("validator").verifyValue(),this.isValid(),this.get("valid")},setItemClicked:function(e){var t,n=this.get("options");if(this.get("selected"),this.itemClicked=!0,n)for(t=0;n.length>t;t+=1)""+n[t].value==""+e.value&&this.set("value",""+e.value);return this},getData:function(){return"grid"==this.get("group")?{name:this.get("columnName")?this.get("columnName"):"",value:this.get("value")}:{name:this.get("name")?this.get("name"):"",value:this.get("value")}},onChangeValue:function(e){var t,n,i={};if(this.attributes.value=this.checkHTMLtags(e.attributes.value),this.attributes.options&&(this.get("validator").set({valueDomain:this.get("value"),options:this.get("options")||[]}),this.get("validator").verifyValue()),!this.itemClicked){for(n=this.get("options"),t=0;n.length>t;t+=1)if(n[t].value===this.get("value")){i.value=n[t].value,i.label=n[t].label;break}this.attributes.data=i}return this.itemClicked=!1,this}});PMDynaform.extendNamespace("PMDynaform.model.Radio",e)}(),function(){var e=PMDynaform.model.Field.extend({defaults:{type:"submit",namespace:"pmdynaform",placeholder:"untitled",label:"untitled label",id:PMDynaform.core.Utils.generateID(),name:PMDynaform.core.Utils.generateName("submit"),disabled:!1,colSpan:12}});PMDynaform.extendNamespace("PMDynaform.model.Submit",e)}(),function(){var e=PMDynaform.model.Field.extend({defaults:{type:"text",placeholder:"untitled",label:"untitled label",id:PMDynaform.core.Utils.generateID(),name:PMDynaform.core.Utils.generateName("textarea"),colSpan:12,value:"",defaultValue:"",colSpanLabel:3,colSpanControl:9,namespace:"pmdynaform",maxLengthLabel:15,rows:2,group:"form",dataType:"string",hint:"",disabled:!1,maxLength:null,mode:"edit",required:!1,validator:null,valid:!0,columnName:null,originalType:null,options:[],data:null,localOptions:[],remoteOptions:[]},getData:function(){return"grid"==this.get("group")?{name:this.get("columnName")?this.get("columnName"):"",value:this.get("value")}:{name:this.get("name")?this.get("name"):"",value:this.get("value")}},initialize:function(){var e;this.set("label",this.checkHTMLtags(this.get("label"))),this.set("defaultValue",this.checkHTMLtags(this.get("defaultValue"))),this.on("change:label",this.onChangeLabel,this),this.on("change:value",this.onChangeValue,this),this.set("validator",new PMDynaform.model.Validator({type:this.get("type"),required:this.get("required"),maxLength:this.get("maxLength"),dataType:this.get("dataType")||"string",regExp:{validate:this.get("validate"),message:this.get("validateMessage")}})),e=this.get("data"),e?this.set("value",e.label):(this.set("data",{value:"",label:""}),this.set("value","")),this.initControl(),0===this.get("var_name").trim().length&&(this.attributes.name="form"===this.get("group")?"":this.get("id"))},initControl:function(){this.get("defaultValue")&&this.set("value",this.get("defaultValue"))},isValid:function(){return this.set("valid",this.get("validator").get("valid")),this.get("valid")},validate:function(e){var t=e.value.trim();return this.set("value",t),this.get("validator").set("value",t),this.get("validator").verifyValue(),this.isValid(),this.get("valid")}});PMDynaform.extendNamespace("PMDynaform.model.TextArea",e)}(),function(){var e=PMDynaform.model.Field.extend({defaults:{type:"text",placeholder:"",label:"untitled label",id:PMDynaform.core.Utils.generateID(),name:PMDynaform.core.Utils.generateName("text"),colSpan:12,colSpanLabel:3,colSpanControl:9,maxLengthLabel:15,namespace:"pmdynaform",operation:null,tooltipLabel:"",value:"",group:"form",defaultValue:"",dataType:"string",hint:"",mask:"",disabled:!1,maxLength:null,mode:"edit",autoComplete:"off",required:!1,formulator:null,validator:null,textTransform:"",valid:!0,variable:null,var_uid:null,var_name:null,columnName:null,originalType:null,data:null,localOptions:[],options:[{label:"Empty",value:"empty"}],keyValue:null,remoteOptions:[],dependenciesField:[]},initialize:function(){var e;this.set("dataType",this.get("dataType").trim().length?this.get("dataType"):"string"),this.on("change:label",this.onChangeLabel,this),this.on("change:options",this.onChangeOptions,this),this.on("change:value",this.onChangeValue,this),this.on("change:value",this.onChangeData,this),this.set("label",this.checkHTMLtags(this.get("label"))),this.set("defaultValue",this.checkHTMLtags(this.get("defaultValue"))),this.set("validator",new PMDynaform.model.Validator({type:this.get("type"),required:this.get("required"),maxLength:this.get("maxLength"),dataType:this.get("dataType")||"string",regExp:{validate:this.get("validate"),message:this.get("validateMessage")}})),this.set("dependenciesField",[]),e=this.get("data"),e?this.set("value",e.label):(this.set("data",{value:"",label:""}),this.set("value","")),this.initControl(),0===this.get("var_name").trim().length&&(this.attributes.name="form"===this.get("group")?"":this.get("id"))},onChangeData:function(){},initControl:function(){this.get("defaultValue")&&this.set("value",this.get("defaultValue")),"string"==typeof this.get("formula")&&"undefined"!==this.get("formula")&&"null"!==this.get("formula")&&this.get("formula").length>1&&(this.set("formulator",new PMDynaform.core.Formula(this.get("formula"))),this.set("disabled",!0))},addFormulaTokenAssociated:function(e){return e instanceof PMDynaform.core.Formula&&e.addTokenValue(this.get("id"),this.get("value")),this},setDependencies:function(e){var t;t=this.get("dependenciesField"),-1===t.indexOf(e)&&t.push(e),this.set("dependenciesField",t)},addFormulaFieldName:function(e){return this.get("formulator").addField("field",e),this},updateFormulaValueAssociated:function(e){var t=e.model.get("formulator").evaluate();return e.model.set("value",t),this},isValid:function(){return this.attributes.valid=this.get("validator").get("valid"),this.get("valid")},validate:function(e){var t=e.value.trim();return this.set("value",t),this.get("validator").set("value",t),this.get("validator").verifyValue(),this.isValid(),this.get("valid")},getData:function(){return"grid"==this.get("group")?{name:this.get("columnName")?this.get("columnName"):"",value:this.get("value")}:{name:this.get("name")?this.get("name"):"",value:this.get("value")}},getData2:function(){var e,t,n={};return e=this.get("variable")?this.get("variable").var_name:this.get("name"),t=this.get("value"),n[e]=t,n}});PMDynaform.extendNamespace("PMDynaform.model.Text",e)}(),function(){var e=PMDynaform.model.Field.extend({defaults:{autoUpload:!1,camera:!0,colSpan:12,colSpanLabel:3,colSpanControl:9,namespace:"pmdynaform",defaultValue:"",disabled:!1,dnd:!1,dndMessage:"Drag or choose local files",extensions:"pdf, png, jpg, mp3, doc, txt",group:"form",height:"200px",hint:"",id:PMDynaform.core.Utils.generateID(),items:[],label:"Untitled label",labelButton:"Choose Files",mode:"edit",multiple:!1,name:PMDynaform.core.Utils.generateName("file"),preview:!1,required:!1,size:1,type:"file",proxy:[],valid:!0,validator:null,value:"",columnName:null,originalType:null,data:null},initialize:function(){var e;return this.set("label",this.checkHTMLtags(this.get("label"))),this.set("defaultValue",this.checkHTMLtags(this.get("defaultValue"))),this.on("change:label",this.onChangeLabel,this),this.initControl(),this.set("items",[]),this.set("proxy",[]),this.set("validator",new PMDynaform.model.Validator({type:"file",required:this.get("required")})),e=this.get("data"),e&&"object"==typeof e&&"grid"!==this.get("group")?(jQuery.isArray(e.value)||(e.value=JSON.parse(e.value)),e.label=!jQuery.isArray(e.label)&&e.value.length?JSON.parse(e.label):[],this.set("data",e)):this.set("data",{value:[],label:[]}),this},initControl:function(){return this.get("dnd"),this},isValid:function(){return this.get("validator").verifyValue(),this.get("value").trim().length?!0:!1},uploadSuccess:function(){return this},uploadFailure:function(){return this},uploadFile:function(e){var t,n=this.get("items")[e].file,i=(Math.floor(1e5*Math.random()+3),this),a=this.get("proxy"),o=new FormData;return o&&(o.append("images[]",n),t=$.ajax({url:"server.php",type:"POST",data:o,processData:!1,contentType:!1,onprogress:function(e){{Math.floor(100*(e.total/e.totalSize))}},success:i.uploadSuccess,failure:i.uploadFailure}),a.push(t),this.set("proxy",a)),this},stopUploadFile:function(e){var t=this.get("proxy");return t[e].abort(),this}});PMDynaform.extendNamespace("PMDynaform.model.File",e)}(),function(){var e=PMDynaform.model.Field.extend({defaults:{colSpan:12,colSpanLabel:3,colSpanControl:9,namespace:"pmdynaform",dataType:"string",dependenciesField:[],disabled:!1,group:"form",hint:"",id:PMDynaform.core.Utils.generateID(),name:PMDynaform.core.Utils.generateName("checkbox"),label:"",localOptions:[],maxLengthLabel:15,mode:"edit",options:[{label:"empty",value:"empty"}],readonly:!1,required:!1,remoteOptions:[],selected:[],type:"checkbox",tooltipLabel:"",validator:null,valid:!0,var_name:null,var_uid:null,value:[],variableInfo:{},columnName:null,originalType:null,data:null,defaultValue:null},initialize:function(e){var t;return"grid"===this.get("group")&&(this.attributes.options=[{value:"1",label:"true"},{value:"0",label:"false"}],_.isEmpty(this.get("data"))||(this.get("data").value="1"==JSON.parse(this.get("data").label)[0]||1==this.get("data").label?"1":"0"),this.set("dataType","boolean")),this.set("label",this.checkHTMLtags(this.get("label"))),this.on("change:label",this.onChangeLabel,this),this.on("change:options",this.onChangeOptions,this),this.on("change:value",this.updateItemSelected,this),this.set("validator",new PMDynaform.model.Validator({type:e.type,required:e.required,dataType:e.dataType})),this.get("data")&&this.get("data").value.length||(t={value:JSON.stringify([]),label:JSON.stringify([])},"boolean"===this.get("dataType")&&("true"===this.get("defaultValue")?(t.value=[this.get("options")[0].value],t.label=[this.get("options")[0].label],this.set("value",this.get("options")[0].value)):(t.value=[this.get("options")[1].value],t.label=[this.get("options")[1].label],this.set("value",this.get("options")[1].value))),this.set("data",t)),this.initControl(),this.attributes.value=this.get("data").value,this.get("validator").set("value",this.get("value")),this.set("dependenciesField",[]),this.setLocalOptions(),0===this.get("var_name").trim().length&&(this.attributes.name="form"===this.get("group")?"":this.get("id")),this
},initControl:function(){var e,t=this.get("options"),n=[],i=[];for(e=0;t.length>e;e+=1){if(!t[e].label)throw Error("The label parameter is necessary for the field");t[e].value||"number"==typeof t[e].value||(t[e].value=t[e].label),this.get("data")&&this.get("data").value&&("boolean"===this.get("dataType")?t[e].selected=this.get("data").value.indexOf(t[e].value)>-1?!0:!1:this.get("data").value.indexOf(t[e].value)>-1&&(t[e].selected=!0)),n.push({label:this.checkHTMLtags(t[e].label),value:this.checkHTMLtags(t[e].value),selected:t[e].selected?!0:!1})}this.set("options",n),this.set("selected",i)},setLocalOptions:function(){return this.set("localOptions",this.get("options")),this},getData:function(){return"grid"==this.get("group")?{name:this.get("columnName")?this.get("columnName"):"",value:"boolean"===this.get("dataType")?this.get("value")[0]:this.get("value")}:{name:this.get("name")?this.get("name"):"",value:"boolean"===this.get("dataType")?this.get("value")[0]:this.get("value")}},validate:function(e){return this.get("validator").set("value",e.selected.length),this.get("options").length&&this.get("validator").set("options",this.attributes.options),this.get("validator").verifyValue(),this.isValid(),this.get("valid")},isValid:function(){return this.attributes.valid=this.get("validator").get("valid"),this.get("valid")},setItemChecked:function(e){var t,n=this.get("options"),i=[];if(n){if("boolean"!==this.get("dataType"))for(t=0;n.length>t;t+=1)""+n[t].value==""+e.value&&(n[t].selected=e.checked);else e.checked?(n[0].selected=!0,n[1].selected=!1):(n[0].selected=!1,n[1].selected=!0);for(this.set("options",n),t=0;n.length>t;t+=1)n[t].selected&&i.push(n[t].value);this.attributes.value=i.length?i:[],this.set("selected",i)}return this},updateItemSelected:function(){var e,t,n=this.get("selected"),i=this.get("options");if("string"==typeof this.attributes.value&&this.attributes.value.length>0&&(n=this.attributes.value.split(/,/g)),$.isArray(this.get("value"))){for(this.set("selected",[]),n=this.get("selected"),e=0;i.length>e;e+=1)i[e].selected=!1;if(this.set("options",i),t=this.get("value"),"boolean"!==this.get("dataType"))for(e=0;t.length>e;e+=1)this.setItemChecked({value:t[e],checked:!0});else this.setItemChecked({value:this.get("options")[0],checked:1===parseInt(""+t)?!0:!1})}else this.setItemChecked({value:this.attributes.value,checked:!0});for(e=0;n.length>e;e+=1)this.setItemChecked({value:n[e].trim?n[e].trim():n[e],checked:!0});return this.attributes.disabled||(this.get("validator").set({valueDomain:this.get("value"),options:this.get("options")}),this.get("validator").set("value",this.get("selected").length),this.get("validator").verifyValue()),this.attributes.data&&(this.attributes.data.value=this.get("value")),this}});PMDynaform.extendNamespace("PMDynaform.model.Checkbox",e)}(),function(){var e=PMDynaform.model.Field.extend({defaults:{colSpan:12,colSpanLabel:3,colSpanControl:9,namespace:"pmdynaform",dataType:"date",group:"form",hint:"",id:"",name:"",placeholder:"",required:!1,validator:null,originalType:null,disabled:!1,format:!1,mode:"edit",data:null,value:"",stepping:1,minDate:!1,maxDate:!1,useCurrent:!1,collapse:!0,defaultDate:!1,disabledDates:[],sideBySide:!1,daysOfWeekDisabled:[],calendarWeeks:!0,viewMode:"days",toolbarPlacement:"default",showTodayButton:!0,showClear:!0,widgetPositioning:{horizontal:"left",vertical:"bottom"},keepOpen:!1,dayViewHeaderFormat:"MMMM YYYY",pickType:"datetime"},getData:function(){return"grid"==this.get("group")?{name:this.get("columnName")?this.get("columnName"):"",value:this.get("value")}:{name:this.get("name")?this.get("name"):"",value:this.get("value")}},initialize:function(e){var t={showClear:!1,useCurrent:!0},n=["year","month","day","hour","minute"],i=["years","months","days"],a={value:"",label:""};return"true"===this.get("useCurrent")&&(this.attributes.useCurrent=JSON.parse(this.get("useCurrent"))),-1===n.indexOf(this.get("useCurrent"))&&(this.attributes.useCurrent=t.useCurrent),"true"===this.get("showClear")&&(this.attributes.showClear=JSON.parse(this.get("showClear"))),"false"===this.get("showClear")&&(this.attributes.showClear=JSON.parse(this.get("showClear"))),"boolean"!=typeof this.get("showClear")&&(this.attributes.showClear=t.showClear),"false"===this.get("format")&&(this.attributes.format=JSON.parse(this.get("format"))),-1===i.indexOf(e.viewMode)&&(this.attributes.viewMode="days"),this.customPickTimeIcon(this.get("pickType")),this.get("data")?this.set("defaultDate",!1):this.set("data",a),this.get("maxDate")===this.get("minDate")&&(this.set("minDate",!1),this.set("maxDate",!1)),this.attributes.value=this.get("data").value,this.set("validator",new PMDynaform.model.Validator({required:this.get("required"),type:this.get("type"),dataType:this.get("dataType")})),0===this.get("var_name").trim().length&&(this.attributes.name="form"===this.get("group")?"":this.get("id")),this},customPickTimeIcon:function(){},isValid:function(){return this.attributes.valid=this.get("validator").get("valid"),this.get("valid")},validate:function(e){var t=e.value.trim();return this.set("value",t),this.get("validator").set("value",t),this.get("validator").verifyValue(),this.isValid(),this.get("valid")}});PMDynaform.extendNamespace("PMDynaform.model.Datetime",e)}(),function(){var e=PMDynaform.model.Field.extend({defaults:{autoComplete:"off",type:"text",placeholder:"untitled",label:"untitled label",id:PMDynaform.core.Utils.generateID(),name:PMDynaform.core.Utils.generateName("suggest"),colSpan:12,colSpanLabel:3,colSpanControl:9,namespace:"pmdynaform",value:"",group:"form",defaultValue:"",maxLengthLabel:15,mode:"edit",tooltipLabel:"",disabled:!1,dataType:"string",executeInit:!0,required:!1,maxLength:null,validator:null,valid:!0,proxy:null,variable:null,var_uid:null,var_name:null,options:[],localOptions:[],remoteOptions:[],dependenciesField:[],columnName:null,originalType:null,mask:"",clickedControl:!0},initialize:function(){var e;this.set("dataType",this.get("dataType").trim().length?this.get("dataType"):"string"),this.set("dependenciesField",[]),this.set("label",this.checkHTMLtags(this.get("label"))),this.set("defaultValue",this.checkHTMLtags(this.get("defaultValue"))),this.on("change:label",this.onChangeLabel,this),this.on("change:value",this.onChangeValue,this),this.set("validator",new PMDynaform.model.Validator),this.initControl(),this.setLocalOptions(),e=this.get("data"),e?this.set("value",e.label):(this.set("data",{value:"",label:""}),this.set("value","")),0===this.get("var_name").trim().length&&(this.attributes.name="form"===this.get("group")?"":this.get("id"))},initControl:function(){this.get("defaultValue")&&this.set("value",this.get("defaultValue"))},setLocalOptions:function(){return this.set("localOptions",this.get("options")),this},isValid:function(){return this.set("valid",this.get("validator").get("valid")),this.get("valid")},emptyValue:function(){this.set("value","")},setDependencies:function(e){var t;t=this.get("dependenciesField"),-1==t.indexOf(e)&&t.push(e),this.set("dependenciesField",[]),this.set("dependenciesField",t)},validate:function(e){var t=e.value.trim();return this.set("value",t),this.get("validator").set("type",e.type),this.get("validator").set("required",e.required),this.get("validator").set("value",t),this.get("validator").set("dataType",e.dataType),this.get("validator").verifyValue(),this.isValid(),this.get("valid")},getData:function(){return"grid"==this.get("group")?{name:this.get("columnName")?this.get("columnName"):"",value:this.get("value")}:{name:this.get("name")?this.get("name"):"",value:this.get("value")}},onChangeValue:function(e){var t,n,i={},a=!1;if(this.attributes.value=this.checkHTMLtags(e.attributes.value),t=this.get("options"),!this.get("clickedControl")&&this.get("data")){for(n=0;t.length>n;n+=1)if(t[n].value===this.get("value")){i.value=t[n].value,i.label=t[n].label,this.attributes.data=i,a=!0;break}a||(i.value="",i.label="",this.attributes.data=i)}return this}});PMDynaform.extendNamespace("PMDynaform.model.Suggest",e)}(),function(){var e=PMDynaform.model.Field.extend({defaults:{colSpan:12,colSpanLabel:3,colSpanControl:9,namespace:"pmdynaform",dataType:"string",defaultValue:"",disabled:!1,group:"form",hint:"",href:"",id:PMDynaform.core.Utils.generateID(),name:PMDynaform.core.Utils.generateName("link"),label:"untitled label",mode:"edit",required:!1,target:"_blank",targetOptions:{blank:"_blank",parent:"_parent",self:"_self",top:"_top"},type:"link",valid:!0,value:"",columnName:null,originalType:null},initialize:function(){this.set("label",this.checkHTMLtags(this.get("label"))),this.set("defaultValue",this.checkHTMLtags(this.get("defaultValue"))),this.on("change:label",this.onChangeLabel,this),this.on("change:value",this.onChangeValue,this),this.setTarget()},setTarget:function(){var e,t=this.get("targetOptions");e=t[this.get("target")]?t[this.get("target")]:"_blank",this.set("target",e)},getData:function(){return"grid"==this.get("group")?{name:this.get("columnName")?this.get("columnName"):"",value:this.get("value")}:{name:this.get("name")?this.get("name"):"",value:this.get("value")}}});PMDynaform.extendNamespace("PMDynaform.model.Link",e)}(),function(){var e=PMDynaform.model.Field.extend({defaults:{colSpan:12,group:"form",hint:"",namespace:"pmdynaform",id:PMDynaform.core.Utils.generateID(),name:PMDynaform.core.Utils.generateName("label"),label:"untitled label",mode:"view",options:[],required:!1,type:"label",columnName:null,originalType:null,variable:null,var_uid:null,var_name:null,localOptions:null,remoteOptions:null,fullOptions:[""],data:null},getData:function(){return"grid"==this.get("group")?{name:this.get("columnName")?this.get("columnName"):"",value:this.get("value")}:{name:this.get("name")?this.get("name"):"",value:this.get("value")}},initialize:function(){var e,t,n=[],i=this.get("options");for(this.set("label",this.checkHTMLtags(this.get("label"))),this.on("change:label",this.onChangeLabel,this),this.on("change:options",this.onChangeOptions,this),this.setLocalOptions(),e=0;i.length>e;e+=1)n.push(this.checkHTMLtags(i[e]));this.set("options",n),t=this.get("data"),t?this.set("value",t.label):(this.set("data",{value:"",label:""}),this.set("value","")),0===this.get("var_name").trim().length&&(this.attributes.name="form"===this.get("group")?"":this.get("id"))},setLocalOptions:function(){return this.set("localOptions",this.get("options")),this}});PMDynaform.extendNamespace("PMDynaform.model.Label",e)}(),function(){var e=PMDynaform.model.Field.extend({defaults:{type:"title",label:"untitled label",mode:"view",id:PMDynaform.core.Utils.generateID(),name:PMDynaform.core.Utils.generateName("title"),colSpan:12,namespace:"pmdynaform",className:{title:"pmdynaform-label-title",subtitle:"pmdynaform-label-subtitle"}},initialize:function(){this.set("label",this.checkHTMLtags(this.get("label"))),this.on("change:label",this.onChangeLabel,this)}});PMDynaform.extendNamespace("PMDynaform.model.Title",e)}(),function(){var e=Backbone.Model.extend({defaults:{colSpan:12,namespace:"pmdynaform",id:PMDynaform.core.Utils.generateID(),type:"empty"}});PMDynaform.extendNamespace("PMDynaform.model.Empty",e)}(),function(){var e=PMDynaform.model.Field.extend({defaults:{colSpan:12,dataType:"string",namespace:"pmdynaform",defaultValue:"",id:PMDynaform.core.Utils.generateID(),name:PMDynaform.core.Utils.generateName("hidden"),type:"hidden",valid:!0,value:"",group:"form",var_name:"",data:null},initialize:function(){var e;return this.set("defaultValue",this.checkHTMLtags(this.get("defaultValue"))),this.on("change:value",this.onChangeValue,this),e=this.get("data"),e?this.set("value",e.value):(this.set("data",{value:"",label:""}),this.set("value","")),this.initControl(),0===this.get("var_name").trim().length&&(this.attributes.name="form"===this.get("group")?"":this.get("id")),this},initControl:function(){this.get("defaultValue")&&this.set("value",this.get("defaultValue"))},checkHTMLtags:function(e){var t=e;return"string"==typeof e&&(null!==e.match(/([\<])([^\>]{1,})*([\>])/i)&&(e=e.replace(/</g,"&lt;"),t=e.replace(/>/g,"&gt;")),/\"|\'/g.test(e)&&(t=t.replace(/"/g,"&quot;"),t=t.replace(/'/g,"&#39;"))),t},onChangeValue:function(){}});PMDynaform.extendNamespace("PMDynaform.model.Hidden",e)}(),function(){var e=PMDynaform.model.Field.extend({defaults:{colSpan:12,colSpanLabel:3,colSpanControl:9,namespace:"pmdynaform",disabled:!1,defaultValue:"",id:PMDynaform.core.Utils.generateID(),name:PMDynaform.core.Utils.generateName("image"),label:"untitled label",crossorigin:"anonymous",alt:"",src:"",height:"",width:"",mode:"view",shape:"thumbnail",shapeTypes:{thumbnail:"img-thumbnail",rounded:"img-rounded",circle:"img-circle"},type:"image",columnName:null,originalType:null,group:"form"},initialize:function(e){this.set("label",this.checkHTMLtags(this.get("label"))),this.set("defaultValue",this.checkHTMLtags(this.get("defaultValue"))),this.on("change:label",this.onChangeLabel,this),this.on("change:value",this.onChangeValue,this),e.project&&(this.project=e.project),this.setShapeType()},setShapeType:function(){var e,t=this.get("shape"),n=this.get("shapeTypes");e=n[t]?n[t]:n.thumbnail,this.set("shape",e)}});PMDynaform.extendNamespace("PMDynaform.model.Image",e)}(),function(){var e=Backbone.Model.extend({defaults:{colSpan:12,namespace:"pmdynaform",id:PMDynaform.core.Utils.generateID(),name:PMDynaform.core.Utils.generateName("form"),type:"form",mode:"edit",valid:!0,modelForm:null},initialize:function(){},getData:function(){return{name:this.get("name"),id:this.get("id"),variables:{}}}});PMDynaform.extendNamespace("PMDynaform.model.SubForm",e)}(),function(){var e=PMDynaform.model.Field.extend({defaults:{colSpan:12,colSpanLabel:3,colSpanControl:9,namespace:"pmdynaform",dragMarker:!1,dataType:"string",disabled:!1,decimals:6,group:"form",hint:"",fullscreen:!1,id:PMDynaform.core.Utils.generateID(),name:PMDynaform.core.Utils.generateName("link"),googlemap:null,label:"untitled label",mode:"edit",required:!1,valid:!0,value:"",navigator:!0,currentLocation:!1,supportNavigator:!1,latitude:null,longitude:null,marker:null,zoom:15,tooltipLabel:"",panControl:!1,zoomControl:!1,scaleControl:!1,streetViewControl:!1,overviewMapControl:!1,mapTypeControl:!1,title:""},initialize:function(){this.set("label",this.checkHTMLtags(this.get("label"))),this.checkSupportGeoLocation()},checkSupportGeoLocation:function(){var e=navigator.geolocation?!0:!1;return this.set("supportNavigator",e),this},rightToLeftLabels:function(){var e=this.get("marker"),t=new google.maps.InfoWindow;t.setContent("<b></b>"),google.maps.event.addListener(e,"click",function(){t.open(this.get("googlemap"),e)})},getData:function(){return{name:this.get("variable")?this.get("variable").var_name:this.get("name"),value:this.get("longitude")+"|"+this.get("latitude")}}});PMDynaform.extendNamespace("PMDynaform.model.GeoMap",e)}(),function(){var e=PMDynaform.model.Field.extend({defaults:{type:"annotation",label:"untitled label",id:PMDynaform.core.Utils.generateID(),name:PMDynaform.core.Utils.generateName("title"),colSpan:12,namespace:"pmdynaform"},initialize:function(){this.set("label",this.checkHTMLtags(this.get("label"))),this.on("change:label",this.onChangeLabel,this)}});PMDynaform.extendNamespace("PMDynaform.model.Annotation",e)}(),function(){var e=PMDynaform.model.Field.extend({defaults:{id:PMDynaform.core.Utils.generateID(),type:"scannercode",label:"Untitled label",mode:"edit",group:"form",labelButton:"Scanner Code",name:"name",colSpan:12,height:"auto",value:"",required:!1,hint:"",disabled:!1,preview:!1,valid:!0,codes:[],geoData:null,interactive:!0},initialize:function(){this.initControl()},initControl:function(){return this.attributes.codes=[],this.set("preview",!0),this},isValid:function(){return this.set("valid",this.get("validator").get("valid")),this.get("valid")},getData:function(){return{name:this.get("name"),value:this.get("codes")}},addCode:function(e){var t=this.get("codes");t.push(e)},validate:function(){},getEndpointVariables:function(e){var t,n,i,a=this.get("project");if(a.endPointsPath[e.type]){i=a.endPointsPath[e.type];for(n in e.keys)e.keys.hasOwnProperty(n)&&(t=i.replace(RegExp(n,"g"),e.keys[n]),i=t)}return t}});PMDynaform.extendNamespace("PMDynaform.model.Qrcode_mobile",e)}(),function(){var e=PMDynaform.model.Field.extend({defaults:{id:PMDynaform.core.Utils.generateID(),type:"signature",label:"Untitled label",mode:"edit",group:"form",labelButton:"Signature",name:"name",colSpan:12,height:"auto",value:"",required:!1,hint:"",disabled:!1,preview:!1,valid:!0,files:[]},initialize:function(){this.initControl()},initControl:function(){return this.attributes.files=[],this.set("preview",!0),this},isValid:function(){return this.set("valid",this.get("validator").get("valid")),this.get("valid")},getData:function(){var e,t=[],n=this.attributes.files;for(e=0;n.length>e;e++)n[e].id!==void 0&&null!=n[e].id&&t.push(n[e].id);return{name:this.get("name"),value:t}},getDataCustom:function(){var e=this.attributes.files;return{name:this.get("name"),value:e}},validate:function(){},remoteProxyData:function(e){var t,n,i,a,o=this.get("project");return i=this.getEndpointVariables({type:"getImageGeo",keys:{"{caseID}":o.keys.caseID}}),t=o.getFullURL(i),n=new PMDynaform.core.Proxy({url:t,method:"POST",data:[{fileId:e,width:"300",version:1}],keys:o.token,successCallback:function(e,t){a=t}}),{id:a[0].fileId,base64:a[0].fileContent}},remoteGenerateID:function(e){var t,n,i,a,o=this.get("project");return i=this.getEndpointVariable({type:"generateImageGeo",keys:{"{caseID}":o.keys.caseID}}),t=o.getFullURL(i),t=o.getFullURL(i),n=new PMDynaform.core.Proxy({url:t,method:"POST",data:e,keys:o.token,successCallback:function(e,t){a=t}}),this.set("proxy",n),a},getEndpointVariables:function(e){var t,n,i,a=this.get("project");if(a.endPointsPath[e.type]){i=a.endPointsPath[e.type];for(n in e.keys)e.keys.hasOwnProperty(n)&&(t=i.replace(RegExp(n,"g"),e.keys[n]),i=t)}return t}});PMDynaform.extendNamespace("PMDynaform.model.Signature_mobile",e)}(),function(){var e=PMDynaform.model.Field.extend({defaults:{id:PMDynaform.core.Utils.generateID(),type:"location",label:"Untitled label",mode:"edit",group:"form",labelButton:"Map",name:"name",colSpan:12,height:"auto",value:"",required:!1,hint:"",disabled:!1,preview:!1,valid:!0,geoData:null,interactive:!0},initialize:function(){this.initControl()},initControl:function(){return this.attributes.images=[],this.set("preview",!0),this},isValid:function(){return this.set("valid",this.get("validator").get("valid")),this.get("valid")},getDataRFC:function(){var e=this.attributes.geoData;return"null"==e||null==e?e=null:(""==e.imageId||null==e.imageId||e.imageId===void 0)&&(e=e),e&&e.data&&delete e.data,{name:this.get("name"),value:e}},getData:function(){var e=this.attributes.geoData;return e&&e.base64&&delete e.base64,{name:this.get("name"),value:e}},validate:function(){},remoteProxyData:function(e){var t,n,i,a,o=this.get("project");return i=this.getEndpointVariables({type:"getImageGeo",keys:{"{caseID}":o.keys.caseID}}),t=o.getFullURL(i),t=o.getFullURL(i),n=new PMDynaform.core.Proxy({url:t,method:"POST",data:[{fileId:e,width:"600",version:1}],keys:o.token,successCallback:function(e,t){a=t}}),{id:a[0].fileId,base64:a[0].fileContent}},getImagesNetwork:function(e){var t,n,i,a,o=this.get("project");return i=this.getEndpointVariables({type:"getImageGeo",keys:{"{fileID}":e.imageId,"{caseID}":o.keys.caseID}}),t=o.getFullURL(i),t=o.getFullURL(i),n=new PMDynaform.core.Proxy({url:t,method:"POST",data:{fileId:e.imageId,width:"600",version:1},keys:o.token,successCallback:function(e,t){a=t}}),this.set("proxy",n),a},remoteGenerateLocation:function(e){var t,n,i,a,o=this.get("project"),r=new FormData;return r.append("tas_uid",e),r.append("tas_uid",o.keys.taskID),r.append("app_doc_comment",""),r.append("latitude",e.latitude),r.append("longitude",e.longitude),i=this.getEndpointVariable({type:"generateImageGeo",keys:{"{caseID}":o.keys.caseID}}),t=o.getFullURL(i),t=o.getFullURL(i),n=new PMDynaform.core.Proxy({url:t,method:"POST",data:r,keys:o.token,successCallback:function(e,t){a=t}}),this.set("proxy",n),a},getEndpointVariables:function(e){var t,n,i,a=this.get("project");if(a.endPointsPath[e.type]){i=a.endPointsPath[e.type];for(n in e.keys)e.keys.hasOwnProperty(n)&&(t=i.replace(RegExp(n,"g"),e.keys[n]),i=t)}return t}});PMDynaform.extendNamespace("PMDynaform.model.GeoMobile",e)}(),function(){var e=PMDynaform.model.Field.extend({defaults:{autoUpload:!1,camera:!0,colSpan:12,disabled:!1,dnd:!1,dndMessage:"Drag or choose local files",extensions:"pdf, png, jpg, mp3, doc, txt",group:"form",height:"100%",hint:"",id:PMDynaform.core.Utils.generateID(),items:[],label:"Untitled label",labelButton:"Choose Files",mode:"edit",multiple:!1,name:PMDynaform.core.Utils.generateName("file"),preview:!1,required:!1,size:1,type:"file",proxy:[],valid:!0,validator:null,value:"",files:[]},initialize:function(){this.attributes.files=[],this.initControl(),this.set("items",[]),this.set("proxy",[])},initControl:function(){return this.get("dnd")&&this.set("preview",!0),this},getData:function(){for(var e=[],t=0;this.attributes.files.length>t;t++)this.attributes.files[t].id?e.push(this.attributes.files[t].id):e.push(this.attributes.files[t]);return{name:this.get("name"),value:e}},getDataComplete:function(){for(var e=[],t=0;this.attributes.files.length>t;t++)this.attributes.files[t].base64?e.push(this.attributes.files[t].id):e.push(this.attributes.files[t]);return{name:this.get("name"),value:e}},validate:function(){},getIDImage:function(e){return this.attributes.images[e].id},getBase64Image:function(e){return this.attributes.images[e].value},makeBase64Image:function(e){return"data:image/png;base64,"+e},remoteProxyData:function(e){var t,n,i,a,o=this.get("project");return data=this.formatArrayImagesToSend(e),i=o.getFullEndPoint(o.endPointsPath.imageInfo),t=o.getFullURL(i),n=new PMDynaform.core.Proxy({url:t,method:"POST",data:data,keys:o.token,successCallback:function(e,t){a=t}}),a=this.formatArrayImages(a)},formatArrayImagesToSend:function(e){for(var t,n=[],i={},a=0;e.length>a;a++)t=e[a],i={fileId:t,width:"100",version:1},n.push(i);return n},formatArrayImages:function(e){for(var t=[],n={},i=0;e.length>i;i++)imageReceive=e[i],n={id:imageReceive.fileId,base64:imageReceive.fileContent},t.push(n);return t},remoteProxyDataMedia:function(e){var t,n,i=this.get("project");return n=this.getEndpointVariables({type:"fileStreaming",keys:{"{fileId}":e,"{caseID}":i.keys.caseID}}),t=i.getFullURL(n)},urlFileStreaming:function(e){var t,n,i,a=this.get("project");return n=this.getEndpointVariables({type:"fileStreaming",keys:{"{fileId}":e,"{caseID}":a.keys.caseID}}),t=a.getFullURLStreaming(n),i={id:e,filePath:t}},getEndpointVariables:function(e){var t,n,i,a=this.get("project");if(a.endPointsPath[e.type]){i=a.endPointsPath[e.type];for(n in e.keys)e.keys.hasOwnProperty(n)&&(t=i.replace(RegExp(n,"g"),e.keys[n]),i=t)}return t}});PMDynaform.extendNamespace("PMDynaform.model.FileMobile",e)}();